/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __create = Object.create;
var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __getProtoOf = Object.getPrototypeOf;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __esm = (fn, res) => function __init() {
  return fn && (res = (0, fn[__getOwnPropNames(fn)[0]])(fn = 0)), res;
};
var __commonJS = (cb, mod) => function __require() {
  return mod || (0, cb[__getOwnPropNames(cb)[0]])((mod = { exports: {} }).exports, mod), mod.exports;
};
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toESM = (mod, isNodeMode, target) => (target = mod != null ? __create(__getProtoOf(mod)) : {}, __copyProps(
  // If the importer is in node compatibility mode or this is not an ESM
  // file that has been converted to a CommonJS file using a Babel-
  // compatible transform (i.e. "__esModule" has not been set), then set
  // "default" to the CommonJS "module.exports" for node compatibility.
  isNodeMode || !mod || !mod.__esModule ? __defProp(target, "default", { value: mod, enumerable: true }) : target,
  mod
));
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/utils/file-utils.ts
var file_utils_exports = {};
__export(file_utils_exports, {
  SUPPORTED_EXTENSIONS: () => SUPPORTED_EXTENSIONS2,
  VIEW_TYPE_MAP: () => VIEW_TYPE_MAP,
  getFileByPath: () => getFileByPath,
  getFileExtension: () => getFileExtension,
  getViewTypeForFile: () => getViewTypeForFile,
  isBaseFile: () => isBaseFile,
  isCanvasFile: () => isCanvasFile,
  isMarkdownLike: () => isMarkdownLike,
  isMdxFile: () => isMdxFile,
  isSupportedExtension: () => isSupportedExtension,
  leafHasFile: () => leafHasFile,
  pathsEqual: () => pathsEqual,
  trimFileExtension: () => trimFileExtension
});
function isSupportedExtension(extension) {
  return SUPPORTED_EXTENSIONS2.includes(extension);
}
function getFileExtension(path) {
  var _a;
  const parts = path.split(".");
  return parts.length > 1 ? ((_a = parts[parts.length - 1]) != null ? _a : "").toLowerCase() : "";
}
function getViewTypeForFile(file) {
  const ext = file.extension.toLowerCase();
  if (isSupportedExtension(ext)) {
    return VIEW_TYPE_MAP[ext];
  }
  return "markdown";
}
function isMarkdownLike(file) {
  const ext = file.extension.toLowerCase();
  return ext === "md" || ext === "mdx";
}
function isMdxFile(file) {
  return file.extension.toLowerCase() === "mdx";
}
function isCanvasFile(file) {
  return file.extension.toLowerCase() === "canvas";
}
function isBaseFile(file) {
  return file.extension.toLowerCase() === "base";
}
function getFileByPath(app, path) {
  const exactMatch = app.vault.getAbstractFileByPath(path);
  if (exactMatch instanceof import_obsidian6.TFile) {
    return exactMatch;
  }
  const file = app.metadataCache.getFirstLinkpathDest(path, "/");
  return file;
}
function trimFileExtension(path) {
  const lastDot = path.lastIndexOf(".");
  if (lastDot > 0) {
    const ext = path.slice(lastDot + 1).toLowerCase();
    if (SUPPORTED_EXTENSIONS2.includes(ext)) {
      return path.slice(0, lastDot);
    }
  }
  return path;
}
function pathsEqual(path1, path2) {
  const norm1 = trimFileExtension(path1).toLowerCase();
  const norm2 = trimFileExtension(path2).toLowerCase();
  return norm1 === norm2;
}
function leafHasFile(leaf, filePath) {
  var _a, _b;
  const state = (_b = (_a = leaf.view) == null ? void 0 : _a.getState) == null ? void 0 : _b.call(_a);
  const leafFile = state == null ? void 0 : state.file;
  if (!leafFile) return false;
  return pathsEqual(leafFile, filePath);
}
var import_obsidian6, SUPPORTED_EXTENSIONS2, VIEW_TYPE_MAP;
var init_file_utils = __esm({
  "src/utils/file-utils.ts"() {
    import_obsidian6 = require("obsidian");
    SUPPORTED_EXTENSIONS2 = ["md", "mdx", "canvas", "base"];
    VIEW_TYPE_MAP = {
      "md": "markdown",
      "mdx": "markdown",
      "canvas": "canvas",
      "base": "bases"
    };
  }
});

// node_modules/.pnpm/obsidian-daily-notes-interf_8d9fc24b0fc622d94fd11fa5e9b185b3/node_modules/obsidian-daily-notes-interface/dist/main.js
var require_main = __commonJS({
  "node_modules/.pnpm/obsidian-daily-notes-interf_8d9fc24b0fc622d94fd11fa5e9b185b3/node_modules/obsidian-daily-notes-interface/dist/main.js"(exports) {
    "use strict";
    Object.defineProperty(exports, "__esModule", { value: true });
    var obsidian = require("obsidian");
    var DEFAULT_DAILY_NOTE_FORMAT = "YYYY-MM-DD";
    var DEFAULT_WEEKLY_NOTE_FORMAT = "gggg-[W]ww";
    var DEFAULT_MONTHLY_NOTE_FORMAT = "YYYY-MM";
    var DEFAULT_QUARTERLY_NOTE_FORMAT = "YYYY-[Q]Q";
    var DEFAULT_YEARLY_NOTE_FORMAT = "YYYY";
    function shouldUsePeriodicNotesSettings(periodicity) {
      var _a, _b;
      const periodicNotes = window.app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a[periodicity]) == null ? void 0 : _b.enabled);
    }
    function getDailyNoteSettings() {
      var _a, _b, _c, _d;
      try {
        const { internalPlugins, plugins } = window.app;
        if (shouldUsePeriodicNotesSettings("daily")) {
          const { format: format2, folder: folder2, template: template2 } = ((_b = (_a = plugins.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.daily) || {};
          return {
            format: format2 || DEFAULT_DAILY_NOTE_FORMAT,
            folder: (folder2 == null ? void 0 : folder2.trim()) || "",
            template: (template2 == null ? void 0 : template2.trim()) || ""
          };
        }
        const { folder, format, template } = ((_d = (_c = internalPlugins.getPluginById("daily-notes")) == null ? void 0 : _c.instance) == null ? void 0 : _d.options) || {};
        return {
          format: format || DEFAULT_DAILY_NOTE_FORMAT,
          folder: (folder == null ? void 0 : folder.trim()) || "",
          template: (template == null ? void 0 : template.trim()) || ""
        };
      } catch (err) {
        console.info("No custom daily note settings found!", err);
      }
    }
    function getWeeklyNoteSettings() {
      var _a, _b, _c, _d, _e, _f, _g;
      try {
        const pluginManager = window.app.plugins;
        const calendarSettings = (_a = pluginManager.getPlugin("calendar")) == null ? void 0 : _a.options;
        const periodicNotesSettings = (_c = (_b = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _b.settings) == null ? void 0 : _c.weekly;
        if (shouldUsePeriodicNotesSettings("weekly")) {
          return {
            format: periodicNotesSettings.format || DEFAULT_WEEKLY_NOTE_FORMAT,
            folder: ((_d = periodicNotesSettings.folder) == null ? void 0 : _d.trim()) || "",
            template: ((_e = periodicNotesSettings.template) == null ? void 0 : _e.trim()) || ""
          };
        }
        const settings = calendarSettings || {};
        return {
          format: settings.weeklyNoteFormat || DEFAULT_WEEKLY_NOTE_FORMAT,
          folder: ((_f = settings.weeklyNoteFolder) == null ? void 0 : _f.trim()) || "",
          template: ((_g = settings.weeklyNoteTemplate) == null ? void 0 : _g.trim()) || ""
        };
      } catch (err) {
        console.info("No custom weekly note settings found!", err);
      }
    }
    function getMonthlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("monthly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.monthly) || {};
        return {
          format: settings.format || DEFAULT_MONTHLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom monthly note settings found!", err);
      }
    }
    function getQuarterlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("quarterly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.quarterly) || {};
        return {
          format: settings.format || DEFAULT_QUARTERLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom quarterly note settings found!", err);
      }
    }
    function getYearlyNoteSettings() {
      var _a, _b, _c, _d;
      const pluginManager = window.app.plugins;
      try {
        const settings = shouldUsePeriodicNotesSettings("yearly") && ((_b = (_a = pluginManager.getPlugin("periodic-notes")) == null ? void 0 : _a.settings) == null ? void 0 : _b.yearly) || {};
        return {
          format: settings.format || DEFAULT_YEARLY_NOTE_FORMAT,
          folder: ((_c = settings.folder) == null ? void 0 : _c.trim()) || "",
          template: ((_d = settings.template) == null ? void 0 : _d.trim()) || ""
        };
      } catch (err) {
        console.info("No custom yearly note settings found!", err);
      }
    }
    function join(...partSegments) {
      let parts = [];
      for (let i = 0, l = partSegments.length; i < l; i++) {
        parts = parts.concat(partSegments[i].split("/"));
      }
      const newParts = [];
      for (let i = 0, l = parts.length; i < l; i++) {
        const part = parts[i];
        if (!part || part === ".")
          continue;
        else
          newParts.push(part);
      }
      if (parts[0] === "")
        newParts.unshift("");
      return newParts.join("/");
    }
    function basename(fullPath) {
      let base = fullPath.substring(fullPath.lastIndexOf("/") + 1);
      if (base.lastIndexOf(".") != -1)
        base = base.substring(0, base.lastIndexOf("."));
      return base;
    }
    async function ensureFolderExists(path) {
      const dirs = path.replace(/\\/g, "/").split("/");
      dirs.pop();
      if (dirs.length) {
        const dir = join(...dirs);
        if (!window.app.vault.getAbstractFileByPath(dir)) {
          await window.app.vault.createFolder(dir);
        }
      }
    }
    async function getNotePath(directory, filename) {
      if (!filename.endsWith(".md")) {
        filename += ".md";
      }
      const path = obsidian.normalizePath(join(directory, filename));
      await ensureFolderExists(path);
      return path;
    }
    async function getTemplateInfo(template) {
      const { metadataCache, vault } = window.app;
      const templatePath = obsidian.normalizePath(template);
      if (templatePath === "/") {
        return Promise.resolve(["", null]);
      }
      try {
        const templateFile = metadataCache.getFirstLinkpathDest(templatePath, "");
        const contents = await vault.cachedRead(templateFile);
        const IFoldInfo = window.app.foldManager.load(templateFile);
        return [contents, IFoldInfo];
      } catch (err) {
        console.error(`Failed to read the daily note template '${templatePath}'`, err);
        new obsidian.Notice("Failed to read the daily note template");
        return ["", null];
      }
    }
    function getDateUID(date, granularity = "day") {
      const ts = date.clone().startOf(granularity).format();
      return `${granularity}-${ts}`;
    }
    function removeEscapedCharacters(format) {
      return format.replace(/\[[^\]]*\]/g, "");
    }
    function isFormatAmbiguous(format, granularity) {
      if (granularity === "week") {
        const cleanFormat = removeEscapedCharacters(format);
        return /w{1,2}/i.test(cleanFormat) && (/M{1,4}/.test(cleanFormat) || /D{1,4}/.test(cleanFormat));
      }
      return false;
    }
    function getDateFromFile(file, granularity) {
      return getDateFromFilename(file.basename, granularity);
    }
    function getDateFromPath(path, granularity) {
      return getDateFromFilename(basename(path), granularity);
    }
    function getDateFromFilename(filename, granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      };
      const format = getSettings[granularity]().format.split("/").pop();
      const noteDate = window.moment(filename, format, true);
      if (!noteDate.isValid()) {
        return null;
      }
      if (isFormatAmbiguous(format, granularity)) {
        if (granularity === "week") {
          const cleanFormat = removeEscapedCharacters(format);
          if (/w{1,2}/i.test(cleanFormat)) {
            return window.moment(
              filename,
              // If format contains week, remove day & month formatting
              format.replace(/M{1,4}/g, "").replace(/D{1,4}/g, ""),
              false
            );
          }
        }
      }
      return noteDate;
    }
    var DailyNotesFolderMissingError = class extends Error {
    };
    async function createDailyNote2(date) {
      const app = window.app;
      const { vault } = app;
      const moment = window.moment;
      const { template, format, folder } = getDailyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*yesterday\s*}}/gi, date.clone().subtract(1, "day").format(format)).replace(/{{\s*tomorrow\s*}}/gi, date.clone().add(1, "d").format(format)));
        app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getDailyNote2(date, dailyNotes) {
      var _a;
      return (_a = dailyNotes[getDateUID(date, "day")]) != null ? _a : null;
    }
    function getAllDailyNotes2() {
      const { vault } = window.app;
      const { folder } = getDailyNoteSettings();
      const dailyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!dailyNotesFolder) {
        throw new DailyNotesFolderMissingError("Failed to find daily notes folder");
      }
      const dailyNotes = {};
      obsidian.Vault.recurseChildren(dailyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "day");
          if (date) {
            const dateString = getDateUID(date, "day");
            dailyNotes[dateString] = note;
          }
        }
      });
      return dailyNotes;
    }
    var WeeklyNotesFolderMissingError = class extends Error {
    };
    function getDaysOfWeek() {
      const { moment } = window;
      let weekStart = moment.localeData()._week.dow;
      const daysOfWeek = [
        "sunday",
        "monday",
        "tuesday",
        "wednesday",
        "thursday",
        "friday",
        "saturday"
      ];
      while (weekStart) {
        daysOfWeek.push(daysOfWeek.shift());
        weekStart--;
      }
      return daysOfWeek;
    }
    function getDayOfWeekNumericalValue(dayOfWeekName) {
      return getDaysOfWeek().indexOf(dayOfWeekName.toLowerCase());
    }
    async function createWeeklyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getWeeklyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*title\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*(sunday|monday|tuesday|wednesday|thursday|friday|saturday)\s*:(.*?)}}/gi, (_, dayOfWeek, momentFormat) => {
          const day = getDayOfWeekNumericalValue(dayOfWeek);
          return date.weekday(day).format(momentFormat.trim());
        }));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getWeeklyNote2(date, weeklyNotes) {
      var _a;
      return (_a = weeklyNotes[getDateUID(date, "week")]) != null ? _a : null;
    }
    function getAllWeeklyNotes2() {
      const weeklyNotes = {};
      if (!appHasWeeklyNotesPluginLoaded()) {
        return weeklyNotes;
      }
      const { vault } = window.app;
      const { folder } = getWeeklyNoteSettings();
      const weeklyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!weeklyNotesFolder) {
        throw new WeeklyNotesFolderMissingError("Failed to find weekly notes folder");
      }
      obsidian.Vault.recurseChildren(weeklyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "week");
          if (date) {
            const dateString = getDateUID(date, "week");
            weeklyNotes[dateString] = note;
          }
        }
      });
      return weeklyNotes;
    }
    var MonthlyNotesFolderMissingError = class extends Error {
    };
    async function createMonthlyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getMonthlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getMonthlyNote2(date, monthlyNotes) {
      var _a;
      return (_a = monthlyNotes[getDateUID(date, "month")]) != null ? _a : null;
    }
    function getAllMonthlyNotes2() {
      const monthlyNotes = {};
      if (!appHasMonthlyNotesPluginLoaded()) {
        return monthlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getMonthlyNoteSettings();
      const monthlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!monthlyNotesFolder) {
        throw new MonthlyNotesFolderMissingError("Failed to find monthly notes folder");
      }
      obsidian.Vault.recurseChildren(monthlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "month");
          if (date) {
            const dateString = getDateUID(date, "month");
            monthlyNotes[dateString] = note;
          }
        }
      });
      return monthlyNotes;
    }
    var QuarterlyNotesFolderMissingError = class extends Error {
    };
    async function createQuarterlyNote(date) {
      const { vault } = window.app;
      const { template, format, folder } = getQuarterlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getQuarterlyNote(date, quarterly) {
      var _a;
      return (_a = quarterly[getDateUID(date, "quarter")]) != null ? _a : null;
    }
    function getAllQuarterlyNotes() {
      const quarterly = {};
      if (!appHasQuarterlyNotesPluginLoaded()) {
        return quarterly;
      }
      const { vault } = window.app;
      const { folder } = getQuarterlyNoteSettings();
      const quarterlyFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!quarterlyFolder) {
        throw new QuarterlyNotesFolderMissingError("Failed to find quarterly notes folder");
      }
      obsidian.Vault.recurseChildren(quarterlyFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "quarter");
          if (date) {
            const dateString = getDateUID(date, "quarter");
            quarterly[dateString] = note;
          }
        }
      });
      return quarterly;
    }
    var YearlyNotesFolderMissingError = class extends Error {
    };
    async function createYearlyNote2(date) {
      const { vault } = window.app;
      const { template, format, folder } = getYearlyNoteSettings();
      const [templateContents, IFoldInfo] = await getTemplateInfo(template);
      const filename = date.format(format);
      const normalizedPath = await getNotePath(folder, filename);
      try {
        const createdFile = await vault.create(normalizedPath, templateContents.replace(/{{\s*(date|time)\s*(([+-]\d+)([yqmwdhs]))?\s*(:.+?)?}}/gi, (_, _timeOrDate, calc, timeDelta, unit, momentFormat) => {
          const now = window.moment();
          const currentDate = date.clone().set({
            hour: now.get("hour"),
            minute: now.get("minute"),
            second: now.get("second")
          });
          if (calc) {
            currentDate.add(parseInt(timeDelta, 10), unit);
          }
          if (momentFormat) {
            return currentDate.format(momentFormat.substring(1).trim());
          }
          return currentDate.format(format);
        }).replace(/{{\s*date\s*}}/gi, filename).replace(/{{\s*time\s*}}/gi, window.moment().format("HH:mm")).replace(/{{\s*title\s*}}/gi, filename));
        window.app.foldManager.save(createdFile, IFoldInfo);
        return createdFile;
      } catch (err) {
        console.error(`Failed to create file: '${normalizedPath}'`, err);
        new obsidian.Notice("Unable to create new file.");
      }
    }
    function getYearlyNote2(date, yearlyNotes) {
      var _a;
      return (_a = yearlyNotes[getDateUID(date, "year")]) != null ? _a : null;
    }
    function getAllYearlyNotes2() {
      const yearlyNotes = {};
      if (!appHasYearlyNotesPluginLoaded()) {
        return yearlyNotes;
      }
      const { vault } = window.app;
      const { folder } = getYearlyNoteSettings();
      const yearlyNotesFolder = vault.getAbstractFileByPath(obsidian.normalizePath(folder));
      if (!yearlyNotesFolder) {
        throw new YearlyNotesFolderMissingError("Failed to find yearly notes folder");
      }
      obsidian.Vault.recurseChildren(yearlyNotesFolder, (note) => {
        if (note instanceof obsidian.TFile) {
          const date = getDateFromFile(note, "year");
          if (date) {
            const dateString = getDateUID(date, "year");
            yearlyNotes[dateString] = note;
          }
        }
      });
      return yearlyNotes;
    }
    function appHasDailyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const dailyNotesPlugin = app.internalPlugins.plugins["daily-notes"];
      if (dailyNotesPlugin && dailyNotesPlugin.enabled) {
        return true;
      }
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.daily) == null ? void 0 : _b.enabled);
    }
    function appHasWeeklyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      if (app.plugins.getPlugin("calendar")) {
        return true;
      }
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.weekly) == null ? void 0 : _b.enabled);
    }
    function appHasMonthlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.monthly) == null ? void 0 : _b.enabled);
    }
    function appHasQuarterlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.quarterly) == null ? void 0 : _b.enabled);
    }
    function appHasYearlyNotesPluginLoaded() {
      var _a, _b;
      const { app } = window;
      const periodicNotes = app.plugins.getPlugin("periodic-notes");
      return periodicNotes && ((_b = (_a = periodicNotes.settings) == null ? void 0 : _a.yearly) == null ? void 0 : _b.enabled);
    }
    function getPeriodicNoteSettings(granularity) {
      const getSettings = {
        day: getDailyNoteSettings,
        week: getWeeklyNoteSettings,
        month: getMonthlyNoteSettings,
        quarter: getQuarterlyNoteSettings,
        year: getYearlyNoteSettings
      }[granularity];
      return getSettings();
    }
    function createPeriodicNote(granularity, date) {
      const createFn = {
        day: createDailyNote2,
        month: createMonthlyNote2,
        week: createWeeklyNote2
      };
      return createFn[granularity](date);
    }
    exports.DEFAULT_DAILY_NOTE_FORMAT = DEFAULT_DAILY_NOTE_FORMAT;
    exports.DEFAULT_MONTHLY_NOTE_FORMAT = DEFAULT_MONTHLY_NOTE_FORMAT;
    exports.DEFAULT_QUARTERLY_NOTE_FORMAT = DEFAULT_QUARTERLY_NOTE_FORMAT;
    exports.DEFAULT_WEEKLY_NOTE_FORMAT = DEFAULT_WEEKLY_NOTE_FORMAT;
    exports.DEFAULT_YEARLY_NOTE_FORMAT = DEFAULT_YEARLY_NOTE_FORMAT;
    exports.appHasDailyNotesPluginLoaded = appHasDailyNotesPluginLoaded;
    exports.appHasMonthlyNotesPluginLoaded = appHasMonthlyNotesPluginLoaded;
    exports.appHasQuarterlyNotesPluginLoaded = appHasQuarterlyNotesPluginLoaded;
    exports.appHasWeeklyNotesPluginLoaded = appHasWeeklyNotesPluginLoaded;
    exports.appHasYearlyNotesPluginLoaded = appHasYearlyNotesPluginLoaded;
    exports.createDailyNote = createDailyNote2;
    exports.createMonthlyNote = createMonthlyNote2;
    exports.createPeriodicNote = createPeriodicNote;
    exports.createQuarterlyNote = createQuarterlyNote;
    exports.createWeeklyNote = createWeeklyNote2;
    exports.createYearlyNote = createYearlyNote2;
    exports.getAllDailyNotes = getAllDailyNotes2;
    exports.getAllMonthlyNotes = getAllMonthlyNotes2;
    exports.getAllQuarterlyNotes = getAllQuarterlyNotes;
    exports.getAllWeeklyNotes = getAllWeeklyNotes2;
    exports.getAllYearlyNotes = getAllYearlyNotes2;
    exports.getDailyNote = getDailyNote2;
    exports.getDailyNoteSettings = getDailyNoteSettings;
    exports.getDateFromFile = getDateFromFile;
    exports.getDateFromPath = getDateFromPath;
    exports.getDateUID = getDateUID;
    exports.getMonthlyNote = getMonthlyNote2;
    exports.getMonthlyNoteSettings = getMonthlyNoteSettings;
    exports.getPeriodicNoteSettings = getPeriodicNoteSettings;
    exports.getQuarterlyNote = getQuarterlyNote;
    exports.getQuarterlyNoteSettings = getQuarterlyNoteSettings;
    exports.getTemplateInfo = getTemplateInfo;
    exports.getWeeklyNote = getWeeklyNote2;
    exports.getWeeklyNoteSettings = getWeeklyNoteSettings;
    exports.getYearlyNote = getYearlyNote2;
    exports.getYearlyNoteSettings = getYearlyNoteSettings;
  }
});

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => HomeBasePlugin
});
module.exports = __toCommonJS(main_exports);
var import_obsidian12 = require("obsidian");

// src/settings.ts
var HomeBaseType = /* @__PURE__ */ ((HomeBaseType2) => {
  HomeBaseType2["File"] = "File";
  HomeBaseType2["Workspace"] = "Workspace";
  HomeBaseType2["Random"] = "Random file";
  HomeBaseType2["RandomFolder"] = "Random in folder";
  HomeBaseType2["Graph"] = "Graph view";
  HomeBaseType2["None"] = "Nothing";
  HomeBaseType2["Journal"] = "Journal";
  HomeBaseType2["DailyNote"] = "Daily Note";
  HomeBaseType2["WeeklyNote"] = "Weekly Note";
  HomeBaseType2["MonthlyNote"] = "Monthly Note";
  HomeBaseType2["YearlyNote"] = "Yearly Note";
  return HomeBaseType2;
})(HomeBaseType || {});
var DEFAULT_SETTINGS = {
  // General
  homeBasePath: "",
  // Legacy
  homeBaseType: "File" /* File */,
  homeBaseValue: "",
  openOnStartup: true,
  openViewMode: "default",
  openMode: "replace-all",
  manualOpenMode: "retain",
  // Tab Behavior
  replaceNewTab: false,
  newTabMode: "only-when-empty",
  // Default: only replace when no tabs are open
  openWhenAllTabsClosed: true,
  // Default: open home base when all tabs are closed
  keepExistingTabs: true,
  useDifferentFileForNewTab: false,
  newTabType: "File" /* File */,
  newTabValue: "",
  newTabSeparateMobile: false,
  mobileNewTabType: "File" /* File */,
  mobileNewTabValue: "",
  // UI Features
  showStickyHomeIcon: false,
  stickyIconName: "home",
  hideHomeTabHeader: false,
  replaceMobileNewTab: false,
  // Mobile
  separateMobile: false,
  mobileHomeBasePath: "",
  // Legacy
  mobileHomeBaseType: "File" /* File */,
  mobileHomeBaseValue: "",
  // Automation
  commandOnOpen: "",
  // View behavior
  revertView: false,
  autoScroll: false,
  hideReleaseNotes: false
  // OFF by default
};
var VIEW_MODE_OPTIONS = {
  "default": "Default",
  "preview": "Reading view",
  "source": "Source mode",
  "live": "Live Preview"
};
var NEW_TAB_MODE_OPTIONS = {
  "only-when-empty": "Only when no tabs are open",
  "always": "Always replace new tabs"
};
var OPENING_MODE_OPTIONS = {
  "replace-all": "Replace all open notes",
  "replace-last": "Replace last note",
  "retain": "Keep open notes"
};
var UNCHANGEABLE_TYPES = [
  "Random file" /* Random */,
  "Graph view" /* Graph */,
  "Nothing" /* None */,
  "Daily Note" /* DailyNote */,
  "Weekly Note" /* WeeklyNote */,
  "Monthly Note" /* MonthlyNote */,
  "Yearly Note" /* YearlyNote */
];

// src/ui/settings-tab.ts
var import_obsidian5 = require("obsidian");

// src/utils/settings-compat.ts
var import_obsidian = require("obsidian");
var ObsidianModule = __toESM(require("obsidian"), 1);
function createSettingsGroup(containerEl, heading, manifestId) {
  if ((0, import_obsidian.requireApiVersion)("1.11.0")) {
    const SettingGroupClass = ObsidianModule.SettingGroup;
    if (SettingGroupClass) {
      const group = heading ? new SettingGroupClass(containerEl).setHeading(heading) : new SettingGroupClass(containerEl);
      return {
        addSetting(cb) {
          group.addSetting(cb);
        }
      };
    }
  }
  if (manifestId) {
    containerEl.addClass(`${manifestId}-settings-compat`);
  }
  if (heading) {
    const headingEl = containerEl.createDiv("setting-group-heading");
    headingEl.createEl("h3", { text: heading });
  }
  return {
    addSetting(cb) {
      const setting = new import_obsidian.Setting(containerEl);
      cb(setting);
    }
  };
}

// src/ui/file-suggest.ts
var import_obsidian2 = require("obsidian");
var SUPPORTED_EXTENSIONS = ["md", "mdx", "canvas", "base"];
var FilePathSuggest = class extends import_obsidian2.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    const lowerQuery = query.toLowerCase();
    const files = [];
    this.app.vault.getAllLoadedFiles().forEach((file) => {
      if (file instanceof import_obsidian2.TFile) {
        if (SUPPORTED_EXTENSIONS.includes(file.extension)) {
          if (file.path.toLowerCase().includes(lowerQuery) || file.basename.toLowerCase().includes(lowerQuery)) {
            files.push(file);
          }
        }
      }
    });
    files.sort((a, b) => {
      const aStartsWith = a.path.toLowerCase().startsWith(lowerQuery);
      const bStartsWith = b.path.toLowerCase().startsWith(lowerQuery);
      if (aStartsWith && !bStartsWith) return -1;
      if (!aStartsWith && bStartsWith) return 1;
      return a.path.localeCompare(b.path);
    });
    return files.slice(0, 20);
  }
  renderSuggestion(file, el) {
    el.createEl("div", {
      text: file.basename,
      cls: "suggestion-title"
    });
    if (file.parent && file.parent.path !== "/") {
      el.createEl("small", {
        text: file.parent.path,
        cls: "suggestion-path"
      });
    }
    if (file.extension !== "md") {
      el.createEl("span", {
        text: file.extension.toUpperCase(),
        cls: "suggestion-flair"
      });
    }
  }
  selectSuggestion(file) {
    this.inputEl.value = file.path;
    this.inputEl.trigger("input");
    this.close();
  }
};
var FolderSuggest = class extends import_obsidian2.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    const lowerQuery = query.toLowerCase();
    const folders = [];
    this.app.vault.getAllLoadedFiles().forEach((file) => {
      if (file instanceof import_obsidian2.TFolder) {
        if (file.path.toLowerCase().includes(lowerQuery)) {
          folders.push(file);
        }
      }
    });
    folders.sort((a, b) => a.path.localeCompare(b.path));
    return folders.slice(0, 20);
  }
  renderSuggestion(folder, el) {
    el.createEl("div", { text: folder.path || "/" });
  }
  selectSuggestion(folder) {
    this.inputEl.value = folder.path;
    this.inputEl.trigger("input");
    this.close();
  }
};
var WorkspaceSuggest = class extends import_obsidian2.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    var _a, _b, _c;
    const workspacesPlugin = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b.workspaces;
    if (!(workspacesPlugin == null ? void 0 : workspacesPlugin.enabled) || !((_c = workspacesPlugin.instance) == null ? void 0 : _c.workspaces)) {
      return [];
    }
    const workspaces = Object.keys(workspacesPlugin.instance.workspaces);
    const lowerQuery = query.toLowerCase();
    return workspaces.filter(
      (workspace) => workspace.toLowerCase().includes(lowerQuery)
    );
  }
  renderSuggestion(workspace, el) {
    el.createEl("div", { text: workspace });
  }
  selectSuggestion(workspace) {
    this.inputEl.value = workspace;
    this.inputEl.trigger("input");
    this.close();
  }
};

// src/ui/command-suggest.ts
var import_obsidian3 = require("obsidian");
var CommandSuggest = class extends import_obsidian3.AbstractInputSuggest {
  constructor(app, inputEl) {
    super(app, inputEl);
    this.inputEl = inputEl;
  }
  getSuggestions(query) {
    var _a;
    const lowerQuery = query.toLowerCase();
    const commands = [];
    const appWithCommands = this.app;
    const allCommands = (_a = appWithCommands.commands) == null ? void 0 : _a.commands;
    if (allCommands) {
      for (const command of Object.values(allCommands)) {
        if (command.name.toLowerCase().includes(lowerQuery) || command.id.toLowerCase().includes(lowerQuery)) {
          commands.push(command);
        }
      }
    }
    commands.sort((a, b) => a.name.localeCompare(b.name));
    return commands.slice(0, 30);
  }
  renderSuggestion(command, el) {
    el.createEl("div", {
      text: command.name,
      cls: "suggestion-title"
    });
    el.createEl("small", {
      text: command.id,
      cls: "suggestion-note"
    });
  }
  selectSuggestion(command) {
    this.inputEl.value = command.id;
    this.inputEl.trigger("input");
    this.close();
  }
};
function getCommandById(app, commandId) {
  var _a;
  const appWithCommands = app;
  const commands = (_a = appWithCommands.commands) == null ? void 0 : _a.commands;
  return commands == null ? void 0 : commands[commandId];
}
function executeCommand(app, commandId) {
  var _a, _b;
  if (!commandId) return false;
  const appWithCommands = app;
  const result = (_b = (_a = appWithCommands.commands) == null ? void 0 : _a.executeCommandById) == null ? void 0 : _b.call(_a, commandId);
  return result !== false;
}

// src/ui/icon-picker.ts
var import_obsidian4 = require("obsidian");
var IconPicker = class extends import_obsidian4.Modal {
  constructor(app, currentIcon, callback) {
    super(app);
    this.searchResults = [];
    this.selectedIcon = currentIcon;
    this.callback = callback;
  }
  onOpen() {
    this.containerEl.addClass("mod-confirmation");
    this.modalEl.addClass("iconic-icon-picker");
    this.setTitle("Change icon");
    const searchSetting = new import_obsidian4.Setting(this.contentEl);
    if (!import_obsidian4.Platform.isPhone) {
      searchSetting.setName("Search");
    }
    searchSetting.addSearch((searchField) => {
      searchField.setPlaceholder("Search icons...").onChange(() => this.updateSearchResults());
      searchField.inputEl.enterKeyHint = "go";
      this.searchField = searchField;
    });
    if (this.selectedIcon) {
      this.searchField.setValue(this.selectedIcon);
    }
    this.searchResultsSetting = new import_obsidian4.Setting(this.contentEl);
    this.searchResultsSetting.settingEl.addClass("iconic-search-results");
    this.searchResultsSetting.settingEl.tabIndex = 0;
    this.searchResultsSetting.settingEl.addEventListener("wheel", (event) => {
      if (document.body.hasClass("mod-rtl")) {
        this.searchResultsSetting.settingEl.scrollLeft -= event.deltaY;
      } else {
        this.searchResultsSetting.settingEl.scrollLeft += event.deltaY;
      }
    }, { passive: true });
    const buttonContainer = this.modalEl.createDiv({ cls: "modal-button-container" });
    new import_obsidian4.ButtonComponent(buttonContainer).setButtonText("Cancel").onClick(() => this.close()).buttonEl.addClass("mod-cancel");
    new import_obsidian4.ButtonComponent(buttonContainer).setButtonText("Save").setCta().onClick(() => {
      this.callback(this.selectedIcon);
      this.close();
    });
    requestAnimationFrame(() => {
      this.searchField.inputEl.select();
      this.updateSearchResults();
    });
  }
  /**
   * Update search results based on current query
   */
  updateSearchResults() {
    const query = this.searchField.getValue().toLowerCase().trim();
    const fuzzySearch = (0, import_obsidian4.prepareFuzzySearch)(query);
    const matches = [];
    const iconIds = (0, import_obsidian4.getIconIds)();
    if (query) {
      for (const iconId of iconIds) {
        const iconName = this.formatIconName(iconId);
        if (iconId === query || iconId.toLowerCase() === query) {
          matches.push([0, [iconId, iconName]]);
        } else {
          const fuzzyMatch = fuzzySearch(iconName);
          if (fuzzyMatch) {
            matches.push([fuzzyMatch.score, [iconId, iconName]]);
          }
        }
      }
    } else {
      for (const iconId of iconIds) {
        const iconName = this.formatIconName(iconId);
        matches.push([0, [iconId, iconName]]);
      }
    }
    matches.sort(([scoreA], [scoreB]) => scoreA > scoreB ? -1 : 1);
    this.searchResults.length = 0;
    const maxResults = 100;
    for (const [, iconEntry] of matches) {
      this.searchResults.push(iconEntry);
      if (this.searchResults.length >= maxResults) break;
    }
    this.searchResultsSetting.clear();
    for (const [iconId, iconName] of this.searchResults) {
      this.searchResultsSetting.addExtraButton((iconButton) => {
        iconButton.setTooltip(iconName, {
          delay: 300,
          placement: import_obsidian4.Platform.isPhone ? "top" : "bottom"
        });
        const iconEl = iconButton.extraSettingsEl;
        iconEl.addClass("iconic-search-result");
        iconEl.tabIndex = -1;
        (0, import_obsidian4.setIcon)(iconEl, iconId);
        if (iconId === this.selectedIcon) {
          iconEl.addClass("is-selected");
        }
        iconEl.addEventListener("click", () => {
          this.selectedIcon = iconId;
          this.callback(iconId);
          this.close();
        });
        if (import_obsidian4.Platform.isPhone) {
          iconEl.addEventListener("contextmenu", () => {
            var _a;
            (_a = navigator.vibrate) == null ? void 0 : _a.call(navigator, 100);
          });
        }
      });
    }
    if (this.searchResults.length === 0) {
      this.searchResultsSetting.addExtraButton((button) => {
        button.extraSettingsEl.addClasses(["iconic-invisible", "iconic-search-result"]);
      });
    }
  }
  /**
   * Format icon ID into readable name
   */
  formatIconName(iconId) {
    let name = iconId.replace(/^lucide-/, "");
    name = name.replace(/-/g, " ");
    return name.split(" ").map(
      (word) => word.charAt(0).toUpperCase() + word.slice(1)
    ).join(" ");
  }
  onClose() {
    this.contentEl.empty();
  }
};

// src/ui/settings-tab.ts
var HomeBaseSettingTab = class extends import_obsidian5.PluginSettingTab {
  constructor(app, plugin) {
    super(app, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    const isMobile = this.plugin.settings.separateMobile;
    const activeType = isMobile ? this.plugin.settings.mobileHomeBaseType : this.plugin.settings.homeBaseType;
    const activeValue = isMobile ? this.plugin.settings.mobileHomeBaseValue : this.plugin.settings.homeBaseValue;
    const generalGroup = createSettingsGroup(containerEl, void 0, "home-base");
    generalGroup.addSetting((setting) => {
      setting.setName("Type").setDesc("What to open as your home base").addDropdown((dropdown) => {
        let pluginDisabled = false;
        for (const type of Object.values(HomeBaseType)) {
          if (!this.plugin.hasRequiredPlugin(type)) {
            if (type === activeType) {
              pluginDisabled = true;
              dropdown.addOption(type, type);
            } else {
              dropdown.selectEl.createEl("option", {
                text: type,
                attr: { disabled: "true" }
              });
              continue;
            }
          } else {
            dropdown.addOption(type, type);
          }
        }
        dropdown.setValue(activeType || "File" /* File */).onChange(async (value) => {
          if (isMobile) {
            this.plugin.settings.mobileHomeBaseType = value;
          } else {
            this.plugin.settings.homeBaseType = value;
          }
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
        if (pluginDisabled) {
          setting.descEl.createDiv({
            text: "The plugin required for this home page type isn't available.",
            cls: "mod-warning"
          });
        }
      });
    });
    if (!UNCHANGEABLE_TYPES.includes(activeType)) {
      generalGroup.addSetting((setting) => {
        let desc = "";
        let placeholder = "";
        if (activeType === "File" /* File */) {
          desc = "The file to open as your home base (supports .md, .mdx, .canvas, .base)";
          placeholder = "Path to home base file";
        } else if (activeType === "Workspace" /* Workspace */) {
          desc = "The workspace to load as your home base";
          placeholder = "Workspace name";
        } else if (activeType === "Random in folder" /* RandomFolder */) {
          desc = "The folder to pick a random file from";
          placeholder = "Folder path";
        } else if (activeType === "Journal" /* Journal */) {
          desc = "The journal name";
          placeholder = "Journal name";
        }
        setting.setName(activeType === "File" /* File */ ? "File" : activeType === "Workspace" /* Workspace */ ? "Workspace" : activeType === "Random in folder" /* RandomFolder */ ? "Folder" : activeType === "Journal" /* Journal */ ? "Journal" : "Value").setDesc(desc).addText((text) => {
          if (activeType === "File" /* File */) {
            new FilePathSuggest(this.app, text.inputEl);
          } else if (activeType === "Workspace" /* Workspace */) {
            new WorkspaceSuggest(this.app, text.inputEl);
          } else if (activeType === "Random in folder" /* RandomFolder */) {
            new FolderSuggest(this.app, text.inputEl);
          }
          text.setPlaceholder(placeholder).setValue(activeValue || "").onChange(async (value) => {
            if (isMobile) {
              this.plugin.settings.mobileHomeBaseValue = value;
              if (activeType === "File" /* File */) {
                this.plugin.settings.mobileHomeBasePath = value;
              }
            } else {
              this.plugin.settings.homeBaseValue = value;
              if (activeType === "File" /* File */) {
                this.plugin.settings.homeBasePath = value;
              }
            }
            await this.plugin.saveSettings();
          });
        });
      });
    }
    generalGroup.addSetting((setting) => {
      setting.setName("Open on startup").setDesc("Open the home base when launching Obsidian").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.openOnStartup).onChange(async (value) => {
          this.plugin.settings.openOnStartup = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Opening mode (startup)").setDesc("How to handle existing tabs when opening on startup").addDropdown((dropdown) => {
        for (const [value, label] of Object.entries(OPENING_MODE_OPTIONS)) {
          dropdown.addOption(value, label);
        }
        dropdown.setValue(this.plugin.settings.openMode).onChange(async (value) => {
          this.plugin.settings.openMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Opening mode (manual)").setDesc("How to handle existing tabs when opening manually").addDropdown((dropdown) => {
        for (const [value, label] of Object.entries(OPENING_MODE_OPTIONS)) {
          dropdown.addOption(value, label);
        }
        dropdown.setValue(this.plugin.settings.manualOpenMode).onChange(async (value) => {
          this.plugin.settings.manualOpenMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("View mode").setDesc("How to open Markdown files").addDropdown((dropdown) => {
        for (const [value, label] of Object.entries(VIEW_MODE_OPTIONS)) {
          dropdown.addOption(value, label);
        }
        dropdown.setValue(this.plugin.settings.openViewMode).onChange(async (value) => {
          this.plugin.settings.openViewMode = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Revert view on close").setDesc("When navigating away from the home base, restore the default view").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.revertView).onChange(async (value) => {
          this.plugin.settings.revertView = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Auto-scroll").setDesc("When opening the home base, scroll to the bottom and focus on the last line").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.autoScroll).onChange(async (value) => {
          this.plugin.settings.autoScroll = value;
          await this.plugin.saveSettings();
        });
      });
    });
    generalGroup.addSetting((setting) => {
      setting.setName("Hide release notes").setDesc("Never display release notes when Obsidian updates").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.hideReleaseNotes).onChange(async (value) => {
          this.plugin.settings.hideReleaseNotes = value;
          await this.plugin.saveSettings();
        });
      });
    });
    const tabGroup = createSettingsGroup(containerEl, "Tab Behavior", "home-base");
    tabGroup.addSetting((setting) => {
      setting.setName("Open home base when all tabs are closed").setDesc("When you close all tabs, automatically open the home base").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.openWhenAllTabsClosed).onChange(async (value) => {
          this.plugin.settings.openWhenAllTabsClosed = value;
          await this.plugin.saveSettings();
        });
      });
    });
    tabGroup.addSetting((setting) => {
      setting.setName("Replace new tabs").setDesc('Open home base instead of new empty tabs (works independently of "open home base when all tabs are closed")').addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.replaceNewTab).onChange(async (value) => {
          this.plugin.settings.replaceNewTab = value;
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.replaceNewTab) {
      tabGroup.addSetting((setting) => {
        setting.setName("New tab replacement mode").setDesc("When to replace new tabs (only when no tabs are open, or always)").addDropdown((dropdown) => {
          for (const [value, label] of Object.entries(NEW_TAB_MODE_OPTIONS)) {
            dropdown.addOption(value, label);
          }
          dropdown.setValue(this.plugin.settings.newTabMode).onChange(async (value) => {
            this.plugin.settings.newTabMode = value;
            await this.plugin.saveSettings();
          });
        });
      });
      tabGroup.addSetting((setting) => {
        setting.setName("Use different home base for new tabs").setDesc("Configure a different home base to open for new tabs (instead of the main home base)").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.useDifferentFileForNewTab).onChange(async (value) => {
            this.plugin.settings.useDifferentFileForNewTab = value;
            await this.plugin.saveSettings();
            const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
            const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
            this.display();
            requestAnimationFrame(() => {
              if (scrollContainer) {
                scrollContainer.scrollTop = scrollTop;
              }
            });
          });
        });
      });
      if (this.plugin.settings.useDifferentFileForNewTab) {
        const desktopType = this.plugin.settings.newTabType || "File" /* File */;
        const desktopValue = this.plugin.settings.newTabValue || "";
        tabGroup.addSetting((setting) => {
          setting.setName("New tab type").setDesc("What to open for new tabs").addDropdown((dropdown) => {
            let pluginDisabled = false;
            for (const type of Object.values(HomeBaseType)) {
              if (!this.plugin.hasRequiredPlugin(type)) {
                if (type === desktopType) {
                  pluginDisabled = true;
                  dropdown.addOption(type, type);
                } else {
                  dropdown.selectEl.createEl("option", {
                    text: type,
                    attr: { disabled: "true" }
                  });
                  continue;
                }
              } else {
                dropdown.addOption(type, type);
              }
            }
            dropdown.setValue(desktopType).onChange(async (value) => {
              this.plugin.settings.newTabType = value;
              await this.plugin.saveSettings();
              const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
              const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
              this.display();
              requestAnimationFrame(() => {
                if (scrollContainer) {
                  scrollContainer.scrollTop = scrollTop;
                }
              });
            });
            if (pluginDisabled) {
              setting.descEl.createDiv({
                text: "The plugin required for this new tab type isn't available.",
                cls: "mod-warning"
              });
            }
          });
        });
        if (!UNCHANGEABLE_TYPES.includes(desktopType)) {
          tabGroup.addSetting((setting) => {
            let desc = "";
            let placeholder = "";
            if (desktopType === "File" /* File */) {
              desc = "The file to open for new tabs (supports .md, .mdx, .canvas, .base)";
              placeholder = "Path to new tab file";
            } else if (desktopType === "Workspace" /* Workspace */) {
              desc = "The workspace to load for new tabs";
              placeholder = "Workspace name";
            } else if (desktopType === "Random in folder" /* RandomFolder */) {
              desc = "The folder to pick a random file from for new tabs";
              placeholder = "Folder path";
            } else if (desktopType === "Journal" /* Journal */) {
              desc = "The journal name for new tabs";
              placeholder = "Journal name";
            }
            setting.setName(desktopType === "File" /* File */ ? "New tab file" : desktopType === "Workspace" /* Workspace */ ? "New tab workspace" : desktopType === "Random in folder" /* RandomFolder */ ? "New tab folder" : desktopType === "Journal" /* Journal */ ? "New tab journal" : "New tab value").setDesc(desc).addText((text) => {
              if (desktopType === "File" /* File */) {
                new FilePathSuggest(this.app, text.inputEl);
              } else if (desktopType === "Workspace" /* Workspace */) {
                new WorkspaceSuggest(this.app, text.inputEl);
              } else if (desktopType === "Random in folder" /* RandomFolder */) {
                new FolderSuggest(this.app, text.inputEl);
              }
              text.setPlaceholder(placeholder).setValue(desktopValue || "").onChange(async (value) => {
                this.plugin.settings.newTabValue = value;
                await this.plugin.saveSettings();
              });
            });
          });
        }
      }
    }
    const uiGroup = createSettingsGroup(containerEl, "UI Features", "home-base");
    uiGroup.addSetting((setting) => {
      setting.setName("Sticky home icon").setDesc("Show a home icon in the tab bar that stays pinned to the left (desktop only)").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.showStickyHomeIcon).onChange(async (value) => {
          this.plugin.settings.showStickyHomeIcon = value;
          await this.plugin.saveSettings();
          this.plugin.updateStickyTabIcon();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.showStickyHomeIcon) {
      uiGroup.addSetting((setting) => {
        setting.setName("Icon").setDesc("The icon to display in the sticky home icon").addButton((button) => {
          const iconName = this.plugin.settings.stickyIconName || "home";
          button.setButtonText("Change icon").setIcon(iconName).onClick(() => {
            const picker = new IconPicker(
              this.app,
              this.plugin.settings.stickyIconName,
              (icon) => {
                void (async () => {
                  this.plugin.settings.stickyIconName = icon;
                  await this.plugin.saveSettings();
                  this.plugin.stickyTabService.update();
                  this.display();
                })();
              }
            );
            picker.open();
          });
        });
      });
      uiGroup.addSetting((setting) => {
        setting.setName("Hide tab header").setDesc("Hide the sticky home tab header when it's open, using the sticky icon as the tab indicator").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.hideHomeTabHeader).onChange(async (value) => {
            this.plugin.settings.hideHomeTabHeader = value;
            await this.plugin.saveSettings();
            this.plugin.stickyTabService.updateTabHeaders();
          });
        });
      });
    }
    const mobileGroup = createSettingsGroup(containerEl, "Mobile", "home-base");
    mobileGroup.addSetting((setting) => {
      setting.setName("Separate mobile home base").setDesc("Use a different home base on mobile devices").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.separateMobile).onChange(async (value) => {
          this.plugin.settings.separateMobile = value;
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
    if (this.plugin.settings.separateMobile) {
      mobileGroup.addSetting((setting) => {
        setting.setName("Mobile home base").setDesc("What to open as your home base on mobile").addDropdown((dropdown) => {
          const mobileType = this.plugin.settings.mobileHomeBaseType || "File" /* File */;
          let pluginDisabled = false;
          for (const type of Object.values(HomeBaseType)) {
            if (!this.plugin.hasRequiredPlugin(type)) {
              if (type === mobileType) {
                pluginDisabled = true;
                dropdown.addOption(type, type);
              } else {
                dropdown.selectEl.createEl("option", {
                  text: type,
                  attr: { disabled: "true" }
                });
                continue;
              }
            } else {
              dropdown.addOption(type, type);
            }
          }
          dropdown.setValue(mobileType).onChange(async (value) => {
            this.plugin.settings.mobileHomeBaseType = value;
            await this.plugin.saveSettings();
            const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
            const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
            this.display();
            requestAnimationFrame(() => {
              if (scrollContainer) {
                scrollContainer.scrollTop = scrollTop;
              }
            });
          });
          if (pluginDisabled) {
            setting.descEl.createDiv({
              text: "The plugin required for this home page type isn't available.",
              cls: "mod-warning"
            });
          }
        });
      });
      if (!UNCHANGEABLE_TYPES.includes(this.plugin.settings.mobileHomeBaseType)) {
        mobileGroup.addSetting((setting) => {
          const mobileType = this.plugin.settings.mobileHomeBaseType;
          let desc = "";
          let placeholder = "";
          if (mobileType === "File" /* File */) {
            desc = "The file to open as your home base on mobile";
            placeholder = "Path to home base file";
          } else if (mobileType === "Workspace" /* Workspace */) {
            desc = "The workspace to load as your home base on mobile";
            placeholder = "Workspace name";
          } else if (mobileType === "Random in folder" /* RandomFolder */) {
            desc = "The folder to pick a random file from on mobile";
            placeholder = "Folder path";
          } else if (mobileType === "Journal" /* Journal */) {
            desc = "The journal name for mobile";
            placeholder = "Journal name";
          }
          setting.setName(mobileType === "File" /* File */ ? "Mobile file" : mobileType === "Workspace" /* Workspace */ ? "Mobile workspace" : mobileType === "Random in folder" /* RandomFolder */ ? "Mobile folder" : mobileType === "Journal" /* Journal */ ? "Mobile journal" : "Mobile value").setDesc(desc).addText((text) => {
            if (mobileType === "File" /* File */) {
              new FilePathSuggest(this.app, text.inputEl);
            } else if (mobileType === "Workspace" /* Workspace */) {
              new WorkspaceSuggest(this.app, text.inputEl);
            } else if (mobileType === "Random in folder" /* RandomFolder */) {
              new FolderSuggest(this.app, text.inputEl);
            }
            text.setPlaceholder(placeholder).setValue(this.plugin.settings.mobileHomeBaseValue || "").onChange(async (value) => {
              this.plugin.settings.mobileHomeBaseValue = value;
              if (mobileType === "File" /* File */) {
                this.plugin.settings.mobileHomeBasePath = value;
              }
              await this.plugin.saveSettings();
            });
          });
        });
      }
    }
    mobileGroup.addSetting((setting) => {
      setting.setName("Replace mobile new tab button").setDesc("Change the mobile new tab button to a home icon").addToggle((toggle) => {
        toggle.setValue(this.plugin.settings.replaceMobileNewTab).onChange(async (value) => {
          this.plugin.settings.replaceMobileNewTab = value;
          await this.plugin.saveSettings();
          this.plugin.updateMobileButton();
        });
      });
    });
    if (this.plugin.settings.useDifferentFileForNewTab) {
      mobileGroup.addSetting((setting) => {
        setting.setName("Separate mobile new tab").setDesc("Use a different new tab file on mobile devices").addToggle((toggle) => {
          toggle.setValue(this.plugin.settings.newTabSeparateMobile).onChange(async (value) => {
            this.plugin.settings.newTabSeparateMobile = value;
            await this.plugin.saveSettings();
            const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
            const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
            this.display();
            requestAnimationFrame(() => {
              if (scrollContainer) {
                scrollContainer.scrollTop = scrollTop;
              }
            });
          });
        });
      });
      if (this.plugin.settings.newTabSeparateMobile) {
        const mobileType = this.plugin.settings.mobileNewTabType || "File" /* File */;
        const mobileValue = this.plugin.settings.mobileNewTabValue || "";
        mobileGroup.addSetting((setting) => {
          setting.setName("Mobile new tab type").setDesc("What to open for new tabs on mobile").addDropdown((dropdown) => {
            let pluginDisabled = false;
            for (const type of Object.values(HomeBaseType)) {
              if (!this.plugin.hasRequiredPlugin(type)) {
                if (type === mobileType) {
                  pluginDisabled = true;
                  dropdown.addOption(type, type);
                } else {
                  dropdown.selectEl.createEl("option", {
                    text: type,
                    attr: { disabled: "true" }
                  });
                  continue;
                }
              } else {
                dropdown.addOption(type, type);
              }
            }
            dropdown.setValue(mobileType).onChange(async (value) => {
              this.plugin.settings.mobileNewTabType = value;
              await this.plugin.saveSettings();
              const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
              const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
              this.display();
              requestAnimationFrame(() => {
                if (scrollContainer) {
                  scrollContainer.scrollTop = scrollTop;
                }
              });
            });
            if (pluginDisabled) {
              setting.descEl.createDiv({
                text: "The plugin required for this mobile new tab type isn't available.",
                cls: "mod-warning"
              });
            }
          });
        });
        if (!UNCHANGEABLE_TYPES.includes(mobileType)) {
          mobileGroup.addSetting((setting) => {
            let desc = "";
            let placeholder = "";
            if (mobileType === "File" /* File */) {
              desc = "The file to open for new tabs on mobile";
              placeholder = "Path to mobile new tab file";
            } else if (mobileType === "Workspace" /* Workspace */) {
              desc = "The workspace to load for new tabs on mobile";
              placeholder = "Workspace name";
            } else if (mobileType === "Random in folder" /* RandomFolder */) {
              desc = "The folder to pick a random file from for new tabs on mobile";
              placeholder = "Folder path";
            } else if (mobileType === "Journal" /* Journal */) {
              desc = "The journal name for new tabs on mobile";
              placeholder = "Journal name";
            }
            setting.setName(mobileType === "File" /* File */ ? "Mobile new tab file" : mobileType === "Workspace" /* Workspace */ ? "Mobile new tab workspace" : mobileType === "Random in folder" /* RandomFolder */ ? "Mobile new tab folder" : mobileType === "Journal" /* Journal */ ? "Mobile new tab journal" : "Mobile new tab value").setDesc(desc).addText((text) => {
              if (mobileType === "File" /* File */) {
                new FilePathSuggest(this.app, text.inputEl);
              } else if (mobileType === "Workspace" /* Workspace */) {
                new WorkspaceSuggest(this.app, text.inputEl);
              } else if (mobileType === "Random in folder" /* RandomFolder */) {
                new FolderSuggest(this.app, text.inputEl);
              }
              text.setPlaceholder(placeholder).setValue(mobileValue || "").onChange(async (value) => {
                this.plugin.settings.mobileNewTabValue = value;
                await this.plugin.saveSettings();
              });
            });
          });
        }
      }
    }
    const automationGroup = createSettingsGroup(containerEl, "Automation", "home-base");
    automationGroup.addSetting((setting) => {
      const commandId = this.plugin.settings.commandOnOpen;
      const command = commandId ? getCommandById(this.app, commandId) : void 0;
      const displayValue = command ? command.name : commandId;
      setting.setName("Command on open").setDesc("Run an Obsidian command when opening home base").addText((text) => {
        new CommandSuggest(this.app, text.inputEl);
        text.setPlaceholder("Search for a command...").setValue(displayValue || "").onChange(async (value) => {
          this.plugin.settings.commandOnOpen = value;
          await this.plugin.saveSettings();
        });
      }).addExtraButton((btn) => {
        btn.setIcon("x").setTooltip("Clear command").onClick(async () => {
          this.plugin.settings.commandOnOpen = "";
          await this.plugin.saveSettings();
          const scrollContainer = containerEl.closest(".vertical-tab-content") || containerEl.closest(".settings-content") || containerEl.parentElement;
          const scrollTop = (scrollContainer == null ? void 0 : scrollContainer.scrollTop) || 0;
          this.display();
          requestAnimationFrame(() => {
            if (scrollContainer) {
              scrollContainer.scrollTop = scrollTop;
            }
          });
        });
      });
    });
  }
};

// src/services/home-service.ts
var import_obsidian8 = require("obsidian");
init_file_utils();

// src/utils/homebase-resolver.ts
var import_obsidian7 = require("obsidian");
var import_obsidian_daily_notes_interface = __toESM(require_main(), 1);
function randomFile(app, root) {
  let files = [];
  if (root) {
    const resolvedRoot = app.vault.getFolderByPath(root);
    if (resolvedRoot) {
      files = getFilesInFolder(resolvedRoot);
    } else {
      const allFiles = app.vault.getFiles();
      const pattern = root.toLowerCase();
      files = allFiles.filter((f) => {
        const fileName = f.name.toLowerCase();
        return fileName === pattern || fileName === pattern.replace(/\.md$/, "");
      });
    }
  } else {
    files = app.vault.getFiles();
  }
  files = files.filter((f) => ["md", "canvas", "base"].includes(f.extension));
  if (files.length) {
    const index = Math.floor(Math.random() * files.length);
    return files[index] || null;
  }
  return null;
}
function getFilesInFolder(folder) {
  let files = [];
  for (const item of folder.children) {
    if (item instanceof import_obsidian7.TFile) {
      files.push(item);
    } else if (item instanceof import_obsidian7.TFolder) {
      files.push(...getFilesInFolder(item));
    }
  }
  return files;
}
function trimFile(file) {
  if (!file) return "";
  return file.extension === "md" ? file.path.slice(0, -3) : file.path;
}
var PERIODIC_INFO = {
  ["Daily Note" /* DailyNote */]: {
    noun: "day",
    adjective: "daily",
    create: import_obsidian_daily_notes_interface.createDailyNote,
    get: import_obsidian_daily_notes_interface.getDailyNote,
    getAll: import_obsidian_daily_notes_interface.getAllDailyNotes
  },
  ["Weekly Note" /* WeeklyNote */]: {
    noun: "week",
    adjective: "weekly",
    create: import_obsidian_daily_notes_interface.createWeeklyNote,
    get: import_obsidian_daily_notes_interface.getWeeklyNote,
    getAll: import_obsidian_daily_notes_interface.getAllWeeklyNotes
  },
  ["Monthly Note" /* MonthlyNote */]: {
    noun: "month",
    adjective: "monthly",
    create: import_obsidian_daily_notes_interface.createMonthlyNote,
    get: import_obsidian_daily_notes_interface.getMonthlyNote,
    getAll: import_obsidian_daily_notes_interface.getAllMonthlyNotes
  },
  ["Yearly Note" /* YearlyNote */]: {
    noun: "year",
    adjective: "yearly",
    create: import_obsidian_daily_notes_interface.createYearlyNote,
    get: import_obsidian_daily_notes_interface.getYearlyNote,
    getAll: import_obsidian_daily_notes_interface.getAllYearlyNotes
  },
  ["File" /* File */]: null,
  ["Random file" /* Random */]: null,
  ["Random in folder" /* RandomFolder */]: null,
  ["Workspace" /* Workspace */]: null,
  ["Graph view" /* Graph */]: null,
  ["Nothing" /* None */]: null,
  ["Journal" /* Journal */]: null
};
async function getPeriodicNote(kind, plugin) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i;
  if (!window.moment) {
    return null;
  }
  const info = PERIODIC_INFO[kind];
  if (!info) {
    return null;
  }
  const date = window.moment().startOf(info.noun);
  if (kind === "Daily Note" /* DailyNote */ && ((_c = (_b = (_a = plugin.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["daily-notes"]) == null ? void 0 : _c.enabled)) {
    const dailyNotes = plugin.app.internalPlugins.plugins["daily-notes"].instance;
    if (dailyNotes == null ? void 0 : dailyNotes.getDailyNotePath) {
      const today = window.moment();
      const path = dailyNotes.getDailyNotePath(today);
      if (path) {
        return path.replace(/\.md$/, "");
      }
    }
  }
  const periodicNotesPlugin = (_e = (_d = plugin.app.plugins) == null ? void 0 : _d.plugins) == null ? void 0 : _e["periodic-notes"];
  if (!periodicNotesPlugin) {
    return null;
  }
  try {
    const isLegacy = (((_f = periodicNotesPlugin.manifest) == null ? void 0 : _f.version) || "0").startsWith("0");
    let note = null;
    if (isLegacy) {
      const all = info.getAll();
      if (!Object.keys(all).length) {
        note = await info.create(date);
      } else {
        note = info.get(date, all) || await info.create(date);
      }
      if (!note) {
        note = info.get(date, all);
      }
    } else {
      if ((_g = periodicNotesPlugin.cache) == null ? void 0 : _g.initialize) {
        periodicNotesPlugin.cache.initialize();
      }
      note = ((_h = periodicNotesPlugin.getPeriodicNote) == null ? void 0 : _h.call(periodicNotesPlugin, info.noun, date)) || await ((_i = periodicNotesPlugin.createPeriodicNote) == null ? void 0 : _i.call(periodicNotesPlugin, info.noun, date)) || null;
    }
    if (note) {
      return trimFile(note);
    }
    return null;
  } catch (e) {
    return null;
  }
}
async function getJournalNote(journalName, plugin) {
  var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k;
  const journals = (_b = (_a = plugin.app.plugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["journals"];
  if (!journals) return null;
  try {
    const journal = (_c = journals.journals) == null ? void 0 : _c.find((j) => j.name === journalName);
    if (!journal) return null;
    (_d = journals.reprocessNotes) == null ? void 0 : _d.call(journals);
    const origAutoCreate = (_f = (_e = journal.config) == null ? void 0 : _e.value) == null ? void 0 : _f.autoCreate;
    if ((_g = journal.config) == null ? void 0 : _g.value) {
      journal.config.value.autoCreate = true;
    }
    await ((_h = journal.autoCreate) == null ? void 0 : _h.call(journal));
    if ((_i = journal.config) == null ? void 0 : _i.value) {
      journal.config.value.autoCreate = origAutoCreate;
    }
    if (!window.moment) return null;
    const today = window.moment().locale("custom-journal-locale").startOf("day");
    const note = (_j = journal.get) == null ? void 0 : _j.call(journal, today);
    if (!note) return null;
    const path = (_k = journal.getNotePath) == null ? void 0 : _k.call(journal, note);
    return path ? path.replace(/\.md$/, "") : null;
  } catch (e) {
    return null;
  }
}
async function computeHomeBasePath(type, value, plugin) {
  switch (type) {
    case "File" /* File */:
      return value || null;
    case "Random file" /* Random */: {
      const file = randomFile(plugin.app);
      return file ? trimFile(file) : null;
    }
    case "Random in folder" /* RandomFolder */: {
      const file = randomFile(plugin.app, value);
      return file ? trimFile(file) : null;
    }
    case "Daily Note" /* DailyNote */:
    case "Weekly Note" /* WeeklyNote */:
    case "Monthly Note" /* MonthlyNote */:
    case "Yearly Note" /* YearlyNote */:
      return await getPeriodicNote(type, plugin);
    case "Journal" /* Journal */:
      return await getJournalNote(value, plugin);
    case "Workspace" /* Workspace */:
    case "Graph view" /* Graph */:
    case "Nothing" /* None */:
      return null;
    default:
      return value || null;
  }
}

// src/services/home-service.ts
var LEAF_TYPES = ["markdown", "canvas", "bases"];
function equalsCaseless(path1, path2) {
  const normalize = (p) => p.toLowerCase().replace(/\.md$/, "");
  return normalize(path1) === normalize(path2);
}
var HomeBaseService = class {
  constructor(plugin) {
    this.plugin = plugin;
    this.app = plugin.app;
  }
  /**
   * Open home base with a specific mode (for startup/manual opens)
   */
  async openHomeBaseWithMode(mode, runCommand = true) {
    var _a;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (homeBaseSettings.type === "Workspace" /* Workspace */) {
      return this.openWorkspace(homeBaseSettings.value);
    }
    if (homeBaseSettings.type === "Graph view" /* Graph */) {
      return this.openGraph();
    }
    if (homeBaseSettings.type === "Nothing" /* None */) {
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    const resolvedPath = await computeHomeBasePath(
      homeBaseSettings.type,
      homeBaseSettings.value,
      this.plugin
    );
    if (!resolvedPath) {
      return false;
    }
    let file = this.app.metadataCache.getFirstLinkpathDest(resolvedPath, "/");
    if (!file) {
      file = getFileByPath(this.app, resolvedPath);
    }
    if (!file) {
      const untrimmedPath = resolvedPath.endsWith(".md") ? resolvedPath : `${resolvedPath}.md`;
      file = getFileByPath(this.app, untrimmedPath);
      if (!file && homeBaseSettings.type === "File" /* File */) {
        return false;
      }
    }
    if (!file) {
      return false;
    }
    if (mode === "replace-all") {
      await this.detachAllLeaves();
    } else if (mode === "replace-last") {
      const activeLeaf = (_a = this.app.workspace.getActiveViewOfType(import_obsidian8.View)) == null ? void 0 : _a.leaf;
      if (activeLeaf) {
        const viewState = activeLeaf.getViewState();
        if (viewState.pinned !== true) {
          void activeLeaf.detach();
          await new Promise((resolve) => setTimeout(resolve, 100));
        }
      }
    }
    const existingLeaf = this.findExistingHomeBaseLeaf(file);
    if (existingLeaf && mode !== "replace-all") {
      const viewState = existingLeaf.getViewState();
      if (viewState.pinned === true && this.plugin.settings.showStickyHomeIcon) {
      } else {
        this.app.workspace.setActiveLeaf(existingLeaf);
        await this.configureView(existingLeaf, file);
        if (runCommand) {
          this.runCommandOnOpen();
        }
        return true;
      }
    }
    const newLeaf = mode === "retain" ? this.app.workspace.getLeaf("tab") : this.app.workspace.getLeaf(false);
    if (!newLeaf) {
      return false;
    }
    await newLeaf.openFile(file);
    this.app.workspace.setActiveLeaf(newLeaf);
    await this.configureView(newLeaf, file);
    if (runCommand) {
      this.runCommandOnOpen();
    }
    return true;
  }
  /**
   * Open workspace
   */
  async openWorkspace(workspaceName) {
    var _a, _b, _c;
    const workspacePlugin = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b.workspaces;
    if (!(workspacePlugin == null ? void 0 : workspacePlugin.enabled) || !((_c = workspacePlugin.instance) == null ? void 0 : _c.loadWorkspace)) {
      return false;
    }
    workspacePlugin.instance.loadWorkspace(workspaceName);
    await new Promise((resolve) => setTimeout(resolve, 100));
    return true;
  }
  /**
   * Open graph view
   */
  async openGraph() {
    var _a, _b;
    await ((_b = (_a = this.app.commands) == null ? void 0 : _a.executeCommandById) == null ? void 0 : _b.call(_a, "graph:open"));
    return true;
  }
  /**
   * Open graph view in ghost tab
   * DEPRECATED: Graph view ghost tab detection is unreliable, so this is no longer used
   * Graph views now just open normally like random files
   */
  async openGraphInGhostTab(runCommand) {
    if (this.isSettingsModalOpen()) {
      return false;
    }
    let graphLeaves = this.app.workspace.getLeavesOfType("graph");
    if (graphLeaves.length === 0) {
      graphLeaves = [];
      this.app.workspace.iterateAllLeaves((leaf) => {
        try {
          const viewState = leaf.getViewState();
          if (viewState.type === "graph") {
            graphLeaves.push(leaf);
          }
        } catch (e) {
        }
      });
    }
    let ghostTab = null;
    if (graphLeaves.length === 1) {
      ghostTab = graphLeaves[0] || null;
    } else if (graphLeaves.length > 1) {
      for (const leaf of graphLeaves) {
        if (!leaf) continue;
        try {
          const viewState = leaf.getViewState();
          if (viewState.pinned === true) {
            ghostTab = leaf;
            break;
          }
        } catch (e) {
          continue;
        }
      }
      if (!ghostTab && graphLeaves[0]) {
        ghostTab = graphLeaves[0] || null;
      }
    }
    if (ghostTab) {
      const allGraphLeavesForCleanup = [];
      this.app.workspace.iterateAllLeaves((leaf) => {
        const viewState = leaf.getViewState();
        if (viewState.type === "graph") {
          allGraphLeavesForCleanup.push(leaf);
        }
      });
      const otherGraphLeaves = allGraphLeavesForCleanup.filter((leaf) => leaf !== ghostTab);
      for (const leaf of otherGraphLeaves) {
        void leaf.detach();
      }
      await new Promise((resolve) => setTimeout(resolve, 150));
      const remainingGraphLeaves = [];
      this.app.workspace.iterateAllLeaves((leaf) => {
        const viewState = leaf.getViewState();
        if (viewState.type === "graph") {
          remainingGraphLeaves.push(leaf);
        }
      });
      if (remainingGraphLeaves.length > 1) {
        for (const leaf of remainingGraphLeaves) {
          if (leaf !== ghostTab) {
            void leaf.detach();
          }
        }
        await new Promise((resolve) => setTimeout(resolve, 100));
      }
      const shouldFocus = !this.isSettingsModalOpen();
      this.app.workspace.setActiveLeaf(ghostTab, { focus: shouldFocus });
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    const allExistingGraphLeaves = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      const viewState = leaf.getViewState();
      if (viewState.type === "graph") {
        allExistingGraphLeaves.push(leaf);
      }
    });
    for (const leaf of allExistingGraphLeaves) {
      void leaf.detach();
    }
    await new Promise((resolve) => setTimeout(resolve, 100));
    let existingGraphLeaves = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      const viewState = leaf.getViewState();
      if (viewState.type === "graph") {
        existingGraphLeaves.push(leaf);
      }
    });
    let newGhostTab = null;
    if (existingGraphLeaves.length > 0) {
      newGhostTab = existingGraphLeaves[0] || null;
    } else {
      const newLeaf = this.app.workspace.getLeaf("tab");
      if (newLeaf) {
        await newLeaf.setViewState({
          type: "graph",
          state: {}
        });
        await new Promise((resolve) => setTimeout(resolve, 200));
        newGhostTab = newLeaf;
      } else {
        await this.openGraph();
        await new Promise((resolve) => setTimeout(resolve, 300));
        existingGraphLeaves = [];
        this.app.workspace.iterateAllLeaves((leaf) => {
          const viewState = leaf.getViewState();
          if (viewState.type === "graph") {
            existingGraphLeaves.push(leaf);
          }
        });
        if (existingGraphLeaves.length > 0) {
          newGhostTab = existingGraphLeaves[0] || null;
        }
      }
    }
    if (newGhostTab) {
      newGhostTab.setPinned(true);
      const allGraphLeaves = [];
      this.app.workspace.iterateAllLeaves((leaf) => {
        const viewState = leaf.getViewState();
        if (viewState.type === "graph") {
          allGraphLeaves.push(leaf);
        }
      });
      for (const leaf of allGraphLeaves) {
        if (leaf !== newGhostTab) {
          void leaf.detach();
        }
      }
      await new Promise((resolve) => setTimeout(resolve, 100));
      const shouldFocus = !this.isSettingsModalOpen();
      this.app.workspace.setActiveLeaf(newGhostTab, { focus: shouldFocus });
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    return false;
  }
  /**
   * Open the home base file
   * @param options Options for opening
   */
  async openHomeBase(options = {}) {
    const { runCommand = true } = options;
    const mode = this.plugin.settings.manualOpenMode;
    return this.openHomeBaseWithMode(mode, runCommand);
  }
  /**
   * Open home base in an empty leaf (for new tab replacement)
   */
  async openInLeaf(leaf) {
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    return this.openInLeafWithSettings(leaf, homeBaseSettings);
  }
  /**
   * Open a file in an empty leaf with custom settings
   * @param leaf The leaf to open the file in
   * @param settings Settings object with type and value
   * @param isNewTab Whether this is for new tab replacement (skips pinning/ghost tab logic)
   */
  async openInLeafWithSettings(leaf, settings, isNewTab = false) {
    if (settings.type === "Workspace" /* Workspace */) {
      await this.openWorkspace(settings.value);
      return true;
    }
    if (settings.type === "Graph view" /* Graph */) {
      await this.openGraph();
      return true;
    }
    if (settings.type === "Nothing" /* None */) {
      this.runCommandOnOpen();
      return true;
    }
    const resolvedPath = await computeHomeBasePath(
      settings.type,
      settings.value,
      this.plugin
    );
    if (!resolvedPath) {
      console.warn("[Home Base] Could not resolve path for new tab:", settings.type, settings.value);
      return false;
    }
    let file = this.app.metadataCache.getFirstLinkpathDest(resolvedPath, "/");
    if (!file) {
      file = getFileByPath(this.app, resolvedPath);
    }
    if (!file && !resolvedPath.endsWith(".md") && !resolvedPath.endsWith(".canvas") && !resolvedPath.endsWith(".base")) {
      const untrimmedPath = `${resolvedPath}.md`;
      file = getFileByPath(this.app, untrimmedPath);
    }
    if (!file) {
      console.warn("[Home Base] File not found for new tab:", resolvedPath);
      return false;
    }
    if (isNewTab) {
      console.debug("[Home Base] openInLeafWithSettings: isNewTab=true, bypassing ghost tab logic", {
        file: file.path,
        settings
      });
      await leaf.openFile(file);
      await this.configureView(leaf, file);
      this.runCommandOnOpen();
      return true;
    }
    const isTrulyEmpty = !leaf.view || leaf.view.getViewType() === "empty";
    if (this.plugin.settings.showStickyHomeIcon && isTrulyEmpty) {
      const isRandom = settings.type === "Random file" /* Random */ || settings.type === "Random in folder" /* RandomFolder */ || settings.type === "Daily Note" /* DailyNote */ || settings.type === "Weekly Note" /* WeeklyNote */ || settings.type === "Monthly Note" /* MonthlyNote */ || settings.type === "Yearly Note" /* YearlyNote */;
      const ghostTab = this.findGhostTab(file, isRandom);
      if (ghostTab) {
        void leaf.detach();
        this.app.workspace.setActiveLeaf(ghostTab);
        await this.configureView(ghostTab, file);
        this.runCommandOnOpen();
        return true;
      }
      if (!isRandom) {
        leaf.setPinned(true);
      }
    }
    await leaf.openFile(file);
    await this.configureView(leaf, file);
    this.runCommandOnOpen();
    return true;
  }
  /**
   * Configure the view mode for a leaf
   */
  async configureView(leaf, file) {
    const settings = this.plugin.settings;
    const view = leaf.view;
    if (!isMarkdownLike(file) || !(view instanceof import_obsidian8.MarkdownView)) {
      return;
    }
    const state = view.getState();
    if (settings.revertView) {
      this.lastView = new WeakRef(view);
    }
    if (settings.autoScroll) {
      const count = view.editor.lineCount();
      if (state.mode === "preview") {
        view.previewMode.applyScroll(count - 4);
      } else {
        view.editor.setCursor(count);
        view.editor.focus();
      }
    }
    if (settings.openViewMode !== "default") {
      switch (settings.openViewMode) {
        case "preview":
          state.mode = "preview";
          break;
        case "source":
          state.mode = "source";
          state.source = true;
          break;
        case "live":
          state.mode = "source";
          state.source = false;
          break;
      }
      await leaf.setViewState({
        type: "markdown",
        state
      });
    }
  }
  /**
   * Revert view to default when navigating away from home base
   */
  async revertView() {
    const settings = this.plugin.settings;
    if (!settings.revertView || !this.lastView || settings.openViewMode === "default") {
      return;
    }
    const view = this.lastView.deref();
    if (!view) {
      this.lastView = void 0;
      return;
    }
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    const resolvedPath = await computeHomeBasePath(
      homeBaseSettings.type,
      homeBaseSettings.value,
      this.plugin
    );
    if (!resolvedPath) {
      this.lastView = void 0;
      return;
    }
    const currentFile = view.file;
    if (currentFile && equalsCaseless(trimFile(currentFile), resolvedPath)) {
      return;
    }
    const state = view.getState();
    const config = this.app.vault.config;
    const mode = (config == null ? void 0 : config.defaultViewMode) || "source";
    const source = (config == null ? void 0 : config.livePreview) !== void 0 ? !config.livePreview : false;
    if (view.leaf.getViewState().type === "markdown" && (mode !== state.mode || source !== state.source)) {
      state.mode = mode;
      state.source = source;
      await view.leaf.setViewState({ type: "markdown", state, active: true });
    }
    this.lastView = void 0;
  }
  /**
   * Run the configured command after opening
   */
  runCommandOnOpen() {
    const commandId = this.plugin.settings.commandOnOpen;
    if (commandId) {
      setTimeout(() => {
        executeCommand(this.app, commandId);
      }, 100);
    }
  }
  /**
   * Find an existing leaf that has the home base file open
   */
  findExistingHomeBaseLeaf(file) {
    if (!file) return null;
    const homeBasePath = file.path;
    const leaves = LEAF_TYPES.flatMap(
      (type) => this.app.workspace.getLeavesOfType(type)
    );
    for (const leaf of leaves) {
      if (leafHasFile(leaf, homeBasePath)) {
        return leaf;
      }
    }
    return null;
  }
  /**
   * Find the ghost tab (the one opened via sticky icon)
   * Ghost tab is identified by being pinned and having the home base file
   * Only searches in the current window (getLeavesOfType is window-scoped)
   * 
   * Note: If the ghost tab is moved to another window, this will return null,
   * and a new ghost tab will be created in the current window when needed.
   * This is the desired behavior - each window can have its own ghost tab.
   * 
   * For random types, we don't look for pinned tabs (they're not pinned).
   */
  findGhostTab(file, isRandom = false) {
    var _a;
    if (!file) {
      console.debug("[Home Base] findGhostTab: No file provided");
      return null;
    }
    const homeBasePath = file.path;
    const leaves = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      var _a2;
      const viewType = (_a2 = leaf.view) == null ? void 0 : _a2.getViewType();
      if (viewType && LEAF_TYPES.includes(viewType)) {
        leaves.push(leaf);
      }
    });
    console.debug("[Home Base] findGhostTab:", {
      homeBasePath,
      totalLeaves: leaves.length,
      isRandom
    });
    for (const leaf of leaves) {
      if (leafHasFile(leaf, homeBasePath)) {
        const viewState = leaf.getViewState();
        const isPinned = viewState.pinned === true;
        if (isRandom || isPinned) {
          console.debug("[Home Base] findGhostTab: Found ghost tab:", {
            leaf,
            isPinned,
            isRandom,
            viewType: (_a = leaf.view) == null ? void 0 : _a.getViewType()
          });
          return leaf;
        } else {
          console.debug("[Home Base] findGhostTab: Found home base tab but not pinned:", {
            isPinned,
            viewState
          });
        }
      }
    }
    console.debug("[Home Base] findGhostTab: No ghost tab found");
    return null;
  }
  /**
   * Open home base in ghost tab (for sticky icon)
   * Ghost tab is pinned and hidden (if setting enabled)
   * Only one ghost tab should exist at a time
   * Works for file-based types and Graph view
   * Note: Random types don't pin (since file changes each time)
   * Note: Workspace and None don't work (workspace changes layout, None doesn't open anything)
   */
  async openHomeBaseInGhostTab(options = {}) {
    const { runCommand = true } = options;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (homeBaseSettings.type === "Workspace" /* Workspace */ || homeBaseSettings.type === "Nothing" /* None */) {
      return this.openHomeBaseWithMode("retain", runCommand);
    }
    if (homeBaseSettings.type === "Graph view" /* Graph */) {
      return this.openGraph();
    }
    const isRandom = homeBaseSettings.type === "Random file" /* Random */ || homeBaseSettings.type === "Random in folder" /* RandomFolder */ || homeBaseSettings.type === "Daily Note" /* DailyNote */ || homeBaseSettings.type === "Weekly Note" /* WeeklyNote */ || homeBaseSettings.type === "Monthly Note" /* MonthlyNote */ || homeBaseSettings.type === "Yearly Note" /* YearlyNote */;
    if (this.isSettingsModalOpen()) {
      return false;
    }
    const resolvedPath = await computeHomeBasePath(
      homeBaseSettings.type,
      homeBaseSettings.value,
      this.plugin
    );
    if (!resolvedPath) {
      return false;
    }
    let file = this.app.metadataCache.getFirstLinkpathDest(resolvedPath, "/");
    if (!file) {
      file = getFileByPath(this.app, resolvedPath);
    }
    if (!file && !resolvedPath.endsWith(".md") && !resolvedPath.endsWith(".canvas") && !resolvedPath.endsWith(".base")) {
      const untrimmedPath = `${resolvedPath}.md`;
      file = getFileByPath(this.app, untrimmedPath);
    }
    if (!file) {
      return false;
    }
    const ghostTab = this.findGhostTab(file, isRandom);
    console.debug("[Home Base] openHomeBaseInGhostTab:", {
      file: file.path,
      ghostTabFound: !!ghostTab,
      isRandom,
      zenMode: document.body.classList.contains("zenmode-active")
    });
    if (ghostTab) {
      const shouldFocus2 = !this.isSettingsModalOpen();
      this.app.workspace.setActiveLeaf(ghostTab, { focus: shouldFocus2 });
      await this.configureView(ghostTab, file);
      if (runCommand) {
        this.runCommandOnOpen();
      }
      return true;
    }
    const newGhostTab = this.app.workspace.getLeaf("tab");
    await newGhostTab.openFile(file);
    if (!isRandom) {
      newGhostTab.setPinned(true);
    }
    setTimeout(() => {
      this.plugin.stickyTabService.updateTabHeaders();
    }, 50);
    const shouldFocus = !this.isSettingsModalOpen();
    this.app.workspace.setActiveLeaf(newGhostTab, { focus: shouldFocus });
    await this.configureView(newGhostTab, file);
    if (runCommand) {
      this.runCommandOnOpen();
    }
    return true;
  }
  /**
   * Find an empty leaf
   */
  findEmptyLeaf() {
    const leaves = this.app.workspace.getLeavesOfType("empty");
    return leaves[0] || null;
  }
  /**
   * Get the home base file
   */
  getHomeBaseFile() {
    const settings = this.plugin.settings;
    if (!settings.homeBasePath) {
      return null;
    }
    return getFileByPath(this.app, settings.homeBasePath);
  }
  /**
   * Fast detach all leaves using changeLayout (like homepage plugin)
   * This is much faster than iterating and detaching leaves individually
   */
  async detachAllLeaves() {
    var _a, _b;
    const layout = this.app.workspace.getLayout();
    layout.main = {
      "id": "5324373015726ba8",
      "type": "split",
      "children": [{
        "id": "4509724f8bf84da7",
        "type": "tabs",
        "children": [{
          "id": "e7a7b303c61786dc",
          "type": "leaf",
          "state": { "type": "empty", "state": {}, "icon": "lucide-file", "title": "New tab" }
        }]
      }],
      "direction": "vertical"
    };
    layout.active = "e7a7b303c61786dc";
    await this.app.workspace.changeLayout(layout);
    if (import_obsidian8.Platform.isMobile) {
      (_b = (_a = this.app.workspace.rightSplit) == null ? void 0 : _a.updateInfo) == null ? void 0 : _b.call(_a);
    }
  }
  /**
   * Close all leaves in the main workspace except the specified one
   * Simplified approach: iterate all leaves and close those in main workspace
   */
  async closeAllLeavesExcept(exceptLeaf) {
    const leavesToClose = [];
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (leaf === exceptLeaf) {
        return;
      }
      const view = leaf.view;
      let container = null;
      if (view) {
        const viewAny = view;
        container = viewAny.containerEl || null;
      }
      if (!container) {
        const leafAny = leaf;
        container = leafAny.containerEl || null;
      }
      if (container) {
        const rootWorkspace = container.closest(".workspace-split.mod-vertical.mod-root");
        const leftSidebar = container.closest(".workspace-split.mod-left-split");
        const rightSidebar = container.closest(".workspace-split.mod-right-split");
        if (rootWorkspace && !leftSidebar && !rightSidebar) {
          leavesToClose.push(leaf);
        }
      } else {
        if (exceptLeaf === null) {
          try {
            const viewState = leaf.getViewState();
            if (viewState) {
              leavesToClose.push(leaf);
            }
          } catch (e) {
          }
        }
      }
    });
    for (const leaf of leavesToClose) {
      void leaf.detach();
    }
    await new Promise((resolve) => setTimeout(resolve, 200));
  }
  /**
   * Check if the focused tab is the home base
   */
  isFocusedOnHomeBase() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) return false;
    const homeBasePath = this.plugin.settings.homeBasePath;
    if (!homeBasePath) return false;
    const homeBaseFile = getFileByPath(this.app, homeBasePath);
    if (!homeBaseFile) return false;
    return activeFile.path === homeBaseFile.path;
  }
  /**
   * Check if home base file exists
   */
  homeBaseExists() {
    const path = this.plugin.settings.homeBasePath;
    if (!path) return false;
    return getFileByPath(this.app, path) !== null;
  }
  /**
   * Check if the settings modal is currently open
   */
  isSettingsModalOpen() {
    const settingsModal = document.querySelector(".modal-container.mod-settings") || document.querySelector(".modal.mod-settings") || document.querySelector(".vertical-tab-content");
    if (!settingsModal) {
      const allModals = document.querySelectorAll(".modal-container");
      for (const modal of Array.from(allModals)) {
        if (modal.querySelector(".vertical-tab-content") || modal.querySelector(".settings-content") || modal.classList.contains("mod-settings")) {
          return true;
        }
      }
    }
    return settingsModal !== null;
  }
  /**
   * Set the active file as home base
   */
  async setActiveFileAsHomeBase() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) return false;
    if (!isSupportedExtension(activeFile.extension.toLowerCase())) {
      return false;
    }
    this.plugin.settings.homeBasePath = activeFile.path;
    await this.plugin.saveSettings();
    return true;
  }
  /**
   * Check if active file can be set as home base
   */
  canSetActiveFileAsHomeBase() {
    const activeFile = this.app.workspace.getActiveFile();
    if (!activeFile) return false;
    return isSupportedExtension(activeFile.extension.toLowerCase());
  }
};

// src/services/new-tab-service.ts
var import_obsidian9 = require("obsidian");
var NewTabService = class {
  constructor(plugin) {
    this.existingLeaves = /* @__PURE__ */ new WeakSet();
    this.isStartup = true;
    this.startupCompleted = false;
    this.plugin = plugin;
    this.app = plugin.app;
  }
  /**
   * Track all existing leaves (for new tab detection)
   * This must be called even when startup is handled elsewhere
   */
  trackExistingLeaves() {
    this.app.workspace.iterateAllLeaves((leaf) => {
      this.existingLeaves.add(leaf);
    });
    this.startupCompleted = true;
    this.isStartup = false;
  }
  /**
   * Initialize the service - called when layout is ready
   */
  initialize() {
    this.trackExistingLeaves();
    void this.handleStartup();
  }
  /**
   * Handle app startup - open home base if needed
   * Only called on actual app startup, not plugin reloads
   */
  async handleStartup() {
    const settings = this.plugin.settings;
    const homeBaseSettings = this.plugin.getHomeBaseSettings();
    if (!settings.openOnStartup || !homeBaseSettings.value && homeBaseSettings.type === "File" /* File */) {
      this.startupCompleted = true;
      this.isStartup = false;
      return;
    }
    if (await this.hasUrlParams()) {
      this.startupCompleted = true;
      this.isStartup = false;
      return;
    }
    await new Promise((resolve) => setTimeout(resolve, 500));
    if (!settings.keepExistingTabs) {
      let exceptLeaf = null;
      if (!settings.hideReleaseNotes) {
        const allLeaves = this.app.workspace.getLeavesOfType("markdown");
        for (const leaf of allLeaves) {
          const view = leaf.view;
          const markdownView = view;
          if (markdownView.file) {
            const file = markdownView.file;
            const configDir = this.app.vault.configDir;
            if (file.path.includes("release") || file.path.includes(configDir)) {
              const container = markdownView.containerEl;
              if (container && container.querySelector(".release-notes")) {
                exceptLeaf = leaf;
                break;
              }
            }
          }
        }
      }
      await this.plugin.homeService.closeAllLeavesExcept(exceptLeaf);
      await new Promise((resolve) => setTimeout(resolve, 200));
    }
    if (settings.showStickyHomeIcon) {
      await this.plugin.homeService.openHomeBaseInGhostTab({
        runCommand: true
      });
    } else {
      await this.plugin.homeService.openHomeBase({
        replaceActiveLeaf: false,
        runCommand: true
      });
    }
    this.startupCompleted = true;
    this.isStartup = false;
  }
  /**
   * Check if the settings modal is currently open
   */
  isSettingsModalOpen() {
    const settingsModal = document.querySelector(".modal-container.mod-settings") || document.querySelector(".modal.mod-settings") || document.querySelector(".vertical-tab-content");
    if (!settingsModal) {
      const allModals = document.querySelectorAll(".modal-container");
      for (const modal of Array.from(allModals)) {
        if (modal.querySelector(".vertical-tab-content") || modal.querySelector(".settings-content") || modal.classList.contains("mod-settings")) {
          return true;
        }
      }
    }
    return settingsModal !== null;
  }
  /**
   * Check for URL parameters that indicate Obsidian was opened via a link
   * Based on obsidian-homepage implementation
   */
  async hasUrlParams() {
    var _a;
    const windowAny = window;
    const capacitor = windowAny.Capacitor;
    if ((_a = capacitor == null ? void 0 : capacitor.Plugins) == null ? void 0 : _a.App) {
      try {
        const launchUrl = await capacitor.Plugins.App.getLaunchUrl();
        if (launchUrl == null ? void 0 : launchUrl.url) {
          const url = new URL(launchUrl.url);
          const params = Array.from(url.searchParams.keys());
          const action = url.hostname;
          if (["open", "advanced-uri"].includes(action) && ["file", "filepath", "workspace"].some((e) => params.includes(e))) {
            return true;
          }
        }
      } catch (e) {
      }
    }
    const obsAct = windowAny.OBS_ACT;
    if (obsAct) {
      const params = Object.keys(obsAct);
      const action = obsAct.action;
      if (action && ["open", "advanced-uri"].includes(action) && ["file", "filepath", "workspace"].some((e) => params.includes(e))) {
        return true;
      }
    }
    return false;
  }
  /**
   * Handle layout change event - check for new empty tabs
   * Based on new-tab-default-page implementation
   */
  handleLayoutChange() {
    if (this.isStartup || !this.startupCompleted) {
      return;
    }
    this.app.workspace.iterateAllLeaves((leaf) => {
      if (this.existingLeaves.has(leaf)) {
        return;
      }
      this.existingLeaves.add(leaf);
      if (!this.isEmptyTab(leaf)) {
        return;
      }
      const isOnlyTab = this.isOnlyTab(leaf);
      if (isOnlyTab && this.plugin.settings.openWhenAllTabsClosed === true) {
        void this.replaceEmptyTab(leaf, true);
        return;
      }
      if (this.plugin.settings.replaceNewTab !== true) {
        return;
      }
      if (this.plugin.settings.replaceNewTab !== true) {
        return;
      }
      if (this.plugin.settings.newTabMode === "only-when-empty") {
        if (!isOnlyTab) {
          return;
        }
      }
      void this.replaceEmptyTab(leaf, false);
    });
  }
  /**
   * Check if a leaf is an empty tab
   * IMPORTANT: Only returns true if the leaf is truly empty (no file opened)
   * If a file is already opened in the leaf, it's not empty and should NOT be replaced
   */
  isEmptyTab(leaf) {
    if (!leaf.view) return true;
    if (leaf.view.getViewType() !== "empty") {
      return false;
    }
    const viewState = leaf.getViewState();
    if (viewState && viewState.file) {
      return false;
    }
    return true;
  }
  /**
   * Check if this is the only tab in the main workspace
   * Only counts root leaves (main workspace tabs), not sidebar tabs
   * Based on obsidian-disable-tabs pattern using iterateRootLeaves
   */
  isOnlyTab(leaf) {
    let tabCount = 0;
    this.app.workspace.iterateRootLeaves((l) => {
      tabCount++;
    });
    const result = tabCount === 1;
    console.debug("[Home Base] isOnlyTab:", {
      leaf,
      tabCount,
      isOnlyTab: result
    });
    return result;
  }
  /**
   * Replace an empty tab with the home base or new tab file
   * @param leaf The leaf to replace
   * @param isAllTabsClosed Whether this is triggered by "all tabs closed" (true) or "new tab replacement" (false)
   */
  async replaceEmptyTab(leaf, isAllTabsClosed = false) {
    if (!isAllTabsClosed) {
      if (this.plugin.settings.replaceNewTab !== true) {
        console.debug("[Home Base] replaceEmptyTab: replaceNewTab is not true, aborting");
        return;
      }
    }
    await new Promise((resolve) => setTimeout(resolve, 50));
    if (!isAllTabsClosed) {
      if (this.plugin.settings.replaceNewTab !== true) {
        console.debug("[Home Base] replaceEmptyTab: replaceNewTab changed during delay, aborting");
        return;
      }
    } else {
      if (this.plugin.settings.openWhenAllTabsClosed !== true) {
        console.debug("[Home Base] replaceEmptyTab: openWhenAllTabsClosed changed during delay, aborting");
        return;
      }
    }
    if (!this.isEmptyTab(leaf)) {
      console.debug("[Home Base] replaceEmptyTab: Tab is no longer empty, skipping");
      return;
    }
    const settings = isAllTabsClosed ? this.plugin.getHomeBaseSettings() : this.plugin.getNewTabSettings();
    console.debug("[Home Base] replaceEmptyTab:", {
      leaf,
      isAllTabsClosed,
      settings,
      replaceNewTab: this.plugin.settings.replaceNewTab,
      newTabMode: this.plugin.settings.newTabMode,
      useDifferentFileForNewTab: this.plugin.settings.useDifferentFileForNewTab
    });
    const success = await this.plugin.homeService.openInLeafWithSettings(leaf, settings, true);
    if (!success) {
      console.warn("[Home Base] Failed to open file:", settings);
    } else {
      console.debug("[Home Base] replaceEmptyTab: Successfully opened file");
    }
  }
  /**
   * Force check for empty workspace and open home base
   */
  async openIfEmpty() {
    const activeView = this.app.workspace.getActiveViewOfType(import_obsidian9.View);
    const activeLeaf = activeView == null ? void 0 : activeView.leaf;
    if (!activeLeaf) return;
    if (this.isEmptyTab(activeLeaf) && this.isOnlyTab(activeLeaf)) {
      await this.plugin.homeService.openInLeaf(activeLeaf);
    }
  }
};

// src/services/sticky-tab-service.ts
var import_obsidian10 = require("obsidian");
init_file_utils();
var STICKY_ICON_CLASS = "home-base-sticky-icon";
var STICKY_ICON_ACTIVE_CLASS = "home-base-sticky-icon-active";
var StickyTabService = class {
  constructor(plugin) {
    this.stickyIconEl = null;
    this.layoutChangeHandler = null;
    this.tabHeaderUpdateTimeout = null;
    this.sidebarObserver = null;
    this.tabHeaderObserver = null;
    this.plugin = plugin;
  }
  /**
   * Update the sticky tab icon based on settings
   */
  update() {
    if (import_obsidian10.Platform.isMobile) {
      this.remove();
      this.updateTabHeaders();
      this.updateWorkspaceClass(false);
      return;
    }
    if (this.plugin.settings.showStickyHomeIcon) {
      if (this.stickyIconEl) {
        const iconName = this.plugin.settings.stickyIconName || "home";
        (0, import_obsidian10.setIcon)(this.stickyIconEl, iconName);
      } else {
        this.create();
      }
      this.updateWorkspaceClass(true);
    } else {
      this.remove();
      this.updateTabHeaders();
      this.updateWorkspaceClass(false);
    }
  }
  /**
   * Add/remove CSS class on workspace to conditionally apply styles
   */
  updateWorkspaceClass(enabled) {
    const mainWorkspace = document.querySelector(".workspace-split.mod-vertical.mod-root");
    if (!mainWorkspace) return;
    if (enabled) {
      mainWorkspace.classList.add("home-base-sticky-icon-enabled");
    } else {
      mainWorkspace.classList.remove("home-base-sticky-icon-enabled");
    }
  }
  /**
   * Create the sticky home icon
   */
  create() {
    this.remove();
    this.stickyIconEl = document.createElement("div");
    this.stickyIconEl.className = `${STICKY_ICON_CLASS} clickable-icon`;
    this.stickyIconEl.setAttribute("aria-label", "Open home base");
    this.stickyIconEl.setAttribute("data-tooltip-position", "bottom");
    const iconName = this.plugin.settings.stickyIconName || "home";
    (0, import_obsidian10.setIcon)(this.stickyIconEl, iconName);
    this.stickyIconEl.addEventListener("click", (e) => {
      e.preventDefault();
      e.stopPropagation();
      void this.plugin.homeService.openHomeBaseInGhostTab({
        runCommand: true
      }).then(() => {
        setTimeout(() => {
          this.updateTabHeaders();
        }, 150);
      });
    });
    this.stickyIconEl.addEventListener("contextmenu", (e) => {
      e.preventDefault();
      e.stopPropagation();
      const menu = new import_obsidian10.Menu();
      menu.addItem((item) => {
        item.setTitle("Close home base").setIcon("x").onClick(() => {
          void this.closeHomeBase(true);
        });
      });
      menu.addItem((item) => {
        item.setTitle("Change icon").setIcon("lucide-image-plus").onClick(() => {
          const picker = new IconPicker(
            this.plugin.app,
            this.plugin.settings.stickyIconName,
            (icon) => {
              void (async () => {
                this.plugin.settings.stickyIconName = icon;
                await this.plugin.saveSettings();
                if (this.stickyIconEl) {
                  (0, import_obsidian10.setIcon)(this.stickyIconEl, icon || "home");
                }
              })();
            }
          );
          picker.open();
        });
      });
      menu.showAtMouseEvent(e);
    });
    const ensureIconInPlace = () => {
      if (!this.stickyIconEl) return;
      const mainWorkspace2 = document.querySelector(".workspace-split.mod-vertical.mod-root");
      if (!mainWorkspace2) return;
      const tabHeaderContainerInner = mainWorkspace2.querySelector(".workspace-tab-header-container-inner");
      if (!tabHeaderContainerInner) return;
      const allIcons = tabHeaderContainerInner.querySelectorAll(`.${STICKY_ICON_CLASS}`);
      allIcons.forEach((icon) => {
        if (icon !== this.stickyIconEl) {
          icon.remove();
        }
      });
      if (tabHeaderContainerInner.contains(this.stickyIconEl)) {
        return;
      }
      tabHeaderContainerInner.insertBefore(this.stickyIconEl, tabHeaderContainerInner.firstChild);
      this.updateActiveState();
      this.updateTabHeaders();
      this.updateWorkspaceClass(true);
      this.updateIconPositionForSidebar();
      this.watchSidebarState();
    };
    ensureIconInPlace();
    const checkInterval = setInterval(() => {
      if (!this.stickyIconEl || !this.plugin.settings.showStickyHomeIcon) {
        clearInterval(checkInterval);
        return;
      }
      ensureIconInPlace();
    }, 100);
    this.stickyIconEl._checkInterval = checkInterval;
    if (!this.layoutChangeHandler) {
      this.layoutChangeHandler = () => {
        if (this.stickyIconEl && this.plugin.settings.showStickyHomeIcon) {
          ensureIconInPlace();
          this.updateTabHeaders();
        }
      };
      this.plugin.registerEvent(
        this.plugin.app.workspace.on("layout-change", this.layoutChangeHandler)
      );
    }
    const mainWorkspace = document.querySelector(".workspace-split.mod-vertical.mod-root");
    if (mainWorkspace) {
      const containerObserver = new MutationObserver(() => {
        if (!this.stickyIconEl || !this.plugin.settings.showStickyHomeIcon) return;
        const tabHeaderContainerInner = mainWorkspace.querySelector(".workspace-tab-header-container-inner");
        if (tabHeaderContainerInner) {
          const allIcons = tabHeaderContainerInner.querySelectorAll(`.${STICKY_ICON_CLASS}`);
          allIcons.forEach((icon) => {
            if (icon !== this.stickyIconEl) {
              icon.remove();
            }
          });
          if (!tabHeaderContainerInner.contains(this.stickyIconEl)) {
            tabHeaderContainerInner.insertBefore(this.stickyIconEl, tabHeaderContainerInner.firstChild);
            this.updateActiveState();
          }
        }
      });
      containerObserver.observe(mainWorkspace, {
        childList: true,
        subtree: true
        // Watch subtree to catch tab container recreation
      });
      this.stickyIconEl._containerObserver = containerObserver;
    }
    this.setupTabHeaderObserver();
  }
  /**
   * Set up MutationObserver to watch for tab header changes and remove ghost tabs immediately
   * This prevents the flash when tabs are opened/closed
   */
  setupTabHeaderObserver() {
    if (this.tabHeaderObserver) {
      return;
    }
    const tabContainers = document.querySelectorAll(".workspace-tab-header-container-inner");
    if (tabContainers.length === 0) {
      setTimeout(() => this.setupTabHeaderObserver(), 100);
      return;
    }
    this.tabHeaderObserver = new MutationObserver((mutations) => {
      if (!this.plugin.settings.showStickyHomeIcon || !this.plugin.settings.hideHomeTabHeader) {
        return;
      }
      const homeBasePath = this.plugin.settings.homeBasePath;
      if (!homeBasePath) return;
      let hasNewHeaders = false;
      for (const mutation of mutations) {
        if (mutation.type === "childList" && mutation.addedNodes.length > 0) {
          for (const node of Array.from(mutation.addedNodes)) {
            if (node instanceof HTMLElement && node.classList.contains("workspace-tab-header")) {
              hasNewHeaders = true;
              break;
            }
          }
        }
        if (hasNewHeaders) break;
      }
      if (hasNewHeaders) {
        this.plugin.app.workspace.iterateAllLeaves((leaf) => {
          const isHomeBase = leafHasFile(leaf, homeBasePath);
          if (!isHomeBase) return;
          const viewState = leaf.getViewState();
          const isGhostTab = viewState.pinned === true && isHomeBase;
          if (isGhostTab) {
            const tabHeader = this.getTabHeaderForLeaf(leaf);
            if (tabHeader && tabHeader.parentElement) {
              const parent = tabHeader.parentElement;
              if (parent && parent.classList.contains("workspace-tab-header-container-inner")) {
                const tabHeaderExtended = tabHeader;
                if (parent.contains(tabHeader)) {
                  tabHeaderExtended._homeBaseParent = parent;
                  tabHeaderExtended._homeBaseNextSibling = tabHeader.nextSibling;
                  tabHeader.remove();
                }
              }
            }
          }
        });
      }
    });
    tabContainers.forEach((container) => {
      var _a;
      (_a = this.tabHeaderObserver) == null ? void 0 : _a.observe(container, {
        childList: true,
        subtree: false
      });
    });
    const workspaceObserver = new MutationObserver(() => {
      const newContainers = document.querySelectorAll(".workspace-tab-header-container-inner");
      newContainers.forEach((container) => {
        if (this.tabHeaderObserver) {
          this.tabHeaderObserver.observe(container, {
            childList: true,
            subtree: false
          });
        }
      });
    });
    const mainWorkspace = document.querySelector(".workspace-split.mod-vertical.mod-root");
    if (mainWorkspace) {
      workspaceObserver.observe(mainWorkspace, {
        childList: true,
        subtree: true
      });
    }
  }
  /**
   * Remove the sticky home icon
   */
  remove() {
    if (this.tabHeaderUpdateTimeout) {
      clearTimeout(this.tabHeaderUpdateTimeout);
      this.tabHeaderUpdateTimeout = null;
    }
    if (this.stickyIconEl && this.stickyIconEl._checkInterval) {
      clearInterval(this.stickyIconEl._checkInterval);
    }
    if (this.stickyIconEl && this.stickyIconEl._containerObserver) {
      this.stickyIconEl._containerObserver.disconnect();
    }
    if (this.sidebarObserver) {
      this.sidebarObserver.disconnect();
      this.sidebarObserver = null;
    }
    if (this.tabHeaderObserver) {
      this.tabHeaderObserver.disconnect();
      this.tabHeaderObserver = null;
    }
    if (this.stickyIconEl) {
      if (this.stickyIconEl.parentElement) {
        this.stickyIconEl.remove();
      }
      this.stickyIconEl = null;
    }
    document.querySelectorAll(`.${STICKY_ICON_CLASS}`).forEach((el) => {
      const stickyEl = el;
      if (stickyEl._checkInterval) {
        clearInterval(stickyEl._checkInterval);
      }
      if (stickyEl._containerObserver) {
        stickyEl._containerObserver.disconnect();
      }
      el.remove();
    });
  }
  /**
   * Update the active state of the sticky icon
   */
  updateActiveState() {
    if (!this.stickyIconEl) return;
    const isActive = this.plugin.homeService.isFocusedOnHomeBase();
    if (isActive) {
      this.stickyIconEl.classList.add(STICKY_ICON_ACTIVE_CLASS);
    } else {
      this.stickyIconEl.classList.remove(STICKY_ICON_ACTIVE_CLASS);
    }
    this.updateTabHeaders();
  }
  /**
   * Check if the left sidebar is collapsed
   * Based on obsidian-oxygen-settings implementation
   */
  isLeftSidebarCollapsed() {
    const leftSidebar = document.querySelector(".workspace-split.mod-left-split") || document.querySelector(".mod-left-split");
    if (!leftSidebar) return false;
    return leftSidebar.classList.contains("is-sidedock-collapsed");
  }
  /**
   * Update icon position based on sidebar state
   * Note: With inline positioning, icon flows naturally with tabs, so no special positioning needed
   */
  updateIconPositionForSidebar() {
  }
  /**
   * Update icon visibility based on tab bar visibility
   * REMOVED: JavaScript-based visibility checking was causing issues
   * Now relies entirely on CSS which is more reliable
   */
  updateIconVisibility() {
  }
  /**
   * Watch for sidebar state changes and update icon position
   * Based on obsidian-oxygen-settings implementation
   */
  watchSidebarState() {
    if (this.sidebarObserver) {
      this.sidebarObserver.disconnect();
    }
    const leftSidebar = document.querySelector(".workspace-split.mod-left-split") || document.querySelector(".mod-left-split");
    if (!leftSidebar) return;
    this.sidebarObserver = new MutationObserver((mutations) => {
      let shouldUpdate = false;
      mutations.forEach((mutation) => {
        if (mutation.type === "attributes" && mutation.attributeName === "class") {
          shouldUpdate = true;
        }
      });
      if (shouldUpdate) {
        this.updateIconPositionForSidebar();
      }
    });
    this.sidebarObserver.observe(leftSidebar, {
      attributes: true,
      attributeFilter: ["class"]
    });
  }
  /**
   * Watch for tab bar visibility changes (Oxygen theme auto-hide, focus mode, etc.)
   * REMOVED: No longer needed - CSS handles all visibility automatically
   */
  watchTabBarVisibility() {
  }
  /**
   * Toggle the sticky icon visibility
   */
  async toggle() {
    this.plugin.settings.showStickyHomeIcon = !this.plugin.settings.showStickyHomeIcon;
    await this.plugin.saveSettings();
    this.update();
    this.updateTabHeaders();
  }
  /**
   * Update tab headers to hide/show ghost tab
   * Only works when sticky icon is enabled
   * Removed debounce - must be immediate to prevent flash
   */
  updateTabHeaders() {
    if (this.tabHeaderUpdateTimeout) {
      clearTimeout(this.tabHeaderUpdateTimeout);
      this.tabHeaderUpdateTimeout = null;
    }
    this._doUpdateTabHeaders();
  }
  /**
   * Internal method that actually updates the tab headers
   */
  _doUpdateTabHeaders() {
    if (!this.plugin.settings.showStickyHomeIcon || !this.plugin.settings.hideHomeTabHeader) {
      document.querySelectorAll(".is-home-base-tab").forEach((el) => {
        el.classList.remove("is-home-base-tab");
      });
      document.querySelectorAll(".workspace-tab-header").forEach((tabHeader) => {
        const tabHeaderExtended = tabHeader;
        if (tabHeaderExtended._homeBaseParent && !tabHeaderExtended._homeBaseParent.contains(tabHeader)) {
          const parent = tabHeaderExtended._homeBaseParent;
          const nextSibling = tabHeaderExtended._homeBaseNextSibling;
          if (parent) {
            if (nextSibling && nextSibling.parentElement === parent) {
              parent.insertBefore(tabHeader, nextSibling);
            } else {
              parent.appendChild(tabHeader);
            }
          }
          delete tabHeaderExtended._homeBaseParent;
          delete tabHeaderExtended._homeBaseNextSibling;
        }
      });
      return;
    }
    const homeBasePath = this.plugin.settings.homeBasePath;
    if (!homeBasePath) {
      return;
    }
    const ghostTabHeadersToRemove = [];
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      const isHomeBase = leafHasFile(leaf, homeBasePath);
      if (!isHomeBase) return;
      const viewState = leaf.getViewState();
      const isGhostTab = viewState.pinned === true && isHomeBase;
      if (isGhostTab) {
        const tabHeader = this.getTabHeaderForLeaf(leaf);
        if (tabHeader && tabHeader.parentElement) {
          ghostTabHeadersToRemove.push({ tabHeader, leaf });
        }
      }
    });
    ghostTabHeadersToRemove.forEach(({ tabHeader }) => {
      const parent = tabHeader.parentElement;
      if (parent && parent.classList.contains("workspace-tab-header-container-inner")) {
        const tabHeaderExtended = tabHeader;
        if (parent.contains(tabHeader)) {
          tabHeaderExtended._homeBaseParent = parent;
          tabHeaderExtended._homeBaseNextSibling = tabHeader.nextSibling;
          tabHeader.remove();
        }
      }
    });
    requestAnimationFrame(() => {
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        const isHomeBase = leafHasFile(leaf, homeBasePath);
        const viewState = leaf.getViewState();
        const isGhostTab = viewState.pinned === true && isHomeBase;
        const tabHeader = this.getTabHeaderForLeaf(leaf);
        if (tabHeader) {
          const tabHeaderExtended = tabHeader;
          const isRemoved = tabHeaderExtended._homeBaseParent && !tabHeaderExtended._homeBaseParent.contains(tabHeader);
          if (isHomeBase && !isGhostTab) {
            if (isRemoved) {
              const parent = tabHeaderExtended._homeBaseParent;
              const nextSibling = tabHeaderExtended._homeBaseNextSibling;
              if (parent) {
                if (nextSibling && nextSibling.parentElement === parent) {
                  parent.insertBefore(tabHeader, nextSibling);
                } else {
                  parent.appendChild(tabHeader);
                }
                delete tabHeaderExtended._homeBaseParent;
                delete tabHeaderExtended._homeBaseNextSibling;
              }
            }
            tabHeader.classList.remove("is-home-base-tab");
            tabHeader.removeAttribute("data-home-base-ghost");
            tabHeader.removeAttribute("aria-hidden");
          } else if (!isHomeBase) {
            if (isRemoved) {
              const parent = tabHeaderExtended._homeBaseParent;
              const nextSibling = tabHeaderExtended._homeBaseNextSibling;
              if (parent) {
                if (nextSibling && nextSibling.parentElement === parent) {
                  parent.insertBefore(tabHeader, nextSibling);
                } else {
                  parent.appendChild(tabHeader);
                }
                delete tabHeaderExtended._homeBaseParent;
                delete tabHeaderExtended._homeBaseNextSibling;
              }
            }
            tabHeader.classList.remove("is-home-base-tab");
          }
        }
      });
    });
  }
  /**
   * Get the tab header element for a given leaf
   */
  getTabHeaderForLeaf(leaf) {
    var _a;
    const leafAny = leaf;
    if (leafAny.tabHeaderEl) {
      return leafAny.tabHeaderEl;
    }
    const viewType = (_a = leaf.view) == null ? void 0 : _a.getViewType();
    if (!viewType) return null;
    const activeLeaf = this.plugin.app.workspace.getMostRecentLeaf();
    const isActive = leaf === activeLeaf;
    const tabHeaders = document.querySelectorAll(`.workspace-tab-header[data-type="${viewType}"]`);
    if (isActive) {
      const activeHeader = document.querySelector(".workspace-tab-header.is-active");
      if (activeHeader && activeHeader.getAttribute("data-type") === viewType) {
        return activeHeader;
      }
    }
    for (const header of Array.from(tabHeaders)) {
      const headerEl = header;
      const headerElWithLeaf = headerEl;
      const headerLeaf = headerElWithLeaf.leaf;
      if (headerLeaf === leaf) {
        return headerEl;
      }
    }
    if (tabHeaders.length === 1) {
      return tabHeaders[0];
    }
    if (isActive) {
      const activeHeader = document.querySelector(".workspace-tab-header.is-active");
      if (activeHeader) {
        return activeHeader;
      }
    }
    return null;
  }
  /**
   * Close the home base tab
   * When called from context menu: Only closes the ghost tab (the "occupied" slot)
   * Other home base tabs are left alone
   */
  async closeHomeBase(actuallyClose = false) {
    const homeBasePath = this.plugin.settings.homeBasePath;
    if (!homeBasePath) return;
    const { getFileByPath: getFileByPath2 } = await Promise.resolve().then(() => (init_file_utils(), file_utils_exports));
    const homeBaseFile = getFileByPath2(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return;
    const ghostTabs = [];
    this.plugin.app.workspace.iterateAllLeaves((leaf) => {
      if (leafHasFile(leaf, homeBasePath)) {
        try {
          const viewState = leaf.getViewState();
          if (viewState.pinned === true) {
            ghostTabs.push(leaf);
          }
        } catch (e) {
        }
      }
    });
    if (this.plugin.settings.showStickyHomeIcon) {
      for (const ghostTab of ghostTabs) {
        void ghostTab.detach();
      }
    } else {
      const allHomeBaseLeaves = [];
      this.plugin.app.workspace.iterateAllLeaves((leaf) => {
        if (leafHasFile(leaf, homeBasePath)) {
          allHomeBaseLeaves.push(leaf);
        }
      });
      for (const leaf of allHomeBaseLeaves) {
        void leaf.detach();
      }
    }
    this.updateTabHeaders();
  }
  /**
   * Pin the home base tab
   */
  pinHomeBaseTab() {
    const homeBasePath = this.plugin.settings.homeBasePath;
    if (!homeBasePath) return;
    const homeBaseFile = getFileByPath(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return;
    const homeBaseLeaf = this.plugin.homeService.findExistingHomeBaseLeaf(homeBaseFile);
    if (homeBaseLeaf) {
      homeBaseLeaf.setPinned(true);
    }
  }
  /**
   * Unpin the home base tab
   */
  unpinHomeBaseTab() {
    const homeBasePath = this.plugin.settings.homeBasePath;
    if (!homeBasePath) return;
    const homeBaseFile = getFileByPath(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return;
    const homeBaseLeaf = this.plugin.homeService.findExistingHomeBaseLeaf(homeBaseFile);
    if (homeBaseLeaf) {
      homeBaseLeaf.setPinned(false);
    }
  }
  /**
   * Check if the home base tab is pinned
   */
  isHomeBaseTabPinned() {
    const homeBasePath = this.plugin.settings.homeBasePath;
    if (!homeBasePath) return false;
    const homeBaseFile = getFileByPath(this.plugin.app, homeBasePath);
    if (!homeBaseFile) return false;
    const homeBaseLeaf = this.plugin.homeService.findExistingHomeBaseLeaf(homeBaseFile);
    if (!homeBaseLeaf) return false;
    const viewState = homeBaseLeaf.getViewState();
    return viewState.pinned === true;
  }
};

// src/services/mobile-button-service.ts
var import_obsidian11 = require("obsidian");
var MOBILE_HOME_CLASS = "home-base-mobile-enabled";
var MobileButtonService = class {
  constructor(plugin) {
    this.plugin = plugin;
  }
  /**
   * Update the mobile button based on settings
   */
  update() {
    if (!import_obsidian11.Platform.isMobile) {
      this.remove();
      return;
    }
    if (this.plugin.settings.replaceMobileNewTab) {
      this.apply();
    } else {
      this.remove();
    }
  }
  /**
   * Apply the mobile button replacement
   */
  apply() {
    document.body.classList.add(MOBILE_HOME_CLASS);
  }
  /**
   * Remove the mobile button replacement
   */
  remove() {
    document.body.classList.remove(MOBILE_HOME_CLASS);
  }
};

// src/main.ts
var HOME_ICON = `<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8"/><path d="M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z"/></svg>`;
var HomeBasePlugin = class extends import_obsidian12.Plugin {
  constructor() {
    super(...arguments);
    // Release notes tracking
    this.newRelease = false;
    // Track if patched opening behavior already ran
    this.openingBehaviorRan = false;
    // Track if we're currently in startup (to prevent handleOpenWhenEmpty from firing)
    this.isStartup = true;
  }
  async onload() {
    await this.loadSettings();
    await this.migrateLegacySettings();
    this.patchOpeningBehavior();
    (0, import_obsidian12.addIcon)("home-base", HOME_ICON);
    this.homeService = new HomeBaseService(this);
    this.newTabService = new NewTabService(this);
    this.stickyTabService = new StickyTabService(this);
    this.mobileButtonService = new MobileButtonService(this);
    this.addRibbonIcon("home", "Open home base", () => {
      void this.homeService.openHomeBase({
        replaceActiveLeaf: false,
        runCommand: true
      });
    });
    this.registerCommands();
    this.addSettingTab(new HomeBaseSettingTab(this.app, this));
    this.app.workspace.onLayoutReady(() => {
      setTimeout(() => {
        if (this.isSettingsModalOpen()) {
          this.updateStickyTabIcon();
          this.updateMobileButton();
          this.stickyTabService.updateTabHeaders();
          return;
        }
        if (!this.openingBehaviorRan) {
          this.newTabService.initialize();
        } else {
          this.newTabService.trackExistingLeaves();
        }
        setTimeout(() => {
          this.isStartup = false;
        }, 1e3);
        this.updateStickyTabIcon();
        this.updateMobileButton();
        this.stickyTabService.updateTabHeaders();
      }, 100);
    });
    this.registerEvent(
      this.app.workspace.on("layout-change", async () => {
        this.newTabService.handleLayoutChange();
        if (this.settings.revertView) {
          await this.homeService.revertView();
        }
        setTimeout(() => {
          this.stickyTabService.updateActiveState();
          this.stickyTabService.updateTabHeaders();
          this.stickyTabService.updateIconPositionForSidebar();
        }, 150);
      })
    );
    this.registerEvent(
      this.app.workspace.on("file-open", () => {
        setTimeout(() => {
          this.stickyTabService.updateActiveState();
          this.stickyTabService.updateTabHeaders();
        }, 100);
      })
    );
    this.registerEvent(
      this.app.workspace.on("active-leaf-change", () => {
        setTimeout(() => {
          this.stickyTabService.updateTabHeaders();
        }, 100);
      })
    );
  }
  onunload() {
    this.unpatchReleaseNotes();
    this.unpatchOpeningBehavior();
    this.stickyTabService.remove();
    this.mobileButtonService.remove();
  }
  /**
   * Register plugin commands
   */
  registerCommands() {
    this.addCommand({
      id: "open",
      name: "Open",
      callback: () => {
        const homeBaseSettings = this.getHomeBaseSettings();
        if (!homeBaseSettings.value && homeBaseSettings.type === "File" /* File */) {
          new import_obsidian12.Notice("No home base configured. Set one in settings.");
          return;
        }
        void this.homeService.openHomeBase({
          replaceActiveLeaf: false,
          runCommand: true
        });
      }
    });
    this.addCommand({
      id: "set-current-file",
      name: "Set current file as home",
      checkCallback: (checking) => {
        if (!this.homeService.canSetActiveFileAsHomeBase()) {
          return false;
        }
        if (!checking) {
          void this.homeService.setActiveFileAsHomeBase().then((success) => {
            if (success) {
              const activeFile = this.app.workspace.getActiveFile();
              new import_obsidian12.Notice(`Home base set to "${activeFile == null ? void 0 : activeFile.name}"`);
            }
          });
        }
        return true;
      }
    });
    this.addCommand({
      id: "toggle-sticky-icon",
      name: "Toggle sticky home icon",
      callback: async () => {
        await this.stickyTabService.toggle();
        const state = this.settings.showStickyHomeIcon ? "enabled" : "disabled";
        new import_obsidian12.Notice(`Sticky home icon ${state}`);
      }
    });
    this.addCommand({
      id: "close",
      name: "Close",
      callback: async () => {
        await this.stickyTabService.closeHomeBase();
      }
    });
  }
  /**
   * Load plugin settings
   */
  async loadSettings() {
    const data = await this.loadData();
    this.settings = Object.assign({}, DEFAULT_SETTINGS, data != null ? data : {});
  }
  /**
   * Migrate legacy settings to new format
   */
  async migrateLegacySettings() {
    let needsSave = false;
    if (this.settings.homeBasePath && !this.settings.homeBaseValue) {
      this.settings.homeBaseType = "File" /* File */;
      this.settings.homeBaseValue = this.settings.homeBasePath;
      needsSave = true;
    }
    if (this.settings.keepExistingTabs !== void 0) {
      if (this.settings.openMode === DEFAULT_SETTINGS.openMode) {
        this.settings.openMode = this.settings.keepExistingTabs ? "retain" : "replace-all";
        needsSave = true;
      }
    }
    if (this.settings.mobileHomeBasePath && !this.settings.mobileHomeBaseValue) {
      this.settings.mobileHomeBaseType = "File" /* File */;
      this.settings.mobileHomeBaseValue = this.settings.mobileHomeBasePath;
      needsSave = true;
    }
    if (needsSave) {
      await this.saveSettings();
    }
  }
  /**
   * Get the active home base settings (mobile or desktop)
   */
  getHomeBaseSettings() {
    if (this.settings.separateMobile && import_obsidian12.Platform.isMobile) {
      return {
        type: this.settings.mobileHomeBaseType || "File" /* File */,
        value: this.settings.mobileHomeBaseValue || this.settings.mobileHomeBasePath || "",
        path: this.settings.mobileHomeBasePath || this.settings.mobileHomeBaseValue || ""
      };
    }
    return {
      type: this.settings.homeBaseType || "File" /* File */,
      value: this.settings.homeBaseValue || this.settings.homeBasePath || "",
      path: this.settings.homeBasePath || this.settings.homeBaseValue || ""
    };
  }
  /**
   * Get the active new tab settings (mobile or desktop)
   * Falls back to home base settings if useDifferentFileForNewTab is disabled
   */
  getNewTabSettings() {
    if (!this.settings.useDifferentFileForNewTab) {
      const homeBaseSettings = this.getHomeBaseSettings();
      console.debug("[Home Base] getNewTabSettings: Using home base settings (useDifferentFileForNewTab is false)", homeBaseSettings);
      return homeBaseSettings;
    }
    let settings;
    if (this.settings.newTabSeparateMobile && import_obsidian12.Platform.isMobile) {
      settings = {
        type: this.settings.mobileNewTabType || "File" /* File */,
        value: this.settings.mobileNewTabValue || "",
        path: this.settings.mobileNewTabValue || ""
      };
    } else {
      settings = {
        type: this.settings.newTabType || "File" /* File */,
        value: this.settings.newTabValue || "",
        path: this.settings.newTabValue || ""
      };
    }
    if (!settings.value && settings.type === "File" /* File */) {
      console.warn("[Home Base] getNewTabSettings: newTabValue is empty for File type, falling back to home base settings");
      return this.getHomeBaseSettings();
    }
    console.debug("[Home Base] getNewTabSettings: Using new tab settings", {
      useDifferentFileForNewTab: this.settings.useDifferentFileForNewTab,
      newTabSeparateMobile: this.settings.newTabSeparateMobile,
      isMobile: import_obsidian12.Platform.isMobile,
      settings
    });
    return settings;
  }
  /**
   * Save plugin settings
   */
  async saveSettings() {
    await this.saveData(this.settings);
  }
  /**
   * Update the sticky tab icon based on current settings
   */
  updateStickyTabIcon() {
    this.stickyTabService.update();
    this.stickyTabService.updateTabHeaders();
  }
  /**
   * Update the mobile button based on current settings
   */
  updateMobileButton() {
    this.mobileButtonService.update();
  }
  /**
   * Check if we should skip startup logic (e.g., plugin reload, settings modal open)
   * This prevents destructive behavior when the plugin is reloaded or settings are open
   */
  shouldSkipStartupLogic() {
    if (this.isSettingsModalOpen()) {
      return true;
    }
    const hasOpenFiles = this.app.workspace.getLeavesOfType("markdown").length > 0 || this.app.workspace.getLeavesOfType("canvas").length > 0 || this.app.workspace.getLeavesOfType("bases").length > 0 || this.app.workspace.getLeavesOfType("empty").length > 0;
    return hasOpenFiles;
  }
  /**
   * Check if the settings modal is currently open
   */
  isSettingsModalOpen() {
    const settingsModal = document.querySelector(".modal-container.mod-settings") || document.querySelector(".modal.mod-settings") || document.querySelector(".vertical-tab-content");
    if (!settingsModal) {
      const allModals = document.querySelectorAll(".modal-container");
      for (const modal of Array.from(allModals)) {
        if (modal.querySelector(".vertical-tab-content") || modal.querySelector(".settings-content") || modal.classList.contains("mod-settings")) {
          return true;
        }
      }
    }
    return settingsModal !== null;
  }
  /**
   * Patch runOpeningBehavior for fast startup (like homepage plugin)
   */
  patchOpeningBehavior() {
    this.app.nvOrig_runOpeningBehavior = this.app.runOpeningBehavior;
    this.app.runOpeningBehavior = async (path) => {
      const openInitially = this.settings.openOnStartup && !this.hasUrlParams();
      if (openInitially) {
        this.openingBehaviorRan = true;
        const mode = this.settings.openMode;
        if (mode === "replace-all") {
          await this.homeService.detachAllLeaves();
        }
        if (this.settings.showStickyHomeIcon) {
          await this.homeService.openHomeBaseInGhostTab({
            runCommand: true
          });
        } else {
          await this.homeService.openHomeBaseWithMode(mode, true);
        }
      } else {
        if (this.app.nvOrig_runOpeningBehavior) {
          await this.app.nvOrig_runOpeningBehavior(path);
        }
      }
      this.unpatchReleaseNotes();
    };
  }
  /**
   * Unpatch runOpeningBehavior
   */
  unpatchOpeningBehavior() {
    if (this.app.nvOrig_runOpeningBehavior) {
      this.app.runOpeningBehavior = this.app.nvOrig_runOpeningBehavior;
    }
  }
  /**
   * Patch showReleaseNotes to track new releases
   */
  patchReleaseNotes() {
    const appAny = this.app;
    appAny.nvOrig_showReleaseNotes = appAny.showReleaseNotes;
    appAny.showReleaseNotes = () => {
      this.newRelease = true;
    };
  }
  /**
   * Unpatch showReleaseNotes
   */
  unpatchReleaseNotes() {
    var _a;
    const appAny = this.app;
    if (this.newRelease && !this.settings.hideReleaseNotes) {
      (_a = appAny.nvOrig_showReleaseNotes) == null ? void 0 : _a.call(appAny);
    }
    if (appAny.nvOrig_showReleaseNotes) {
      appAny.showReleaseNotes = appAny.nvOrig_showReleaseNotes;
    }
  }
  /**
   * Check if a home base type has its required plugin enabled
   */
  hasRequiredPlugin(type) {
    var _a, _b, _c, _d, _e, _f, _g, _h;
    switch (type) {
      case "Workspace" /* Workspace */:
        return ((_c = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b.workspaces) == null ? void 0 : _c.enabled) === true;
      case "Graph view" /* Graph */:
        return ((_f = (_e = (_d = this.app.internalPlugins) == null ? void 0 : _d.plugins) == null ? void 0 : _e.graph) == null ? void 0 : _f.enabled) === true;
      case "Journal" /* Journal */:
        return !!((_h = (_g = this.app.plugins) == null ? void 0 : _g.plugins) == null ? void 0 : _h["journals"]);
      case "Daily Note" /* DailyNote */:
      case "Weekly Note" /* WeeklyNote */:
      case "Monthly Note" /* MonthlyNote */:
      case "Yearly Note" /* YearlyNote */:
        return this.hasRequiredPeriodicity(type);
      default:
        return true;
    }
  }
  /**
   * Check if periodic notes are available for the given type
   */
  hasRequiredPeriodicity(type) {
    var _a, _b, _c, _d, _e, _f, _g, _h, _i, _j, _k, _l, _m, _n, _o, _p, _q, _r, _s;
    if (type === "Daily Note" /* DailyNote */) {
      const coreDailyNotes = ((_c = (_b = (_a = this.app.internalPlugins) == null ? void 0 : _a.plugins) == null ? void 0 : _b["daily-notes"]) == null ? void 0 : _c.enabled) === true;
      if (coreDailyNotes) {
        return true;
      }
      const periodicNotes2 = (_e = (_d = this.app.plugins) == null ? void 0 : _d.plugins) == null ? void 0 : _e["periodic-notes"];
      if (periodicNotes2) {
        const version2 = ((_f = periodicNotes2 == null ? void 0 : periodicNotes2.manifest) == null ? void 0 : _f.version) || "0";
        const isLegacy2 = version2.startsWith("0");
        if (isLegacy2) {
          return ((_h = (_g = periodicNotes2 == null ? void 0 : periodicNotes2.settings) == null ? void 0 : _g["daily"]) == null ? void 0 : _h.enabled) === true;
        } else {
          const calendarSet = (_j = (_i = periodicNotes2 == null ? void 0 : periodicNotes2.calendarSetManager) == null ? void 0 : _i.getActiveSet) == null ? void 0 : _j.call(_i);
          return ((_k = calendarSet == null ? void 0 : calendarSet["day"]) == null ? void 0 : _k.enabled) === true;
        }
      }
      return false;
    }
    const periodicNotes = (_m = (_l = this.app.plugins) == null ? void 0 : _l.plugins) == null ? void 0 : _m["periodic-notes"];
    if (!periodicNotes) return false;
    const version = ((_n = periodicNotes == null ? void 0 : periodicNotes.manifest) == null ? void 0 : _n.version) || "0";
    const isLegacy = version.startsWith("0");
    if (isLegacy) {
      const periodMap = {
        ["Weekly Note" /* WeeklyNote */]: "weekly",
        ["Monthly Note" /* MonthlyNote */]: "monthly",
        ["Yearly Note" /* YearlyNote */]: "yearly"
      };
      const adjective = periodMap[type];
      if (!adjective) return false;
      return ((_p = (_o = periodicNotes == null ? void 0 : periodicNotes.settings) == null ? void 0 : _o[adjective]) == null ? void 0 : _p.enabled) === true;
    } else {
      const nounMap = {
        ["Weekly Note" /* WeeklyNote */]: "week",
        ["Monthly Note" /* MonthlyNote */]: "month",
        ["Yearly Note" /* YearlyNote */]: "year"
      };
      const noun = nounMap[type];
      if (!noun) return false;
      const calendarSet = (_r = (_q = periodicNotes == null ? void 0 : periodicNotes.calendarSetManager) == null ? void 0 : _q.getActiveSet) == null ? void 0 : _r.call(_q);
      return ((_s = calendarSet == null ? void 0 : calendarSet[noun]) == null ? void 0 : _s.enabled) === true;
    }
  }
  /**
   * Check if URL params indicate a file/workspace should be opened (skip homepage)
   */
  hasUrlParams() {
    if (typeof window !== "undefined" && window.OBS_ACT) {
      const params = Object.keys(window.OBS_ACT);
      const action = window.OBS_ACT.action;
      return action !== void 0 && ["open", "advanced-uri"].includes(action) && ["file", "filepath", "workspace"].some((e) => params.includes(e));
    }
    return false;
  }
  // "Open when empty" feature removed - redundant with "New tab replacement: only when empty"
  // Since Obsidian auto-creates an empty tab when you close the last one, they do the same thing
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsic3JjL3V0aWxzL2ZpbGUtdXRpbHMudHMiLCAibm9kZV9tb2R1bGVzLy5wbnBtL29ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZl84ZDlmYzI0YjBmYzYyMmQ5NGZkMTFmYTVlOWIxODViMy9ub2RlX21vZHVsZXMvb2JzaWRpYW4tZGFpbHktbm90ZXMtaW50ZXJmYWNlL2Rpc3QvbWFpbi5qcyIsICJzcmMvbWFpbi50cyIsICJzcmMvc2V0dGluZ3MudHMiLCAic3JjL3VpL3NldHRpbmdzLXRhYi50cyIsICJzcmMvdXRpbHMvc2V0dGluZ3MtY29tcGF0LnRzIiwgInNyYy91aS9maWxlLXN1Z2dlc3QudHMiLCAic3JjL3VpL2NvbW1hbmQtc3VnZ2VzdC50cyIsICJzcmMvdWkvaWNvbi1waWNrZXIudHMiLCAic3JjL3NlcnZpY2VzL2hvbWUtc2VydmljZS50cyIsICJzcmMvdXRpbHMvaG9tZWJhc2UtcmVzb2x2ZXIudHMiLCAic3JjL3NlcnZpY2VzL25ldy10YWItc2VydmljZS50cyIsICJzcmMvc2VydmljZXMvc3RpY2t5LXRhYi1zZXJ2aWNlLnRzIiwgInNyYy9zZXJ2aWNlcy9tb2JpbGUtYnV0dG9uLXNlcnZpY2UudHMiXSwKICAic291cmNlc0NvbnRlbnQiOiBbIi8qKlxyXG4gKiBGaWxlIFV0aWxpdGllc1xyXG4gKiBIZWxwZXIgZnVuY3Rpb25zIGZvciBmaWxlIHR5cGUgZGV0ZWN0aW9uIGFuZCBoYW5kbGluZ1xyXG4gKi9cclxuXHJcbmltcG9ydCB7IEFwcCwgVEZpbGUsIFdvcmtzcGFjZUxlYWYgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogU3VwcG9ydGVkIGZpbGUgZXh0ZW5zaW9ucyBmb3IgaG9tZSBiYXNlXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgU1VQUE9SVEVEX0VYVEVOU0lPTlMgPSBbJ21kJywgJ21keCcsICdjYW52YXMnLCAnYmFzZSddIGFzIGNvbnN0O1xyXG5leHBvcnQgdHlwZSBTdXBwb3J0ZWRFeHRlbnNpb24gPSB0eXBlb2YgU1VQUE9SVEVEX0VYVEVOU0lPTlNbbnVtYmVyXTtcclxuXHJcbi8qKlxyXG4gKiBWaWV3IHR5cGVzIGNvcnJlc3BvbmRpbmcgdG8gZmlsZSBleHRlbnNpb25zXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVklFV19UWVBFX01BUDogUmVjb3JkPFN1cHBvcnRlZEV4dGVuc2lvbiwgc3RyaW5nPiA9IHtcclxuXHQnbWQnOiAnbWFya2Rvd24nLFxyXG5cdCdtZHgnOiAnbWFya2Rvd24nLFxyXG5cdCdjYW52YXMnOiAnY2FudmFzJyxcclxuXHQnYmFzZSc6ICdiYXNlcycsXHJcbn07XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGV4dGVuc2lvbiBpcyBzdXBwb3J0ZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc1N1cHBvcnRlZEV4dGVuc2lvbihleHRlbnNpb246IHN0cmluZyk6IGV4dGVuc2lvbiBpcyBTdXBwb3J0ZWRFeHRlbnNpb24ge1xyXG5cdHJldHVybiBTVVBQT1JURURfRVhURU5TSU9OUy5pbmNsdWRlcyhleHRlbnNpb24gYXMgU3VwcG9ydGVkRXh0ZW5zaW9uKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgZmlsZSBleHRlbnNpb24gZnJvbSBhIHBhdGhcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRGaWxlRXh0ZW5zaW9uKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0Y29uc3QgcGFydHMgPSBwYXRoLnNwbGl0KCcuJyk7XHJcblx0cmV0dXJuIHBhcnRzLmxlbmd0aCA+IDEgPyAocGFydHNbcGFydHMubGVuZ3RoIC0gMV0gPz8gJycpLnRvTG93ZXJDYXNlKCkgOiAnJztcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCB0aGUgdmlldyB0eXBlIGZvciBhIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRWaWV3VHlwZUZvckZpbGUoZmlsZTogVEZpbGUpOiBzdHJpbmcge1xyXG5cdGNvbnN0IGV4dCA9IGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XHJcblx0aWYgKGlzU3VwcG9ydGVkRXh0ZW5zaW9uKGV4dCkpIHtcclxuXHRcdHJldHVybiBWSUVXX1RZUEVfTUFQW2V4dF07XHJcblx0fVxyXG5cdHJldHVybiAnbWFya2Rvd24nOyAvLyBEZWZhdWx0IGZhbGxiYWNrXHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgaXMgYSBtYXJrZG93bi1saWtlIGZpbGUgKG1kIG9yIG1keClcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc01hcmtkb3duTGlrZShmaWxlOiBURmlsZSk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IGV4dCA9IGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCk7XHJcblx0cmV0dXJuIGV4dCA9PT0gJ21kJyB8fCBleHQgPT09ICdtZHgnO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGlzIGFuIE1EWCBmaWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gaXNNZHhGaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkgPT09ICdtZHgnO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBmaWxlIGlzIGEgY2FudmFzIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0NhbnZhc0ZpbGUoZmlsZTogVEZpbGUpOiBib29sZWFuIHtcclxuXHRyZXR1cm4gZmlsZS5leHRlbnNpb24udG9Mb3dlckNhc2UoKSA9PT0gJ2NhbnZhcyc7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGZpbGUgaXMgYSBiYXNlIGZpbGVcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBpc0Jhc2VGaWxlKGZpbGU6IFRGaWxlKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIGZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkgPT09ICdiYXNlJztcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhIGZpbGUgYnkgcGF0aCwgdHJ5aW5nIHdpdGggYW5kIHdpdGhvdXQgZXh0ZW5zaW9uXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZ2V0RmlsZUJ5UGF0aChhcHA6IEFwcCwgcGF0aDogc3RyaW5nKTogVEZpbGUgfCBudWxsIHtcclxuXHQvLyBUcnkgZXhhY3QgcGF0aCBmaXJzdFxyXG5cdGNvbnN0IGV4YWN0TWF0Y2ggPSBhcHAudmF1bHQuZ2V0QWJzdHJhY3RGaWxlQnlQYXRoKHBhdGgpO1xyXG5cdGlmIChleGFjdE1hdGNoIGluc3RhbmNlb2YgVEZpbGUpIHtcclxuXHRcdHJldHVybiBleGFjdE1hdGNoO1xyXG5cdH1cclxuXHJcblx0Ly8gVHJ5IHVzaW5nIG1ldGFkYXRhQ2FjaGUgZm9yIGZ1enp5IG1hdGNoaW5nXHJcblx0Y29uc3QgZmlsZSA9IGFwcC5tZXRhZGF0YUNhY2hlLmdldEZpcnN0TGlua3BhdGhEZXN0KHBhdGgsICcvJyk7XHJcblx0cmV0dXJuIGZpbGU7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUcmltIHRoZSBmaWxlIGV4dGVuc2lvbiBmcm9tIGEgcGF0aCBmb3IgY29tcGFyaXNvblxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHRyaW1GaWxlRXh0ZW5zaW9uKHBhdGg6IHN0cmluZyk6IHN0cmluZyB7XHJcblx0Y29uc3QgbGFzdERvdCA9IHBhdGgubGFzdEluZGV4T2YoJy4nKTtcclxuXHRpZiAobGFzdERvdCA+IDApIHtcclxuXHRcdGNvbnN0IGV4dCA9IHBhdGguc2xpY2UobGFzdERvdCArIDEpLnRvTG93ZXJDYXNlKCk7XHJcblx0XHRpZiAoU1VQUE9SVEVEX0VYVEVOU0lPTlMuaW5jbHVkZXMoZXh0IGFzIFN1cHBvcnRlZEV4dGVuc2lvbikpIHtcclxuXHRcdFx0cmV0dXJuIHBhdGguc2xpY2UoMCwgbGFzdERvdCk7XHJcblx0XHR9XHJcblx0fVxyXG5cdHJldHVybiBwYXRoO1xyXG59XHJcblxyXG4vKipcclxuICogQ29tcGFyZSB0d28gcGF0aHMsIGlnbm9yaW5nIGNhc2UgYW5kIGV4dGVuc2lvbiBkaWZmZXJlbmNlc1xyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHBhdGhzRXF1YWwocGF0aDE6IHN0cmluZywgcGF0aDI6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IG5vcm0xID0gdHJpbUZpbGVFeHRlbnNpb24ocGF0aDEpLnRvTG93ZXJDYXNlKCk7XHJcblx0Y29uc3Qgbm9ybTIgPSB0cmltRmlsZUV4dGVuc2lvbihwYXRoMikudG9Mb3dlckNhc2UoKTtcclxuXHRyZXR1cm4gbm9ybTEgPT09IG5vcm0yO1xyXG59XHJcblxyXG4vKipcclxuICogQ2hlY2sgaWYgYSBsZWFmIGlzIHNob3dpbmcgYSBzcGVjaWZpYyBmaWxlXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gbGVhZkhhc0ZpbGUobGVhZjogV29ya3NwYWNlTGVhZiwgZmlsZVBhdGg6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IHN0YXRlID0gbGVhZi52aWV3Py5nZXRTdGF0ZT8uKCk7XHJcblx0Y29uc3QgbGVhZkZpbGUgPSBzdGF0ZT8uZmlsZSBhcyBzdHJpbmcgfCB1bmRlZmluZWQ7XHJcblx0XHJcblx0aWYgKCFsZWFmRmlsZSkgcmV0dXJuIGZhbHNlO1xyXG5cdFxyXG5cdHJldHVybiBwYXRoc0VxdWFsKGxlYWZGaWxlLCBmaWxlUGF0aCk7XHJcbn1cclxuIiwgIid1c2Ugc3RyaWN0JztcblxuT2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcblxudmFyIG9ic2lkaWFuID0gcmVxdWlyZSgnb2JzaWRpYW4nKTtcblxuY29uc3QgREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVCA9IFwiWVlZWS1NTS1ERFwiO1xuY29uc3QgREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQgPSBcImdnZ2ctW1ddd3dcIjtcbmNvbnN0IERFRkFVTFRfTU9OVEhMWV9OT1RFX0ZPUk1BVCA9IFwiWVlZWS1NTVwiO1xuY29uc3QgREVGQVVMVF9RVUFSVEVSTFlfTk9URV9GT1JNQVQgPSBcIllZWVktW1FdUVwiO1xuY29uc3QgREVGQVVMVF9ZRUFSTFlfTk9URV9GT1JNQVQgPSBcIllZWVlcIjtcblxuZnVuY3Rpb24gc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKHBlcmlvZGljaXR5KSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gd2luZG93LmFwcC5wbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpO1xuICAgIHJldHVybiBwZXJpb2RpY05vdGVzICYmIHBlcmlvZGljTm90ZXMuc2V0dGluZ3M/LltwZXJpb2RpY2l0eV0/LmVuYWJsZWQ7XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgZGFpbHktbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldERhaWx5Tm90ZVNldHRpbmdzKCkge1xuICAgIHRyeSB7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IHsgaW50ZXJuYWxQbHVnaW5zLCBwbHVnaW5zIH0gPSB3aW5kb3cuYXBwO1xuICAgICAgICBpZiAoc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKFwiZGFpbHlcIikpIHtcbiAgICAgICAgICAgIGNvbnN0IHsgZm9ybWF0LCBmb2xkZXIsIHRlbXBsYXRlIH0gPSBwbHVnaW5zLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8uZGFpbHkgfHwge307XG4gICAgICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0IHx8IERFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICAgICAgZm9sZGVyOiBmb2xkZXI/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICAgICAgICAgIHRlbXBsYXRlOiB0ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB9O1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IHsgZm9sZGVyLCBmb3JtYXQsIHRlbXBsYXRlIH0gPSBpbnRlcm5hbFBsdWdpbnMuZ2V0UGx1Z2luQnlJZChcImRhaWx5LW5vdGVzXCIpPy5pbnN0YW5jZT8ub3B0aW9ucyB8fCB7fTtcbiAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgIGZvcm1hdDogZm9ybWF0IHx8IERFRkFVTFRfREFJTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IGZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogdGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSBkYWlseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cbi8qKlxuICogUmVhZCB0aGUgdXNlciBzZXR0aW5ncyBmb3IgdGhlIGB3ZWVrbHktbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldFdlZWtseU5vdGVTZXR0aW5ncygpIHtcbiAgICB0cnkge1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgICAgICBjb25zdCBjYWxlbmRhclNldHRpbmdzID0gcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJjYWxlbmRhclwiKT8ub3B0aW9ucztcbiAgICAgICAgY29uc3QgcGVyaW9kaWNOb3Rlc1NldHRpbmdzID0gcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/LndlZWtseTtcbiAgICAgICAgaWYgKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcIndlZWtseVwiKSkge1xuICAgICAgICAgICAgcmV0dXJuIHtcbiAgICAgICAgICAgICAgICBmb3JtYXQ6IHBlcmlvZGljTm90ZXNTZXR0aW5ncy5mb3JtYXQgfHwgREVGQVVMVF9XRUVLTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICAgICAgZm9sZGVyOiBwZXJpb2RpY05vdGVzU2V0dGluZ3MuZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgICAgICB0ZW1wbGF0ZTogcGVyaW9kaWNOb3Rlc1NldHRpbmdzLnRlbXBsYXRlPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIH07XG4gICAgICAgIH1cbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSBjYWxlbmRhclNldHRpbmdzIHx8IHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBzZXR0aW5ncy53ZWVrbHlOb3RlRm9ybWF0IHx8IERFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFULFxuICAgICAgICAgICAgZm9sZGVyOiBzZXR0aW5ncy53ZWVrbHlOb3RlRm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBzZXR0aW5ncy53ZWVrbHlOb3RlVGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSB3ZWVrbHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgcGVyaW9kaWMtbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldE1vbnRobHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcIm1vbnRobHlcIikgJiZcbiAgICAgICAgICAgIHBsdWdpbk1hbmFnZXIuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik/LnNldHRpbmdzPy5tb250aGx5KSB8fFxuICAgICAgICAgICAge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHNldHRpbmdzLmZvcm1hdCB8fCBERUZBVUxUX01PTlRITFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IHNldHRpbmdzLmZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc2V0dGluZ3MudGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSBtb250aGx5IG5vdGUgc2V0dGluZ3MgZm91bmQhXCIsIGVycik7XG4gICAgfVxufVxuLyoqXG4gKiBSZWFkIHRoZSB1c2VyIHNldHRpbmdzIGZvciB0aGUgYHBlcmlvZGljLW5vdGVzYCBwbHVnaW5cbiAqIHRvIGtlZXAgYmVoYXZpb3Igb2YgY3JlYXRpbmcgYSBuZXcgbm90ZSBpbi1zeW5jLlxuICovXG5mdW5jdGlvbiBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MoKSB7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwbHVnaW5NYW5hZ2VyID0gd2luZG93LmFwcC5wbHVnaW5zO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHNldHRpbmdzID0gKHNob3VsZFVzZVBlcmlvZGljTm90ZXNTZXR0aW5ncyhcInF1YXJ0ZXJseVwiKSAmJlxuICAgICAgICAgICAgcGx1Z2luTWFuYWdlci5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKT8uc2V0dGluZ3M/LnF1YXJ0ZXJseSkgfHxcbiAgICAgICAgICAgIHt9O1xuICAgICAgICByZXR1cm4ge1xuICAgICAgICAgICAgZm9ybWF0OiBzZXR0aW5ncy5mb3JtYXQgfHwgREVGQVVMVF9RVUFSVEVSTFlfTk9URV9GT1JNQVQsXG4gICAgICAgICAgICBmb2xkZXI6IHNldHRpbmdzLmZvbGRlcj8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgICAgICB0ZW1wbGF0ZTogc2V0dGluZ3MudGVtcGxhdGU/LnRyaW0oKSB8fCBcIlwiLFxuICAgICAgICB9O1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuaW5mbyhcIk5vIGN1c3RvbSBxdWFydGVybHkgbm90ZSBzZXR0aW5ncyBmb3VuZCFcIiwgZXJyKTtcbiAgICB9XG59XG4vKipcbiAqIFJlYWQgdGhlIHVzZXIgc2V0dGluZ3MgZm9yIHRoZSBgcGVyaW9kaWMtbm90ZXNgIHBsdWdpblxuICogdG8ga2VlcCBiZWhhdmlvciBvZiBjcmVhdGluZyBhIG5ldyBub3RlIGluLXN5bmMuXG4gKi9cbmZ1bmN0aW9uIGdldFllYXJseU5vdGVTZXR0aW5ncygpIHtcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBsdWdpbk1hbmFnZXIgPSB3aW5kb3cuYXBwLnBsdWdpbnM7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3Qgc2V0dGluZ3MgPSAoc2hvdWxkVXNlUGVyaW9kaWNOb3Rlc1NldHRpbmdzKFwieWVhcmx5XCIpICYmXG4gICAgICAgICAgICBwbHVnaW5NYW5hZ2VyLmdldFBsdWdpbihcInBlcmlvZGljLW5vdGVzXCIpPy5zZXR0aW5ncz8ueWVhcmx5KSB8fFxuICAgICAgICAgICAge307XG4gICAgICAgIHJldHVybiB7XG4gICAgICAgICAgICBmb3JtYXQ6IHNldHRpbmdzLmZvcm1hdCB8fCBERUZBVUxUX1lFQVJMWV9OT1RFX0ZPUk1BVCxcbiAgICAgICAgICAgIGZvbGRlcjogc2V0dGluZ3MuZm9sZGVyPy50cmltKCkgfHwgXCJcIixcbiAgICAgICAgICAgIHRlbXBsYXRlOiBzZXR0aW5ncy50ZW1wbGF0ZT8udHJpbSgpIHx8IFwiXCIsXG4gICAgICAgIH07XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5pbmZvKFwiTm8gY3VzdG9tIHllYXJseSBub3RlIHNldHRpbmdzIGZvdW5kIVwiLCBlcnIpO1xuICAgIH1cbn1cblxuLy8gQ3JlZGl0OiBAY3JlYXRpb25peC9wYXRoLmpzXG5mdW5jdGlvbiBqb2luKC4uLnBhcnRTZWdtZW50cykge1xuICAgIC8vIFNwbGl0IHRoZSBpbnB1dHMgaW50byBhIGxpc3Qgb2YgcGF0aCBjb21tYW5kcy5cbiAgICBsZXQgcGFydHMgPSBbXTtcbiAgICBmb3IgKGxldCBpID0gMCwgbCA9IHBhcnRTZWdtZW50cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgcGFydHMgPSBwYXJ0cy5jb25jYXQocGFydFNlZ21lbnRzW2ldLnNwbGl0KFwiL1wiKSk7XG4gICAgfVxuICAgIC8vIEludGVycHJldCB0aGUgcGF0aCBjb21tYW5kcyB0byBnZXQgdGhlIG5ldyByZXNvbHZlZCBwYXRoLlxuICAgIGNvbnN0IG5ld1BhcnRzID0gW107XG4gICAgZm9yIChsZXQgaSA9IDAsIGwgPSBwYXJ0cy5sZW5ndGg7IGkgPCBsOyBpKyspIHtcbiAgICAgICAgY29uc3QgcGFydCA9IHBhcnRzW2ldO1xuICAgICAgICAvLyBSZW1vdmUgbGVhZGluZyBhbmQgdHJhaWxpbmcgc2xhc2hlc1xuICAgICAgICAvLyBBbHNvIHJlbW92ZSBcIi5cIiBzZWdtZW50c1xuICAgICAgICBpZiAoIXBhcnQgfHwgcGFydCA9PT0gXCIuXCIpXG4gICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgLy8gUHVzaCBuZXcgcGF0aCBzZWdtZW50cy5cbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbmV3UGFydHMucHVzaChwYXJ0KTtcbiAgICB9XG4gICAgLy8gUHJlc2VydmUgdGhlIGluaXRpYWwgc2xhc2ggaWYgdGhlcmUgd2FzIG9uZS5cbiAgICBpZiAocGFydHNbMF0gPT09IFwiXCIpXG4gICAgICAgIG5ld1BhcnRzLnVuc2hpZnQoXCJcIik7XG4gICAgLy8gVHVybiBiYWNrIGludG8gYSBzaW5nbGUgc3RyaW5nIHBhdGguXG4gICAgcmV0dXJuIG5ld1BhcnRzLmpvaW4oXCIvXCIpO1xufVxuZnVuY3Rpb24gYmFzZW5hbWUoZnVsbFBhdGgpIHtcbiAgICBsZXQgYmFzZSA9IGZ1bGxQYXRoLnN1YnN0cmluZyhmdWxsUGF0aC5sYXN0SW5kZXhPZihcIi9cIikgKyAxKTtcbiAgICBpZiAoYmFzZS5sYXN0SW5kZXhPZihcIi5cIikgIT0gLTEpXG4gICAgICAgIGJhc2UgPSBiYXNlLnN1YnN0cmluZygwLCBiYXNlLmxhc3RJbmRleE9mKFwiLlwiKSk7XG4gICAgcmV0dXJuIGJhc2U7XG59XG5hc3luYyBmdW5jdGlvbiBlbnN1cmVGb2xkZXJFeGlzdHMocGF0aCkge1xuICAgIGNvbnN0IGRpcnMgPSBwYXRoLnJlcGxhY2UoL1xcXFwvZywgXCIvXCIpLnNwbGl0KFwiL1wiKTtcbiAgICBkaXJzLnBvcCgpOyAvLyByZW1vdmUgYmFzZW5hbWVcbiAgICBpZiAoZGlycy5sZW5ndGgpIHtcbiAgICAgICAgY29uc3QgZGlyID0gam9pbiguLi5kaXJzKTtcbiAgICAgICAgaWYgKCF3aW5kb3cuYXBwLnZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChkaXIpKSB7XG4gICAgICAgICAgICBhd2FpdCB3aW5kb3cuYXBwLnZhdWx0LmNyZWF0ZUZvbGRlcihkaXIpO1xuICAgICAgICB9XG4gICAgfVxufVxuYXN5bmMgZnVuY3Rpb24gZ2V0Tm90ZVBhdGgoZGlyZWN0b3J5LCBmaWxlbmFtZSkge1xuICAgIGlmICghZmlsZW5hbWUuZW5kc1dpdGgoXCIubWRcIikpIHtcbiAgICAgICAgZmlsZW5hbWUgKz0gXCIubWRcIjtcbiAgICB9XG4gICAgY29uc3QgcGF0aCA9IG9ic2lkaWFuLm5vcm1hbGl6ZVBhdGgoam9pbihkaXJlY3RvcnksIGZpbGVuYW1lKSk7XG4gICAgYXdhaXQgZW5zdXJlRm9sZGVyRXhpc3RzKHBhdGgpO1xuICAgIHJldHVybiBwYXRoO1xufVxuYXN5bmMgZnVuY3Rpb24gZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKSB7XG4gICAgY29uc3QgeyBtZXRhZGF0YUNhY2hlLCB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB0ZW1wbGF0ZVBhdGggPSBvYnNpZGlhbi5ub3JtYWxpemVQYXRoKHRlbXBsYXRlKTtcbiAgICBpZiAodGVtcGxhdGVQYXRoID09PSBcIi9cIikge1xuICAgICAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKFtcIlwiLCBudWxsXSk7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IHRlbXBsYXRlRmlsZSA9IG1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QodGVtcGxhdGVQYXRoLCBcIlwiKTtcbiAgICAgICAgY29uc3QgY29udGVudHMgPSBhd2FpdCB2YXVsdC5jYWNoZWRSZWFkKHRlbXBsYXRlRmlsZSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIGNvbnN0IElGb2xkSW5mbyA9IHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIubG9hZCh0ZW1wbGF0ZUZpbGUpO1xuICAgICAgICByZXR1cm4gW2NvbnRlbnRzLCBJRm9sZEluZm9dO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byByZWFkIHRoZSBkYWlseSBub3RlIHRlbXBsYXRlICcke3RlbXBsYXRlUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIkZhaWxlZCB0byByZWFkIHRoZSBkYWlseSBub3RlIHRlbXBsYXRlXCIpO1xuICAgICAgICByZXR1cm4gW1wiXCIsIG51bGxdO1xuICAgIH1cbn1cblxuLyoqXG4gKiBkYXRlVUlEIGlzIGEgd2F5IG9mIHdlZWtseSBpZGVudGlmeWluZyBkYWlseS93ZWVrbHkvbW9udGhseSBub3Rlcy5cbiAqIFRoZXkgYXJlIHByZWZpeGVkIHdpdGggdGhlIGdyYW51bGFyaXR5IHRvIGF2b2lkIGFtYmlndWl0eS5cbiAqL1xuZnVuY3Rpb24gZ2V0RGF0ZVVJRChkYXRlLCBncmFudWxhcml0eSA9IFwiZGF5XCIpIHtcbiAgICBjb25zdCB0cyA9IGRhdGUuY2xvbmUoKS5zdGFydE9mKGdyYW51bGFyaXR5KS5mb3JtYXQoKTtcbiAgICByZXR1cm4gYCR7Z3JhbnVsYXJpdHl9LSR7dHN9YDtcbn1cbmZ1bmN0aW9uIHJlbW92ZUVzY2FwZWRDaGFyYWN0ZXJzKGZvcm1hdCkge1xuICAgIHJldHVybiBmb3JtYXQucmVwbGFjZSgvXFxbW15cXF1dKlxcXS9nLCBcIlwiKTsgLy8gcmVtb3ZlIGV2ZXJ5dGhpbmcgd2l0aGluIGJyYWNrZXRzXG59XG4vKipcbiAqIFhYWDogV2hlbiBwYXJzaW5nIGRhdGVzIHRoYXQgY29udGFpbiBib3RoIHdlZWsgbnVtYmVycyBhbmQgbW9udGhzLFxuICogTW9tZW50IGNob3NlcyB0byBpZ25vcmUgdGhlIHdlZWsgbnVtYmVycy4gRm9yIHRoZSB3ZWVrIGRhdGVVSUQsIHdlXG4gKiB3YW50IHRoZSBvcHBvc2l0ZSBiZWhhdmlvci4gU3RyaXAgdGhlIE1NTSBmcm9tIHRoZSBmb3JtYXQgdG8gcGF0Y2guXG4gKi9cbmZ1bmN0aW9uIGlzRm9ybWF0QW1iaWd1b3VzKGZvcm1hdCwgZ3JhbnVsYXJpdHkpIHtcbiAgICBpZiAoZ3JhbnVsYXJpdHkgPT09IFwid2Vla1wiKSB7XG4gICAgICAgIGNvbnN0IGNsZWFuRm9ybWF0ID0gcmVtb3ZlRXNjYXBlZENoYXJhY3RlcnMoZm9ybWF0KTtcbiAgICAgICAgcmV0dXJuICgvd3sxLDJ9L2kudGVzdChjbGVhbkZvcm1hdCkgJiZcbiAgICAgICAgICAgICgvTXsxLDR9Ly50ZXN0KGNsZWFuRm9ybWF0KSB8fCAvRHsxLDR9Ly50ZXN0KGNsZWFuRm9ybWF0KSkpO1xuICAgIH1cbiAgICByZXR1cm4gZmFsc2U7XG59XG5mdW5jdGlvbiBnZXREYXRlRnJvbUZpbGUoZmlsZSwgZ3JhbnVsYXJpdHkpIHtcbiAgICByZXR1cm4gZ2V0RGF0ZUZyb21GaWxlbmFtZShmaWxlLmJhc2VuYW1lLCBncmFudWxhcml0eSk7XG59XG5mdW5jdGlvbiBnZXREYXRlRnJvbVBhdGgocGF0aCwgZ3JhbnVsYXJpdHkpIHtcbiAgICByZXR1cm4gZ2V0RGF0ZUZyb21GaWxlbmFtZShiYXNlbmFtZShwYXRoKSwgZ3JhbnVsYXJpdHkpO1xufVxuZnVuY3Rpb24gZ2V0RGF0ZUZyb21GaWxlbmFtZShmaWxlbmFtZSwgZ3JhbnVsYXJpdHkpIHtcbiAgICBjb25zdCBnZXRTZXR0aW5ncyA9IHtcbiAgICAgICAgZGF5OiBnZXREYWlseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgd2VlazogZ2V0V2Vla2x5Tm90ZVNldHRpbmdzLFxuICAgICAgICBtb250aDogZ2V0TW9udGhseU5vdGVTZXR0aW5ncyxcbiAgICAgICAgcXVhcnRlcjogZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzLFxuICAgICAgICB5ZWFyOiBnZXRZZWFybHlOb3RlU2V0dGluZ3MsXG4gICAgfTtcbiAgICBjb25zdCBmb3JtYXQgPSBnZXRTZXR0aW5nc1tncmFudWxhcml0eV0oKS5mb3JtYXQuc3BsaXQoXCIvXCIpLnBvcCgpO1xuICAgIGNvbnN0IG5vdGVEYXRlID0gd2luZG93Lm1vbWVudChmaWxlbmFtZSwgZm9ybWF0LCB0cnVlKTtcbiAgICBpZiAoIW5vdGVEYXRlLmlzVmFsaWQoKSkge1xuICAgICAgICByZXR1cm4gbnVsbDtcbiAgICB9XG4gICAgaWYgKGlzRm9ybWF0QW1iaWd1b3VzKGZvcm1hdCwgZ3JhbnVsYXJpdHkpKSB7XG4gICAgICAgIGlmIChncmFudWxhcml0eSA9PT0gXCJ3ZWVrXCIpIHtcbiAgICAgICAgICAgIGNvbnN0IGNsZWFuRm9ybWF0ID0gcmVtb3ZlRXNjYXBlZENoYXJhY3RlcnMoZm9ybWF0KTtcbiAgICAgICAgICAgIGlmICgvd3sxLDJ9L2kudGVzdChjbGVhbkZvcm1hdCkpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gd2luZG93Lm1vbWVudChmaWxlbmFtZSwgXG4gICAgICAgICAgICAgICAgLy8gSWYgZm9ybWF0IGNvbnRhaW5zIHdlZWssIHJlbW92ZSBkYXkgJiBtb250aCBmb3JtYXR0aW5nXG4gICAgICAgICAgICAgICAgZm9ybWF0LnJlcGxhY2UoL017MSw0fS9nLCBcIlwiKS5yZXBsYWNlKC9EezEsNH0vZywgXCJcIiksIGZhbHNlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gbm90ZURhdGU7XG59XG5cbmNsYXNzIERhaWx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG4vKipcbiAqIFRoaXMgZnVuY3Rpb24gbWltaWNzIHRoZSBiZWhhdmlvciBvZiB0aGUgZGFpbHktbm90ZXMgcGx1Z2luXG4gKiBzbyBpdCB3aWxsIHJlcGxhY2Uge3tkYXRlfX0sIHt7dGl0bGV9fSwgYW5kIHt7dGltZX19IHdpdGggdGhlXG4gKiBmb3JtYXR0ZWQgdGltZXN0YW1wLlxuICpcbiAqIE5vdGU6IGl0IGhhcyBhbiBhZGRlZCBib251cyB0aGF0IGl0J3Mgbm90ICd0b2RheScgc3BlY2lmaWMuXG4gKi9cbmFzeW5jIGZ1bmN0aW9uIGNyZWF0ZURhaWx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgYXBwID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSBhcHA7XG4gICAgY29uc3QgbW9tZW50ID0gd2luZG93Lm1vbWVudDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0RGFpbHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccypkYXRlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCBtb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gbW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp5ZXN0ZXJkYXlcXHMqfX0vZ2ksIGRhdGUuY2xvbmUoKS5zdWJ0cmFjdCgxLCBcImRheVwiKS5mb3JtYXQoZm9ybWF0KSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0b21vcnJvd1xccyp9fS9naSwgZGF0ZS5jbG9uZSgpLmFkZCgxLCBcImRcIikuZm9ybWF0KGZvcm1hdCkpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0RGFpbHlOb3RlKGRhdGUsIGRhaWx5Tm90ZXMpIHtcbiAgICByZXR1cm4gZGFpbHlOb3Rlc1tnZXREYXRlVUlEKGRhdGUsIFwiZGF5XCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsRGFpbHlOb3RlcygpIHtcbiAgICAvKipcbiAgICAgKiBGaW5kIGFsbCBkYWlseSBub3RlcyBpbiB0aGUgZGFpbHkgbm90ZSBmb2xkZXJcbiAgICAgKi9cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXREYWlseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IGRhaWx5Tm90ZXNGb2xkZXIgPSB2YXVsdC5nZXRBYnN0cmFjdEZpbGVCeVBhdGgob2JzaWRpYW4ubm9ybWFsaXplUGF0aChmb2xkZXIpKTtcbiAgICBpZiAoIWRhaWx5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IERhaWx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCBkYWlseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIGNvbnN0IGRhaWx5Tm90ZXMgPSB7fTtcbiAgICBvYnNpZGlhbi5WYXVsdC5yZWN1cnNlQ2hpbGRyZW4oZGFpbHlOb3Rlc0ZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcImRheVwiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJkYXlcIik7XG4gICAgICAgICAgICAgICAgZGFpbHlOb3Rlc1tkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gZGFpbHlOb3Rlcztcbn1cblxuY2xhc3MgV2Vla2x5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IgZXh0ZW5kcyBFcnJvciB7XG59XG5mdW5jdGlvbiBnZXREYXlzT2ZXZWVrKCkge1xuICAgIGNvbnN0IHsgbW9tZW50IH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBsZXQgd2Vla1N0YXJ0ID0gbW9tZW50LmxvY2FsZURhdGEoKS5fd2Vlay5kb3c7XG4gICAgY29uc3QgZGF5c09mV2VlayA9IFtcbiAgICAgICAgXCJzdW5kYXlcIixcbiAgICAgICAgXCJtb25kYXlcIixcbiAgICAgICAgXCJ0dWVzZGF5XCIsXG4gICAgICAgIFwid2VkbmVzZGF5XCIsXG4gICAgICAgIFwidGh1cnNkYXlcIixcbiAgICAgICAgXCJmcmlkYXlcIixcbiAgICAgICAgXCJzYXR1cmRheVwiLFxuICAgIF07XG4gICAgd2hpbGUgKHdlZWtTdGFydCkge1xuICAgICAgICBkYXlzT2ZXZWVrLnB1c2goZGF5c09mV2Vlay5zaGlmdCgpKTtcbiAgICAgICAgd2Vla1N0YXJ0LS07XG4gICAgfVxuICAgIHJldHVybiBkYXlzT2ZXZWVrO1xufVxuZnVuY3Rpb24gZ2V0RGF5T2ZXZWVrTnVtZXJpY2FsVmFsdWUoZGF5T2ZXZWVrTmFtZSkge1xuICAgIHJldHVybiBnZXREYXlzT2ZXZWVrKCkuaW5kZXhPZihkYXlPZldlZWtOYW1lLnRvTG93ZXJDYXNlKCkpO1xufVxuYXN5bmMgZnVuY3Rpb24gY3JlYXRlV2Vla2x5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0V2Vla2x5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooc3VuZGF5fG1vbmRheXx0dWVzZGF5fHdlZG5lc2RheXx0aHVyc2RheXxmcmlkYXl8c2F0dXJkYXkpXFxzKjooLio/KX19L2dpLCAoXywgZGF5T2ZXZWVrLCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IGRheSA9IGdldERheU9mV2Vla051bWVyaWNhbFZhbHVlKGRheU9mV2Vlayk7XG4gICAgICAgICAgICByZXR1cm4gZGF0ZS53ZWVrZGF5KGRheSkuZm9ybWF0KG1vbWVudEZvcm1hdC50cmltKCkpO1xuICAgICAgICB9KSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRXZWVrbHlOb3RlKGRhdGUsIHdlZWtseU5vdGVzKSB7XG4gICAgcmV0dXJuIHdlZWtseU5vdGVzW2dldERhdGVVSUQoZGF0ZSwgXCJ3ZWVrXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsV2Vla2x5Tm90ZXMoKSB7XG4gICAgY29uc3Qgd2Vla2x5Tm90ZXMgPSB7fTtcbiAgICBpZiAoIWFwcEhhc1dlZWtseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHdlZWtseU5vdGVzO1xuICAgIH1cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXRXZWVrbHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCB3ZWVrbHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghd2Vla2x5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFdlZWtseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgd2Vla2x5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKHdlZWtseU5vdGVzRm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwid2Vla1wiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJ3ZWVrXCIpO1xuICAgICAgICAgICAgICAgIHdlZWtseU5vdGVzW2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB3ZWVrbHlOb3Rlcztcbn1cblxuY2xhc3MgTW9udGhseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIG1pbWljcyB0aGUgYmVoYXZpb3Igb2YgdGhlIGRhaWx5LW5vdGVzIHBsdWdpblxuICogc28gaXQgd2lsbCByZXBsYWNlIHt7ZGF0ZX19LCB7e3RpdGxlfX0sIGFuZCB7e3RpbWV9fSB3aXRoIHRoZVxuICogZm9ybWF0dGVkIHRpbWVzdGFtcC5cbiAqXG4gKiBOb3RlOiBpdCBoYXMgYW4gYWRkZWQgYm9udXMgdGhhdCBpdCdzIG5vdCAndG9kYXknIHNwZWNpZmljLlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVNb250aGx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0TW9udGhseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IFt0ZW1wbGF0ZUNvbnRlbnRzLCBJRm9sZEluZm9dID0gYXdhaXQgZ2V0VGVtcGxhdGVJbmZvKHRlbXBsYXRlKTtcbiAgICBjb25zdCBmaWxlbmFtZSA9IGRhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgY29uc3Qgbm9ybWFsaXplZFBhdGggPSBhd2FpdCBnZXROb3RlUGF0aChmb2xkZXIsIGZpbGVuYW1lKTtcbiAgICB0cnkge1xuICAgICAgICBjb25zdCBjcmVhdGVkRmlsZSA9IGF3YWl0IHZhdWx0LmNyZWF0ZShub3JtYWxpemVkUGF0aCwgdGVtcGxhdGVDb250ZW50c1xuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKihkYXRlfHRpbWUpXFxzKigoWystXVxcZCspKFt5cW13ZGhzXSkpP1xccyooOi4rPyk/fX0vZ2ksIChfLCBfdGltZU9yRGF0ZSwgY2FsYywgdGltZURlbHRhLCB1bml0LCBtb21lbnRGb3JtYXQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IG5vdyA9IHdpbmRvdy5tb21lbnQoKTtcbiAgICAgICAgICAgIGNvbnN0IGN1cnJlbnREYXRlID0gZGF0ZS5jbG9uZSgpLnNldCh7XG4gICAgICAgICAgICAgICAgaG91cjogbm93LmdldChcImhvdXJcIiksXG4gICAgICAgICAgICAgICAgbWludXRlOiBub3cuZ2V0KFwibWludXRlXCIpLFxuICAgICAgICAgICAgICAgIHNlY29uZDogbm93LmdldChcInNlY29uZFwiKSxcbiAgICAgICAgICAgIH0pO1xuICAgICAgICAgICAgaWYgKGNhbGMpIHtcbiAgICAgICAgICAgICAgICBjdXJyZW50RGF0ZS5hZGQocGFyc2VJbnQodGltZURlbHRhLCAxMCksIHVuaXQpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgaWYgKG1vbWVudEZvcm1hdCkge1xuICAgICAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQobW9tZW50Rm9ybWF0LnN1YnN0cmluZygxKS50cmltKCkpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgICAgICB9KVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKmRhdGVcXHMqfX0vZ2ksIGZpbGVuYW1lKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpbWVcXHMqfX0vZ2ksIHdpbmRvdy5tb21lbnQoKS5mb3JtYXQoXCJISDptbVwiKSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aXRsZVxccyp9fS9naSwgZmlsZW5hbWUpKTtcbiAgICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICAgICAgd2luZG93LmFwcC5mb2xkTWFuYWdlci5zYXZlKGNyZWF0ZWRGaWxlLCBJRm9sZEluZm8pO1xuICAgICAgICByZXR1cm4gY3JlYXRlZEZpbGU7XG4gICAgfVxuICAgIGNhdGNoIChlcnIpIHtcbiAgICAgICAgY29uc29sZS5lcnJvcihgRmFpbGVkIHRvIGNyZWF0ZSBmaWxlOiAnJHtub3JtYWxpemVkUGF0aH0nYCwgZXJyKTtcbiAgICAgICAgbmV3IG9ic2lkaWFuLk5vdGljZShcIlVuYWJsZSB0byBjcmVhdGUgbmV3IGZpbGUuXCIpO1xuICAgIH1cbn1cbmZ1bmN0aW9uIGdldE1vbnRobHlOb3RlKGRhdGUsIG1vbnRobHlOb3Rlcykge1xuICAgIHJldHVybiBtb250aGx5Tm90ZXNbZ2V0RGF0ZVVJRChkYXRlLCBcIm1vbnRoXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsTW9udGhseU5vdGVzKCkge1xuICAgIGNvbnN0IG1vbnRobHlOb3RlcyA9IHt9O1xuICAgIGlmICghYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIG1vbnRobHlOb3RlcztcbiAgICB9XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IGZvbGRlciB9ID0gZ2V0TW9udGhseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IG1vbnRobHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghbW9udGhseU5vdGVzRm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBNb250aGx5Tm90ZXNGb2xkZXJNaXNzaW5nRXJyb3IoXCJGYWlsZWQgdG8gZmluZCBtb250aGx5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKG1vbnRobHlOb3Rlc0ZvbGRlciwgKG5vdGUpID0+IHtcbiAgICAgICAgaWYgKG5vdGUgaW5zdGFuY2VvZiBvYnNpZGlhbi5URmlsZSkge1xuICAgICAgICAgICAgY29uc3QgZGF0ZSA9IGdldERhdGVGcm9tRmlsZShub3RlLCBcIm1vbnRoXCIpO1xuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gZ2V0RGF0ZVVJRChkYXRlLCBcIm1vbnRoXCIpO1xuICAgICAgICAgICAgICAgIG1vbnRobHlOb3Rlc1tkYXRlU3RyaW5nXSA9IG5vdGU7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9KTtcbiAgICByZXR1cm4gbW9udGhseU5vdGVzO1xufVxuXG5jbGFzcyBRdWFydGVybHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvciBleHRlbmRzIEVycm9yIHtcbn1cbi8qKlxuICogVGhpcyBmdW5jdGlvbiBtaW1pY3MgdGhlIGJlaGF2aW9yIG9mIHRoZSBkYWlseS1ub3RlcyBwbHVnaW5cbiAqIHNvIGl0IHdpbGwgcmVwbGFjZSB7e2RhdGV9fSwge3t0aXRsZX19LCBhbmQge3t0aW1lfX0gd2l0aCB0aGVcbiAqIGZvcm1hdHRlZCB0aW1lc3RhbXAuXG4gKlxuICogTm90ZTogaXQgaGFzIGFuIGFkZGVkIGJvbnVzIHRoYXQgaXQncyBub3QgJ3RvZGF5JyBzcGVjaWZpYy5cbiAqL1xuYXN5bmMgZnVuY3Rpb24gY3JlYXRlUXVhcnRlcmx5Tm90ZShkYXRlKSB7XG4gICAgY29uc3QgeyB2YXVsdCB9ID0gd2luZG93LmFwcDtcbiAgICBjb25zdCB7IHRlbXBsYXRlLCBmb3JtYXQsIGZvbGRlciB9ID0gZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzKCk7XG4gICAgY29uc3QgW3RlbXBsYXRlQ29udGVudHMsIElGb2xkSW5mb10gPSBhd2FpdCBnZXRUZW1wbGF0ZUluZm8odGVtcGxhdGUpO1xuICAgIGNvbnN0IGZpbGVuYW1lID0gZGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICBjb25zdCBub3JtYWxpemVkUGF0aCA9IGF3YWl0IGdldE5vdGVQYXRoKGZvbGRlciwgZmlsZW5hbWUpO1xuICAgIHRyeSB7XG4gICAgICAgIGNvbnN0IGNyZWF0ZWRGaWxlID0gYXdhaXQgdmF1bHQuY3JlYXRlKG5vcm1hbGl6ZWRQYXRoLCB0ZW1wbGF0ZUNvbnRlbnRzXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqKGRhdGV8dGltZSlcXHMqKChbKy1dXFxkKykoW3lxbXdkaHNdKSk/XFxzKig6Lis/KT99fS9naSwgKF8sIF90aW1lT3JEYXRlLCBjYWxjLCB0aW1lRGVsdGEsIHVuaXQsIG1vbWVudEZvcm1hdCkgPT4ge1xuICAgICAgICAgICAgY29uc3Qgbm93ID0gd2luZG93Lm1vbWVudCgpO1xuICAgICAgICAgICAgY29uc3QgY3VycmVudERhdGUgPSBkYXRlLmNsb25lKCkuc2V0KHtcbiAgICAgICAgICAgICAgICBob3VyOiBub3cuZ2V0KFwiaG91clwiKSxcbiAgICAgICAgICAgICAgICBtaW51dGU6IG5vdy5nZXQoXCJtaW51dGVcIiksXG4gICAgICAgICAgICAgICAgc2Vjb25kOiBub3cuZ2V0KFwic2Vjb25kXCIpLFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICBpZiAoY2FsYykge1xuICAgICAgICAgICAgICAgIGN1cnJlbnREYXRlLmFkZChwYXJzZUludCh0aW1lRGVsdGEsIDEwKSwgdW5pdCk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAobW9tZW50Rm9ybWF0KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGN1cnJlbnREYXRlLmZvcm1hdChtb21lbnRGb3JtYXQuc3Vic3RyaW5nKDEpLnRyaW0oKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KGZvcm1hdCk7XG4gICAgICAgIH0pXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqZGF0ZVxccyp9fS9naSwgZmlsZW5hbWUpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGltZVxccyp9fS9naSwgd2luZG93Lm1vbWVudCgpLmZvcm1hdChcIkhIOm1tXCIpKVxuICAgICAgICAgICAgLnJlcGxhY2UoL3t7XFxzKnRpdGxlXFxzKn19L2dpLCBmaWxlbmFtZSkpO1xuICAgICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgICAgICB3aW5kb3cuYXBwLmZvbGRNYW5hZ2VyLnNhdmUoY3JlYXRlZEZpbGUsIElGb2xkSW5mbyk7XG4gICAgICAgIHJldHVybiBjcmVhdGVkRmlsZTtcbiAgICB9XG4gICAgY2F0Y2ggKGVycikge1xuICAgICAgICBjb25zb2xlLmVycm9yKGBGYWlsZWQgdG8gY3JlYXRlIGZpbGU6ICcke25vcm1hbGl6ZWRQYXRofSdgLCBlcnIpO1xuICAgICAgICBuZXcgb2JzaWRpYW4uTm90aWNlKFwiVW5hYmxlIHRvIGNyZWF0ZSBuZXcgZmlsZS5cIik7XG4gICAgfVxufVxuZnVuY3Rpb24gZ2V0UXVhcnRlcmx5Tm90ZShkYXRlLCBxdWFydGVybHkpIHtcbiAgICByZXR1cm4gcXVhcnRlcmx5W2dldERhdGVVSUQoZGF0ZSwgXCJxdWFydGVyXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsUXVhcnRlcmx5Tm90ZXMoKSB7XG4gICAgY29uc3QgcXVhcnRlcmx5ID0ge307XG4gICAgaWYgKCFhcHBIYXNRdWFydGVybHlOb3Rlc1BsdWdpbkxvYWRlZCgpKSB7XG4gICAgICAgIHJldHVybiBxdWFydGVybHk7XG4gICAgfVxuICAgIGNvbnN0IHsgdmF1bHQgfSA9IHdpbmRvdy5hcHA7XG4gICAgY29uc3QgeyBmb2xkZXIgfSA9IGdldFF1YXJ0ZXJseU5vdGVTZXR0aW5ncygpO1xuICAgIGNvbnN0IHF1YXJ0ZXJseUZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICghcXVhcnRlcmx5Rm9sZGVyKSB7XG4gICAgICAgIHRocm93IG5ldyBRdWFydGVybHlOb3Rlc0ZvbGRlck1pc3NpbmdFcnJvcihcIkZhaWxlZCB0byBmaW5kIHF1YXJ0ZXJseSBub3RlcyBmb2xkZXJcIik7XG4gICAgfVxuICAgIG9ic2lkaWFuLlZhdWx0LnJlY3Vyc2VDaGlsZHJlbihxdWFydGVybHlGb2xkZXIsIChub3RlKSA9PiB7XG4gICAgICAgIGlmIChub3RlIGluc3RhbmNlb2Ygb2JzaWRpYW4uVEZpbGUpIHtcbiAgICAgICAgICAgIGNvbnN0IGRhdGUgPSBnZXREYXRlRnJvbUZpbGUobm90ZSwgXCJxdWFydGVyXCIpO1xuICAgICAgICAgICAgaWYgKGRhdGUpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBkYXRlU3RyaW5nID0gZ2V0RGF0ZVVJRChkYXRlLCBcInF1YXJ0ZXJcIik7XG4gICAgICAgICAgICAgICAgcXVhcnRlcmx5W2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiBxdWFydGVybHk7XG59XG5cbmNsYXNzIFllYXJseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yIGV4dGVuZHMgRXJyb3Ige1xufVxuLyoqXG4gKiBUaGlzIGZ1bmN0aW9uIG1pbWljcyB0aGUgYmVoYXZpb3Igb2YgdGhlIGRhaWx5LW5vdGVzIHBsdWdpblxuICogc28gaXQgd2lsbCByZXBsYWNlIHt7ZGF0ZX19LCB7e3RpdGxlfX0sIGFuZCB7e3RpbWV9fSB3aXRoIHRoZVxuICogZm9ybWF0dGVkIHRpbWVzdGFtcC5cbiAqXG4gKiBOb3RlOiBpdCBoYXMgYW4gYWRkZWQgYm9udXMgdGhhdCBpdCdzIG5vdCAndG9kYXknIHNwZWNpZmljLlxuICovXG5hc3luYyBmdW5jdGlvbiBjcmVhdGVZZWFybHlOb3RlKGRhdGUpIHtcbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgdGVtcGxhdGUsIGZvcm1hdCwgZm9sZGVyIH0gPSBnZXRZZWFybHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCBbdGVtcGxhdGVDb250ZW50cywgSUZvbGRJbmZvXSA9IGF3YWl0IGdldFRlbXBsYXRlSW5mbyh0ZW1wbGF0ZSk7XG4gICAgY29uc3QgZmlsZW5hbWUgPSBkYXRlLmZvcm1hdChmb3JtYXQpO1xuICAgIGNvbnN0IG5vcm1hbGl6ZWRQYXRoID0gYXdhaXQgZ2V0Tm90ZVBhdGgoZm9sZGVyLCBmaWxlbmFtZSk7XG4gICAgdHJ5IHtcbiAgICAgICAgY29uc3QgY3JlYXRlZEZpbGUgPSBhd2FpdCB2YXVsdC5jcmVhdGUobm9ybWFsaXplZFBhdGgsIHRlbXBsYXRlQ29udGVudHNcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyooZGF0ZXx0aW1lKVxccyooKFsrLV1cXGQrKShbeXFtd2Roc10pKT9cXHMqKDouKz8pP319L2dpLCAoXywgX3RpbWVPckRhdGUsIGNhbGMsIHRpbWVEZWx0YSwgdW5pdCwgbW9tZW50Rm9ybWF0KSA9PiB7XG4gICAgICAgICAgICBjb25zdCBub3cgPSB3aW5kb3cubW9tZW50KCk7XG4gICAgICAgICAgICBjb25zdCBjdXJyZW50RGF0ZSA9IGRhdGUuY2xvbmUoKS5zZXQoe1xuICAgICAgICAgICAgICAgIGhvdXI6IG5vdy5nZXQoXCJob3VyXCIpLFxuICAgICAgICAgICAgICAgIG1pbnV0ZTogbm93LmdldChcIm1pbnV0ZVwiKSxcbiAgICAgICAgICAgICAgICBzZWNvbmQ6IG5vdy5nZXQoXCJzZWNvbmRcIiksXG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICAgIGlmIChjYWxjKSB7XG4gICAgICAgICAgICAgICAgY3VycmVudERhdGUuYWRkKHBhcnNlSW50KHRpbWVEZWx0YSwgMTApLCB1bml0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChtb21lbnRGb3JtYXQpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gY3VycmVudERhdGUuZm9ybWF0KG1vbWVudEZvcm1hdC5zdWJzdHJpbmcoMSkudHJpbSgpKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBjdXJyZW50RGF0ZS5mb3JtYXQoZm9ybWF0KTtcbiAgICAgICAgfSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccypkYXRlXFxzKn19L2dpLCBmaWxlbmFtZSlcbiAgICAgICAgICAgIC5yZXBsYWNlKC97e1xccyp0aW1lXFxzKn19L2dpLCB3aW5kb3cubW9tZW50KCkuZm9ybWF0KFwiSEg6bW1cIikpXG4gICAgICAgICAgICAucmVwbGFjZSgve3tcXHMqdGl0bGVcXHMqfX0vZ2ksIGZpbGVuYW1lKSk7XG4gICAgICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgICAgIHdpbmRvdy5hcHAuZm9sZE1hbmFnZXIuc2F2ZShjcmVhdGVkRmlsZSwgSUZvbGRJbmZvKTtcbiAgICAgICAgcmV0dXJuIGNyZWF0ZWRGaWxlO1xuICAgIH1cbiAgICBjYXRjaCAoZXJyKSB7XG4gICAgICAgIGNvbnNvbGUuZXJyb3IoYEZhaWxlZCB0byBjcmVhdGUgZmlsZTogJyR7bm9ybWFsaXplZFBhdGh9J2AsIGVycik7XG4gICAgICAgIG5ldyBvYnNpZGlhbi5Ob3RpY2UoXCJVbmFibGUgdG8gY3JlYXRlIG5ldyBmaWxlLlwiKTtcbiAgICB9XG59XG5mdW5jdGlvbiBnZXRZZWFybHlOb3RlKGRhdGUsIHllYXJseU5vdGVzKSB7XG4gICAgcmV0dXJuIHllYXJseU5vdGVzW2dldERhdGVVSUQoZGF0ZSwgXCJ5ZWFyXCIpXSA/PyBudWxsO1xufVxuZnVuY3Rpb24gZ2V0QWxsWWVhcmx5Tm90ZXMoKSB7XG4gICAgY29uc3QgeWVhcmx5Tm90ZXMgPSB7fTtcbiAgICBpZiAoIWFwcEhhc1llYXJseU5vdGVzUGx1Z2luTG9hZGVkKCkpIHtcbiAgICAgICAgcmV0dXJuIHllYXJseU5vdGVzO1xuICAgIH1cbiAgICBjb25zdCB7IHZhdWx0IH0gPSB3aW5kb3cuYXBwO1xuICAgIGNvbnN0IHsgZm9sZGVyIH0gPSBnZXRZZWFybHlOb3RlU2V0dGluZ3MoKTtcbiAgICBjb25zdCB5ZWFybHlOb3Rlc0ZvbGRlciA9IHZhdWx0LmdldEFic3RyYWN0RmlsZUJ5UGF0aChvYnNpZGlhbi5ub3JtYWxpemVQYXRoKGZvbGRlcikpO1xuICAgIGlmICgheWVhcmx5Tm90ZXNGb2xkZXIpIHtcbiAgICAgICAgdGhyb3cgbmV3IFllYXJseU5vdGVzRm9sZGVyTWlzc2luZ0Vycm9yKFwiRmFpbGVkIHRvIGZpbmQgeWVhcmx5IG5vdGVzIGZvbGRlclwiKTtcbiAgICB9XG4gICAgb2JzaWRpYW4uVmF1bHQucmVjdXJzZUNoaWxkcmVuKHllYXJseU5vdGVzRm9sZGVyLCAobm90ZSkgPT4ge1xuICAgICAgICBpZiAobm90ZSBpbnN0YW5jZW9mIG9ic2lkaWFuLlRGaWxlKSB7XG4gICAgICAgICAgICBjb25zdCBkYXRlID0gZ2V0RGF0ZUZyb21GaWxlKG5vdGUsIFwieWVhclwiKTtcbiAgICAgICAgICAgIGlmIChkYXRlKSB7XG4gICAgICAgICAgICAgICAgY29uc3QgZGF0ZVN0cmluZyA9IGdldERhdGVVSUQoZGF0ZSwgXCJ5ZWFyXCIpO1xuICAgICAgICAgICAgICAgIHllYXJseU5vdGVzW2RhdGVTdHJpbmddID0gbm90ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH0pO1xuICAgIHJldHVybiB5ZWFybHlOb3Rlcztcbn1cblxuZnVuY3Rpb24gYXBwSGFzRGFpbHlOb3Rlc1BsdWdpbkxvYWRlZCgpIHtcbiAgICBjb25zdCB7IGFwcCB9ID0gd2luZG93O1xuICAgIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbm8tZXhwbGljaXQtYW55XG4gICAgY29uc3QgZGFpbHlOb3Rlc1BsdWdpbiA9IGFwcC5pbnRlcm5hbFBsdWdpbnMucGx1Z2luc1tcImRhaWx5LW5vdGVzXCJdO1xuICAgIGlmIChkYWlseU5vdGVzUGx1Z2luICYmIGRhaWx5Tm90ZXNQbHVnaW4uZW5hYmxlZCkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8uZGFpbHk/LmVuYWJsZWQ7XG59XG4vKipcbiAqIFhYWDogXCJXZWVrbHkgTm90ZXNcIiBsaXZlIGluIGVpdGhlciB0aGUgQ2FsZW5kYXIgcGx1Z2luIG9yIHRoZSBwZXJpb2RpYy1ub3RlcyBwbHVnaW4uXG4gKiBDaGVjayBib3RoIHVudGlsIHRoZSB3ZWVrbHkgbm90ZXMgZmVhdHVyZSBpcyByZW1vdmVkIGZyb20gdGhlIENhbGVuZGFyIHBsdWdpbi5cbiAqL1xuZnVuY3Rpb24gYXBwSGFzV2Vla2x5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGlmIChhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJjYWxlbmRhclwiKSkge1xuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ud2Vla2x5Py5lbmFibGVkO1xufVxuZnVuY3Rpb24gYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ubW9udGhseT8uZW5hYmxlZDtcbn1cbmZ1bmN0aW9uIGFwcEhhc1F1YXJ0ZXJseU5vdGVzUGx1Z2luTG9hZGVkKCkge1xuICAgIGNvbnN0IHsgYXBwIH0gPSB3aW5kb3c7XG4gICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIEB0eXBlc2NyaXB0LWVzbGludC9uby1leHBsaWNpdC1hbnlcbiAgICBjb25zdCBwZXJpb2RpY05vdGVzID0gYXBwLnBsdWdpbnMuZ2V0UGx1Z2luKFwicGVyaW9kaWMtbm90ZXNcIik7XG4gICAgcmV0dXJuIHBlcmlvZGljTm90ZXMgJiYgcGVyaW9kaWNOb3Rlcy5zZXR0aW5ncz8ucXVhcnRlcmx5Py5lbmFibGVkO1xufVxuZnVuY3Rpb24gYXBwSGFzWWVhcmx5Tm90ZXNQbHVnaW5Mb2FkZWQoKSB7XG4gICAgY29uc3QgeyBhcHAgfSA9IHdpbmRvdztcbiAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgQHR5cGVzY3JpcHQtZXNsaW50L25vLWV4cGxpY2l0LWFueVxuICAgIGNvbnN0IHBlcmlvZGljTm90ZXMgPSBhcHAucGx1Z2lucy5nZXRQbHVnaW4oXCJwZXJpb2RpYy1ub3Rlc1wiKTtcbiAgICByZXR1cm4gcGVyaW9kaWNOb3RlcyAmJiBwZXJpb2RpY05vdGVzLnNldHRpbmdzPy55ZWFybHk/LmVuYWJsZWQ7XG59XG5mdW5jdGlvbiBnZXRQZXJpb2RpY05vdGVTZXR0aW5ncyhncmFudWxhcml0eSkge1xuICAgIGNvbnN0IGdldFNldHRpbmdzID0ge1xuICAgICAgICBkYXk6IGdldERhaWx5Tm90ZVNldHRpbmdzLFxuICAgICAgICB3ZWVrOiBnZXRXZWVrbHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIG1vbnRoOiBnZXRNb250aGx5Tm90ZVNldHRpbmdzLFxuICAgICAgICBxdWFydGVyOiBnZXRRdWFydGVybHlOb3RlU2V0dGluZ3MsXG4gICAgICAgIHllYXI6IGdldFllYXJseU5vdGVTZXR0aW5ncyxcbiAgICB9W2dyYW51bGFyaXR5XTtcbiAgICByZXR1cm4gZ2V0U2V0dGluZ3MoKTtcbn1cbmZ1bmN0aW9uIGNyZWF0ZVBlcmlvZGljTm90ZShncmFudWxhcml0eSwgZGF0ZSkge1xuICAgIGNvbnN0IGNyZWF0ZUZuID0ge1xuICAgICAgICBkYXk6IGNyZWF0ZURhaWx5Tm90ZSxcbiAgICAgICAgbW9udGg6IGNyZWF0ZU1vbnRobHlOb3RlLFxuICAgICAgICB3ZWVrOiBjcmVhdGVXZWVrbHlOb3RlLFxuICAgIH07XG4gICAgcmV0dXJuIGNyZWF0ZUZuW2dyYW51bGFyaXR5XShkYXRlKTtcbn1cblxuZXhwb3J0cy5ERUZBVUxUX0RBSUxZX05PVEVfRk9STUFUID0gREVGQVVMVF9EQUlMWV9OT1RFX0ZPUk1BVDtcbmV4cG9ydHMuREVGQVVMVF9NT05USExZX05PVEVfRk9STUFUID0gREVGQVVMVF9NT05USExZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX1FVQVJURVJMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfUVVBUlRFUkxZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX1dFRUtMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfV0VFS0xZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5ERUZBVUxUX1lFQVJMWV9OT1RFX0ZPUk1BVCA9IERFRkFVTFRfWUVBUkxZX05PVEVfRk9STUFUO1xuZXhwb3J0cy5hcHBIYXNEYWlseU5vdGVzUGx1Z2luTG9hZGVkID0gYXBwSGFzRGFpbHlOb3Rlc1BsdWdpbkxvYWRlZDtcbmV4cG9ydHMuYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkID0gYXBwSGFzTW9udGhseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNRdWFydGVybHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc1F1YXJ0ZXJseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNXZWVrbHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc1dlZWtseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5hcHBIYXNZZWFybHlOb3Rlc1BsdWdpbkxvYWRlZCA9IGFwcEhhc1llYXJseU5vdGVzUGx1Z2luTG9hZGVkO1xuZXhwb3J0cy5jcmVhdGVEYWlseU5vdGUgPSBjcmVhdGVEYWlseU5vdGU7XG5leHBvcnRzLmNyZWF0ZU1vbnRobHlOb3RlID0gY3JlYXRlTW9udGhseU5vdGU7XG5leHBvcnRzLmNyZWF0ZVBlcmlvZGljTm90ZSA9IGNyZWF0ZVBlcmlvZGljTm90ZTtcbmV4cG9ydHMuY3JlYXRlUXVhcnRlcmx5Tm90ZSA9IGNyZWF0ZVF1YXJ0ZXJseU5vdGU7XG5leHBvcnRzLmNyZWF0ZVdlZWtseU5vdGUgPSBjcmVhdGVXZWVrbHlOb3RlO1xuZXhwb3J0cy5jcmVhdGVZZWFybHlOb3RlID0gY3JlYXRlWWVhcmx5Tm90ZTtcbmV4cG9ydHMuZ2V0QWxsRGFpbHlOb3RlcyA9IGdldEFsbERhaWx5Tm90ZXM7XG5leHBvcnRzLmdldEFsbE1vbnRobHlOb3RlcyA9IGdldEFsbE1vbnRobHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsUXVhcnRlcmx5Tm90ZXMgPSBnZXRBbGxRdWFydGVybHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsV2Vla2x5Tm90ZXMgPSBnZXRBbGxXZWVrbHlOb3RlcztcbmV4cG9ydHMuZ2V0QWxsWWVhcmx5Tm90ZXMgPSBnZXRBbGxZZWFybHlOb3RlcztcbmV4cG9ydHMuZ2V0RGFpbHlOb3RlID0gZ2V0RGFpbHlOb3RlO1xuZXhwb3J0cy5nZXREYWlseU5vdGVTZXR0aW5ncyA9IGdldERhaWx5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXREYXRlRnJvbUZpbGUgPSBnZXREYXRlRnJvbUZpbGU7XG5leHBvcnRzLmdldERhdGVGcm9tUGF0aCA9IGdldERhdGVGcm9tUGF0aDtcbmV4cG9ydHMuZ2V0RGF0ZVVJRCA9IGdldERhdGVVSUQ7XG5leHBvcnRzLmdldE1vbnRobHlOb3RlID0gZ2V0TW9udGhseU5vdGU7XG5leHBvcnRzLmdldE1vbnRobHlOb3RlU2V0dGluZ3MgPSBnZXRNb250aGx5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRQZXJpb2RpY05vdGVTZXR0aW5ncyA9IGdldFBlcmlvZGljTm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRRdWFydGVybHlOb3RlID0gZ2V0UXVhcnRlcmx5Tm90ZTtcbmV4cG9ydHMuZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzID0gZ2V0UXVhcnRlcmx5Tm90ZVNldHRpbmdzO1xuZXhwb3J0cy5nZXRUZW1wbGF0ZUluZm8gPSBnZXRUZW1wbGF0ZUluZm87XG5leHBvcnRzLmdldFdlZWtseU5vdGUgPSBnZXRXZWVrbHlOb3RlO1xuZXhwb3J0cy5nZXRXZWVrbHlOb3RlU2V0dGluZ3MgPSBnZXRXZWVrbHlOb3RlU2V0dGluZ3M7XG5leHBvcnRzLmdldFllYXJseU5vdGUgPSBnZXRZZWFybHlOb3RlO1xuZXhwb3J0cy5nZXRZZWFybHlOb3RlU2V0dGluZ3MgPSBnZXRZZWFybHlOb3RlU2V0dGluZ3M7XG4iLCAiLyoqXG4gKiBIb21lIEJhc2UgUGx1Z2luXG4gKiBZb3VyIGRlZGljYXRlZCBob21lIGluIHlvdXIgdmF1bHRcbiAqL1xuXG5pbXBvcnQgeyBOb3RpY2UsIFBsYXRmb3JtLCBQbHVnaW4sIGFkZEljb24gfSBmcm9tICdvYnNpZGlhbic7XG5pbXBvcnQgeyBERUZBVUxUX1NFVFRJTkdTLCBIb21lQmFzZVNldHRpbmdzLCBIb21lQmFzZVR5cGUgfSBmcm9tICcuL3NldHRpbmdzJztcbmltcG9ydCB7IEhvbWVCYXNlU2V0dGluZ1RhYiB9IGZyb20gJy4vdWkvc2V0dGluZ3MtdGFiJztcbmltcG9ydCB7IEhvbWVCYXNlU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvaG9tZS1zZXJ2aWNlJztcbmltcG9ydCB7IE5ld1RhYlNlcnZpY2UgfSBmcm9tICcuL3NlcnZpY2VzL25ldy10YWItc2VydmljZSc7XG5pbXBvcnQgeyBTdGlja3lUYWJTZXJ2aWNlIH0gZnJvbSAnLi9zZXJ2aWNlcy9zdGlja3ktdGFiLXNlcnZpY2UnO1xuaW1wb3J0IHsgTW9iaWxlQnV0dG9uU2VydmljZSB9IGZyb20gJy4vc2VydmljZXMvbW9iaWxlLWJ1dHRvbi1zZXJ2aWNlJztcblxuLyoqXG4gKiBFeHRlbmRlZCBBcHAgaW50ZXJmYWNlIGZvciByZWxlYXNlIG5vdGVzIHBhdGNoaW5nXG4gKi9cbmludGVyZmFjZSBBcHBXaXRoUmVsZWFzZU5vdGVzIHtcblx0c2hvd1JlbGVhc2VOb3Rlcz86ICgpID0+IHZvaWQ7XG5cdG52T3JpZ19zaG93UmVsZWFzZU5vdGVzPzogKCkgPT4gdm9pZDtcbn1cblxuLyoqXG4gKiBDdXN0b20gaG9tZSBpY29uIFNWRyAoTHVjaWRlIGhvdXNlIGljb24pXG4gKi9cbmNvbnN0IEhPTUVfSUNPTiA9IGA8c3ZnIHhtbG5zPVwiaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmdcIiB2aWV3Qm94PVwiMCAwIDI0IDI0XCIgZmlsbD1cIm5vbmVcIiBzdHJva2U9XCJjdXJyZW50Q29sb3JcIiBzdHJva2Utd2lkdGg9XCIyXCIgc3Ryb2tlLWxpbmVjYXA9XCJyb3VuZFwiIHN0cm9rZS1saW5lam9pbj1cInJvdW5kXCI+PHBhdGggZD1cIk0xNSAyMXYtOGExIDEgMCAwIDAtMS0xaC00YTEgMSAwIDAgMC0xIDF2OFwiLz48cGF0aCBkPVwiTTMgMTBhMiAyIDAgMCAxIC43MDktMS41MjhsNy02YTIgMiAwIDAgMSAyLjU4MiAwbDcgNkEyIDIgMCAwIDEgMjEgMTB2OWEyIDIgMCAwIDEtMiAySDVhMiAyIDAgMCAxLTItMnpcIi8+PC9zdmc+YDtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgSG9tZUJhc2VQbHVnaW4gZXh0ZW5kcyBQbHVnaW4ge1xuXHRzZXR0aW5ncyE6IEhvbWVCYXNlU2V0dGluZ3M7XG5cdFxuXHQvLyBTZXJ2aWNlc1xuXHRob21lU2VydmljZSE6IEhvbWVCYXNlU2VydmljZTtcblx0bmV3VGFiU2VydmljZSE6IE5ld1RhYlNlcnZpY2U7XG5cdHN0aWNreVRhYlNlcnZpY2UhOiBTdGlja3lUYWJTZXJ2aWNlO1xuXHRtb2JpbGVCdXR0b25TZXJ2aWNlITogTW9iaWxlQnV0dG9uU2VydmljZTtcblx0XG5cdC8vIFJlbGVhc2Ugbm90ZXMgdHJhY2tpbmdcblx0cHJpdmF0ZSBuZXdSZWxlYXNlOiBib29sZWFuID0gZmFsc2U7XG5cdFxuXHQvLyBUcmFjayBpZiBwYXRjaGVkIG9wZW5pbmcgYmVoYXZpb3IgYWxyZWFkeSByYW5cblx0cHJpdmF0ZSBvcGVuaW5nQmVoYXZpb3JSYW46IGJvb2xlYW4gPSBmYWxzZTtcblx0XG5cdC8vIFRyYWNrIGlmIHdlJ3JlIGN1cnJlbnRseSBpbiBzdGFydHVwICh0byBwcmV2ZW50IGhhbmRsZU9wZW5XaGVuRW1wdHkgZnJvbSBmaXJpbmcpXG5cdHByaXZhdGUgaXNTdGFydHVwOiBib29sZWFuID0gdHJ1ZTtcblxuXHRhc3luYyBvbmxvYWQoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0YXdhaXQgdGhpcy5sb2FkU2V0dGluZ3MoKTtcblx0XHRcblx0XHQvLyBNaWdyYXRlIGxlZ2FjeSBzZXR0aW5ncyBvbiBmaXJzdCBsb2FkXG5cdFx0YXdhaXQgdGhpcy5taWdyYXRlTGVnYWN5U2V0dGluZ3MoKTtcblxuXHRcdC8vIFBhdGNoIG9wZW5pbmcgYmVoYXZpb3IgZm9yIGZhc3Qgc3RhcnR1cCAoYmVmb3JlIG90aGVyIGluaXRpYWxpemF0aW9uKVxuXHRcdHRoaXMucGF0Y2hPcGVuaW5nQmVoYXZpb3IoKTtcblxuXHRcdC8vIFJlZ2lzdGVyIGN1c3RvbSBpY29uXG5cdFx0YWRkSWNvbignaG9tZS1iYXNlJywgSE9NRV9JQ09OKTtcblxuXHRcdC8vIEluaXRpYWxpemUgc2VydmljZXNcblx0XHR0aGlzLmhvbWVTZXJ2aWNlID0gbmV3IEhvbWVCYXNlU2VydmljZSh0aGlzKTtcblx0XHR0aGlzLm5ld1RhYlNlcnZpY2UgPSBuZXcgTmV3VGFiU2VydmljZSh0aGlzKTtcblx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UgPSBuZXcgU3RpY2t5VGFiU2VydmljZSh0aGlzKTtcblx0XHR0aGlzLm1vYmlsZUJ1dHRvblNlcnZpY2UgPSBuZXcgTW9iaWxlQnV0dG9uU2VydmljZSh0aGlzKTtcblxuXHRcdC8vIEFkZCByaWJib24gaWNvblxuXHRcdHRoaXMuYWRkUmliYm9uSWNvbignaG9tZScsICdPcGVuIGhvbWUgYmFzZScsICgpID0+IHtcblx0XHRcdHZvaWQgdGhpcy5ob21lU2VydmljZS5vcGVuSG9tZUJhc2Uoe1xuXHRcdFx0XHRyZXBsYWNlQWN0aXZlTGVhZjogZmFsc2UsXG5cdFx0XHRcdHJ1bkNvbW1hbmQ6IHRydWUsXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIFJlZ2lzdGVyIGNvbW1hbmRzXG5cdFx0dGhpcy5yZWdpc3RlckNvbW1hbmRzKCk7XG5cblx0XHQvLyBBZGQgc2V0dGluZ3MgdGFiXG5cdFx0dGhpcy5hZGRTZXR0aW5nVGFiKG5ldyBIb21lQmFzZVNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdC8vIFdhaXQgZm9yIGxheW91dCB0byBiZSByZWFkeVxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbkxheW91dFJlYWR5KCgpID0+IHtcblx0XHRcdC8vIFVzZSBhIHNtYWxsIGRlbGF5IHRvIGVuc3VyZSBET00gaXMgcmVhZHkgKGVzcGVjaWFsbHkgZm9yIHNldHRpbmdzIG1vZGFsIGRldGVjdGlvbilcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHQvLyBDaGVjayBpZiBzZXR0aW5ncyBtb2RhbCBpcyBvcGVuIC0gaWYgc28sIHNraXAgc3RhcnR1cCBsb2dpY1xuXHRcdFx0XHRpZiAodGhpcy5pc1NldHRpbmdzTW9kYWxPcGVuKCkpIHtcblx0XHRcdFx0XHQvLyBTdGlsbCB1cGRhdGUgVUkgZmVhdHVyZXMsIGp1c3QgZG9uJ3QgcnVuIHN0YXJ0dXAgbG9naWNcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZVN0aWNreVRhYkljb24oKTtcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZU1vYmlsZUJ1dHRvbigpO1xuXHRcdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XG5cdFx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0Ly8gQWx3YXlzIGluaXRpYWxpemUgdGhlIG5ldyB0YWIgc2VydmljZSB0byB0cmFjayBleGlzdGluZyBsZWF2ZXNcblx0XHRcdFx0Ly8gVGhpcyBpcyBuZWVkZWQgZm9yIG5ldyB0YWIgcmVwbGFjZW1lbnQgdG8gd29ya1xuXHRcdFx0XHQvLyBCdXQgb25seSBydW4gc3RhcnR1cCBsb2dpYyBpZiBvcGVuaW5nIGJlaGF2aW9yIGRpZG4ndCBhbHJlYWR5IHJ1blxuXHRcdFx0XHRpZiAoIXRoaXMub3BlbmluZ0JlaGF2aW9yUmFuKSB7XG5cdFx0XHRcdFx0Ly8gT3BlbmluZyBiZWhhdmlvciBkaWRuJ3QgcnVuLCBzbyBpbml0aWFsaXplIG5vcm1hbGx5IChpbmNsdWRlcyBzdGFydHVwKVxuXHRcdFx0XHRcdHRoaXMubmV3VGFiU2VydmljZS5pbml0aWFsaXplKCk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0Ly8gT3BlbmluZyBiZWhhdmlvciBhbHJlYWR5IHJhbiwgYnV0IHdlIHN0aWxsIG5lZWQgdG8gdHJhY2sgZXhpc3RpbmcgbGVhdmVzXG5cdFx0XHRcdFx0Ly8gZm9yIG5ldyB0YWIgcmVwbGFjZW1lbnQgdG8gd29ya1xuXHRcdFx0XHRcdHRoaXMubmV3VGFiU2VydmljZS50cmFja0V4aXN0aW5nTGVhdmVzKCk7XG5cdFx0XHRcdH1cblx0XHRcdFx0XG5cdFx0XHRcdC8vIE1hcmsgc3RhcnR1cCBhcyBjb21wbGV0ZSBhZnRlciBhIGRlbGF5IHRvIGFsbG93IGV2ZXJ5dGhpbmcgdG8gc2V0dGxlXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuaXNTdGFydHVwID0gZmFsc2U7XG5cdFx0XHRcdH0sIDEwMDApO1xuXG5cdFx0XHRcdC8vIFVwZGF0ZSBVSSBmZWF0dXJlc1xuXHRcdFx0XHR0aGlzLnVwZGF0ZVN0aWNreVRhYkljb24oKTtcblx0XHRcdFx0dGhpcy51cGRhdGVNb2JpbGVCdXR0b24oKTtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIFVwZGF0ZSB0YWIgaGVhZGVycyBhZnRlciBsYXlvdXQgaXMgcmVhZHlcblx0XHRcdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZVRhYkhlYWRlcnMoKTtcblx0XHRcdH0sIDEwMCk7IC8vIFNtYWxsIGRlbGF5IHRvIGVuc3VyZSBET00gaXMgcmVhZHlcblx0XHR9KTtcblxuXHRcdC8vIFJlZ2lzdGVyIGxheW91dCBjaGFuZ2UgaGFuZGxlclxuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignbGF5b3V0LWNoYW5nZScsIGFzeW5jICgpID0+IHtcblx0XHRcdFx0dGhpcy5uZXdUYWJTZXJ2aWNlLmhhbmRsZUxheW91dENoYW5nZSgpO1xuXHRcdFx0XHQvLyBIYW5kbGUgcmV2ZXJ0IHZpZXcgb24gY2xvc2Vcblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3MucmV2ZXJ0Vmlldykge1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMuaG9tZVNlcnZpY2UucmV2ZXJ0VmlldygpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdC8vIFwiT3BlbiB3aGVuIGVtcHR5XCIgZmVhdHVyZSByZW1vdmVkIC0gdXNlIFwiTmV3IHRhYiByZXBsYWNlbWVudDogb25seSB3aGVuIGVtcHR5XCIgaW5zdGVhZFxuXHRcdFx0XHQvLyBUaGV5IGRvIHRoZSBzYW1lIHRoaW5nIHNpbmNlIE9ic2lkaWFuIGF1dG8tY3JlYXRlcyBhbiBlbXB0eSB0YWIgd2hlbiB5b3UgY2xvc2UgdGhlIGxhc3Qgb25lXG5cdFx0XHRcdC8vIERlbGF5IHRhYiBoZWFkZXIgdXBkYXRlcyB0byBhdm9pZCBmbGlja2VyaW5nIGR1cmluZyB0YWIgdHJhbnNpdGlvbnNcblx0XHRcdFx0c2V0VGltZW91dCgoKSA9PiB7XG5cdFx0XHRcdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZUFjdGl2ZVN0YXRlKCk7XG5cdFx0XHRcdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZVRhYkhlYWRlcnMoKTtcblx0XHRcdFx0XHQvLyBBbHNvIHVwZGF0ZSBpY29uIHBvc2l0aW9uIGluIGNhc2Ugc2lkZWJhciBzdGF0ZSBjaGFuZ2VkXG5cdFx0XHRcdFx0dGhpcy5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZUljb25Qb3NpdGlvbkZvclNpZGViYXIoKTtcblx0XHRcdFx0fSwgMTUwKTtcblx0XHRcdH0pXG5cdFx0KTtcblxuXHRcdC8vIFJlZ2lzdGVyIGZpbGUgb3BlbiBoYW5kbGVyIGZvciBhY3RpdmUgc3RhdGUgdXBkYXRlc1xuXHRcdHRoaXMucmVnaXN0ZXJFdmVudChcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5vbignZmlsZS1vcGVuJywgKCkgPT4ge1xuXHRcdFx0XHQvLyBEZWxheSB1cGRhdGVzIHRvIGxldCBmaWxlIG9wZW4gYW5pbWF0aW9uIGNvbXBsZXRlXG5cdFx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xuXHRcdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVBY3RpdmVTdGF0ZSgpO1xuXHRcdFx0XHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS51cGRhdGVUYWJIZWFkZXJzKCk7XG5cdFx0XHRcdH0sIDEwMCk7XG5cdFx0XHR9KVxuXHRcdCk7XG5cblx0XHQvLyBSZWdpc3RlciBhY3RpdmUgbGVhZiBjaGFuZ2UgaGFuZGxlciBmb3IgdGFiIGhlYWRlciB1cGRhdGVzXG5cdFx0dGhpcy5yZWdpc3RlckV2ZW50KFxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLm9uKCdhY3RpdmUtbGVhZi1jaGFuZ2UnLCAoKSA9PiB7XG5cdFx0XHRcdC8vIERlbGF5IHRvIGxldCB0YWIgc3dpdGNoIGFuaW1hdGlvbiBjb21wbGV0ZVxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlVGFiSGVhZGVycygpO1xuXHRcdFx0XHR9LCAxMDApO1xuXHRcdFx0fSlcblx0XHQpO1xuXG5cdH1cblxuXHRvbnVubG9hZCgpOiB2b2lkIHtcblx0XHQvLyBVbnBhdGNoIHJlbGVhc2Ugbm90ZXNcblx0XHR0aGlzLnVucGF0Y2hSZWxlYXNlTm90ZXMoKTtcblx0XHRcblx0XHQvLyBVbnBhdGNoIG9wZW5pbmcgYmVoYXZpb3Jcblx0XHR0aGlzLnVucGF0Y2hPcGVuaW5nQmVoYXZpb3IoKTtcblx0XHRcblx0XHQvLyBDbGVhbiB1cCBzZXJ2aWNlc1xuXHRcdHRoaXMuc3RpY2t5VGFiU2VydmljZS5yZW1vdmUoKTtcblx0XHR0aGlzLm1vYmlsZUJ1dHRvblNlcnZpY2UucmVtb3ZlKCk7XG5cblx0fVxuXG5cdC8qKlxuXHQgKiBSZWdpc3RlciBwbHVnaW4gY29tbWFuZHNcblx0ICovXG5cdHByaXZhdGUgcmVnaXN0ZXJDb21tYW5kcygpOiB2b2lkIHtcblx0XHQvLyBPcGVuIGhvbWUgYmFzZVxuXHRcdHRoaXMuYWRkQ29tbWFuZCh7XG5cdFx0XHRpZDogJ29wZW4nLFxuXHRcdFx0bmFtZTogJ09wZW4nLFxuXHRcdFx0Y2FsbGJhY2s6ICgpID0+IHtcblx0XHRcdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMuZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xuXHRcdFx0XHRpZiAoIWhvbWVCYXNlU2V0dGluZ3MudmFsdWUgJiYgaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xuXHRcdFx0XHRcdG5ldyBOb3RpY2UoJ05vIGhvbWUgYmFzZSBjb25maWd1cmVkLiBTZXQgb25lIGluIHNldHRpbmdzLicpO1xuXHRcdFx0XHRcdHJldHVybjtcblx0XHRcdFx0fVxuXHRcdFx0XHR2b2lkIHRoaXMuaG9tZVNlcnZpY2Uub3BlbkhvbWVCYXNlKHtcblx0XHRcdFx0XHRyZXBsYWNlQWN0aXZlTGVhZjogZmFsc2UsXG5cdFx0XHRcdFx0cnVuQ29tbWFuZDogdHJ1ZSxcblx0XHRcdFx0fSk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gU2V0IGN1cnJlbnQgZmlsZSBhcyBob21lIGJhc2Vcblx0XHR0aGlzLmFkZENvbW1hbmQoe1xuXHRcdFx0aWQ6ICdzZXQtY3VycmVudC1maWxlJyxcblx0XHRcdG5hbWU6ICdTZXQgY3VycmVudCBmaWxlIGFzIGhvbWUnLFxuXHRcdFx0Y2hlY2tDYWxsYmFjazogKGNoZWNraW5nKSA9PiB7XG5cdFx0XHRcdGlmICghdGhpcy5ob21lU2VydmljZS5jYW5TZXRBY3RpdmVGaWxlQXNIb21lQmFzZSgpKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cdFx0XHRcdGlmICghY2hlY2tpbmcpIHtcblx0XHRcdFx0XHR2b2lkIHRoaXMuaG9tZVNlcnZpY2Uuc2V0QWN0aXZlRmlsZUFzSG9tZUJhc2UoKS50aGVuKChzdWNjZXNzKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoc3VjY2Vzcykge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcblx0XHRcdFx0XHRcdFx0bmV3IE5vdGljZShgSG9tZSBiYXNlIHNldCB0byBcIiR7YWN0aXZlRmlsZT8ubmFtZX1cImApO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdFx0fSxcblx0XHR9KTtcblxuXHRcdC8vIFRvZ2dsZSBzdGlja3kgaG9tZSBpY29uXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAndG9nZ2xlLXN0aWNreS1pY29uJyxcblx0XHRcdG5hbWU6ICdUb2dnbGUgc3RpY2t5IGhvbWUgaWNvbicsXG5cdFx0XHRjYWxsYmFjazogYXN5bmMgKCkgPT4ge1xuXHRcdFx0XHRhd2FpdCB0aGlzLnN0aWNreVRhYlNlcnZpY2UudG9nZ2xlKCk7XG5cdFx0XHRcdGNvbnN0IHN0YXRlID0gdGhpcy5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24gPyAnZW5hYmxlZCcgOiAnZGlzYWJsZWQnO1xuXHRcdFx0XHRuZXcgTm90aWNlKGBTdGlja3kgaG9tZSBpY29uICR7c3RhdGV9YCk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXG5cdFx0Ly8gQ2xvc2UgaG9tZSBiYXNlXG5cdFx0dGhpcy5hZGRDb21tYW5kKHtcblx0XHRcdGlkOiAnY2xvc2UnLFxuXHRcdFx0bmFtZTogJ0Nsb3NlJyxcblx0XHRcdGNhbGxiYWNrOiBhc3luYyAoKSA9PiB7XG5cdFx0XHRcdGF3YWl0IHRoaXMuc3RpY2t5VGFiU2VydmljZS5jbG9zZUhvbWVCYXNlKCk7XG5cdFx0XHR9LFxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIExvYWQgcGx1Z2luIHNldHRpbmdzXG5cdCAqL1xuXHRhc3luYyBsb2FkU2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0Y29uc3QgZGF0YSA9IChhd2FpdCB0aGlzLmxvYWREYXRhKCkpIGFzIFBhcnRpYWw8SG9tZUJhc2VTZXR0aW5ncz4gfCBudWxsO1xuXHRcdHRoaXMuc2V0dGluZ3MgPSBPYmplY3QuYXNzaWduKHt9LCBERUZBVUxUX1NFVFRJTkdTLCBkYXRhID8/IHt9KTtcblx0fVxuXG5cdC8qKlxuXHQgKiBNaWdyYXRlIGxlZ2FjeSBzZXR0aW5ncyB0byBuZXcgZm9ybWF0XG5cdCAqL1xuXHRhc3luYyBtaWdyYXRlTGVnYWN5U2V0dGluZ3MoKTogUHJvbWlzZTx2b2lkPiB7XG5cdFx0bGV0IG5lZWRzU2F2ZSA9IGZhbHNlO1xuXHRcdFxuXHRcdC8vIE1pZ3JhdGUgaG9tZUJhc2VQYXRoIHRvIGhvbWVCYXNlVHlwZS9ob21lQmFzZVZhbHVlXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VQYXRoICYmICF0aGlzLnNldHRpbmdzLmhvbWVCYXNlVmFsdWUpIHtcblx0XHRcdHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VUeXBlID0gSG9tZUJhc2VUeXBlLkZpbGU7XG5cdFx0XHR0aGlzLnNldHRpbmdzLmhvbWVCYXNlVmFsdWUgPSB0aGlzLnNldHRpbmdzLmhvbWVCYXNlUGF0aDtcblx0XHRcdG5lZWRzU2F2ZSA9IHRydWU7XG5cdFx0fVxuXHRcdFxuXHRcdC8vIE1pZ3JhdGUga2VlcEV4aXN0aW5nVGFicyB0byBvcGVuTW9kZVxuXHRcdGlmICh0aGlzLnNldHRpbmdzLmtlZXBFeGlzdGluZ1RhYnMgIT09IHVuZGVmaW5lZCkge1xuXHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Mub3Blbk1vZGUgPT09IERFRkFVTFRfU0VUVElOR1Mub3Blbk1vZGUpIHtcblx0XHRcdFx0dGhpcy5zZXR0aW5ncy5vcGVuTW9kZSA9IHRoaXMuc2V0dGluZ3Mua2VlcEV4aXN0aW5nVGFicyA/ICdyZXRhaW4nIDogJ3JlcGxhY2UtYWxsJztcblx0XHRcdFx0bmVlZHNTYXZlID0gdHJ1ZTtcblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0Ly8gTWlncmF0ZSBtb2JpbGUgaG9tZUJhc2VQYXRoXG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VQYXRoICYmICF0aGlzLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVmFsdWUpIHtcblx0XHRcdHRoaXMuc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlID0gSG9tZUJhc2VUeXBlLkZpbGU7XG5cdFx0XHR0aGlzLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVmFsdWUgPSB0aGlzLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlUGF0aDtcblx0XHRcdG5lZWRzU2F2ZSA9IHRydWU7XG5cdFx0fVxuXHRcdFxuXHRcdGlmIChuZWVkc1NhdmUpIHtcblx0XHRcdGF3YWl0IHRoaXMuc2F2ZVNldHRpbmdzKCk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIEdldCB0aGUgYWN0aXZlIGhvbWUgYmFzZSBzZXR0aW5ncyAobW9iaWxlIG9yIGRlc2t0b3ApXG5cdCAqL1xuXHRnZXRIb21lQmFzZVNldHRpbmdzKCk6IHtcblx0XHR0eXBlOiBIb21lQmFzZVR5cGU7XG5cdFx0dmFsdWU6IHN0cmluZztcblx0XHRwYXRoOiBzdHJpbmc7IC8vIExlZ2FjeSBjb21wYXRpYmlsaXR5XG5cdH0ge1xuXHRcdGlmICh0aGlzLnNldHRpbmdzLnNlcGFyYXRlTW9iaWxlICYmIFBsYXRmb3JtLmlzTW9iaWxlKSB7XG5cdFx0XHRyZXR1cm4ge1xuXHRcdFx0XHR0eXBlOiB0aGlzLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVHlwZSB8fCBIb21lQmFzZVR5cGUuRmlsZSxcblx0XHRcdFx0dmFsdWU6IHRoaXMuc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VWYWx1ZSB8fCB0aGlzLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlUGF0aCB8fCAnJyxcblx0XHRcdFx0cGF0aDogdGhpcy5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVBhdGggfHwgdGhpcy5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlIHx8ICcnLFxuXHRcdFx0fTtcblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuIHtcblx0XHRcdHR5cGU6IHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VUeXBlIHx8IEhvbWVCYXNlVHlwZS5GaWxlLFxuXHRcdFx0dmFsdWU6IHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VWYWx1ZSB8fCB0aGlzLnNldHRpbmdzLmhvbWVCYXNlUGF0aCB8fCAnJyxcblx0XHRcdHBhdGg6IHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VQYXRoIHx8IHRoaXMuc2V0dGluZ3MuaG9tZUJhc2VWYWx1ZSB8fCAnJyxcblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCB0aGUgYWN0aXZlIG5ldyB0YWIgc2V0dGluZ3MgKG1vYmlsZSBvciBkZXNrdG9wKVxuXHQgKiBGYWxscyBiYWNrIHRvIGhvbWUgYmFzZSBzZXR0aW5ncyBpZiB1c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiIGlzIGRpc2FibGVkXG5cdCAqL1xuXHRnZXROZXdUYWJTZXR0aW5ncygpOiB7XG5cdFx0dHlwZTogSG9tZUJhc2VUeXBlO1xuXHRcdHZhbHVlOiBzdHJpbmc7XG5cdFx0cGF0aDogc3RyaW5nOyAvLyBMZWdhY3kgY29tcGF0aWJpbGl0eVxuXHR9IHtcblx0XHQvLyBJZiBub3QgdXNpbmcgZGlmZmVyZW50IGZpbGUgZm9yIG5ldyB0YWIsIGZhbGwgYmFjayB0byBob21lIGJhc2Ugc2V0dGluZ3Ncblx0XHRpZiAoIXRoaXMuc2V0dGluZ3MudXNlRGlmZmVyZW50RmlsZUZvck5ld1RhYikge1xuXHRcdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMuZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xuXHRcdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gZ2V0TmV3VGFiU2V0dGluZ3M6IFVzaW5nIGhvbWUgYmFzZSBzZXR0aW5ncyAodXNlRGlmZmVyZW50RmlsZUZvck5ld1RhYiBpcyBmYWxzZSknLCBob21lQmFzZVNldHRpbmdzKTtcblx0XHRcdHJldHVybiBob21lQmFzZVNldHRpbmdzO1xuXHRcdH1cblxuXHRcdC8vIFVzZSBuZXcgdGFiIHNldHRpbmdzLCBjaGVja2luZyBmb3IgbW9iaWxlIGlmIHNlcGFyYXRlIG1vYmlsZSBpcyBlbmFibGVkXG5cdFx0bGV0IHNldHRpbmdzOiB7IHR5cGU6IEhvbWVCYXNlVHlwZTsgdmFsdWU6IHN0cmluZzsgcGF0aDogc3RyaW5nIH07XG5cdFx0XG5cdFx0aWYgKHRoaXMuc2V0dGluZ3MubmV3VGFiU2VwYXJhdGVNb2JpbGUgJiYgUGxhdGZvcm0uaXNNb2JpbGUpIHtcblx0XHRcdHNldHRpbmdzID0ge1xuXHRcdFx0XHR0eXBlOiB0aGlzLnNldHRpbmdzLm1vYmlsZU5ld1RhYlR5cGUgfHwgSG9tZUJhc2VUeXBlLkZpbGUsXG5cdFx0XHRcdHZhbHVlOiB0aGlzLnNldHRpbmdzLm1vYmlsZU5ld1RhYlZhbHVlIHx8ICcnLFxuXHRcdFx0XHRwYXRoOiB0aGlzLnNldHRpbmdzLm1vYmlsZU5ld1RhYlZhbHVlIHx8ICcnLFxuXHRcdFx0fTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0c2V0dGluZ3MgPSB7XG5cdFx0XHRcdHR5cGU6IHRoaXMuc2V0dGluZ3MubmV3VGFiVHlwZSB8fCBIb21lQmFzZVR5cGUuRmlsZSxcblx0XHRcdFx0dmFsdWU6IHRoaXMuc2V0dGluZ3MubmV3VGFiVmFsdWUgfHwgJycsXG5cdFx0XHRcdHBhdGg6IHRoaXMuc2V0dGluZ3MubmV3VGFiVmFsdWUgfHwgJycsXG5cdFx0XHR9O1xuXHRcdH1cblx0XHRcblx0XHQvLyBWYWxpZGF0ZSBzZXR0aW5nc1xuXHRcdGlmICghc2V0dGluZ3MudmFsdWUgJiYgc2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUpIHtcblx0XHRcdGNvbnNvbGUud2FybignW0hvbWUgQmFzZV0gZ2V0TmV3VGFiU2V0dGluZ3M6IG5ld1RhYlZhbHVlIGlzIGVtcHR5IGZvciBGaWxlIHR5cGUsIGZhbGxpbmcgYmFjayB0byBob21lIGJhc2Ugc2V0dGluZ3MnKTtcblx0XHRcdHJldHVybiB0aGlzLmdldEhvbWVCYXNlU2V0dGluZ3MoKTtcblx0XHR9XG5cdFx0XG5cdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gZ2V0TmV3VGFiU2V0dGluZ3M6IFVzaW5nIG5ldyB0YWIgc2V0dGluZ3MnLCB7XG5cdFx0XHR1c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiOiB0aGlzLnNldHRpbmdzLnVzZURpZmZlcmVudEZpbGVGb3JOZXdUYWIsXG5cdFx0XHRuZXdUYWJTZXBhcmF0ZU1vYmlsZTogdGhpcy5zZXR0aW5ncy5uZXdUYWJTZXBhcmF0ZU1vYmlsZSxcblx0XHRcdGlzTW9iaWxlOiBQbGF0Zm9ybS5pc01vYmlsZSxcblx0XHRcdHNldHRpbmdzOiBzZXR0aW5nc1xuXHRcdH0pO1xuXHRcdFxuXHRcdHJldHVybiBzZXR0aW5ncztcblx0fVxuXG5cdC8qKlxuXHQgKiBTYXZlIHBsdWdpbiBzZXR0aW5nc1xuXHQgKi9cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlIHRoZSBzdGlja3kgdGFiIGljb24gYmFzZWQgb24gY3VycmVudCBzZXR0aW5nc1xuXHQgKi9cblx0dXBkYXRlU3RpY2t5VGFiSWNvbigpOiB2b2lkIHtcblx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlKCk7XG5cdFx0Ly8gQWxzbyB1cGRhdGUgdGFiIGhlYWRlcnMgd2hlbiBzdGlja3kgaWNvbiBzZXR0aW5nIGNoYW5nZXNcblx0XHR0aGlzLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlVGFiSGVhZGVycygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSB0aGUgbW9iaWxlIGJ1dHRvbiBiYXNlZCBvbiBjdXJyZW50IHNldHRpbmdzXG5cdCAqL1xuXHR1cGRhdGVNb2JpbGVCdXR0b24oKTogdm9pZCB7XG5cdFx0dGhpcy5tb2JpbGVCdXR0b25TZXJ2aWNlLnVwZGF0ZSgpO1xuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrIGlmIHdlIHNob3VsZCBza2lwIHN0YXJ0dXAgbG9naWMgKGUuZy4sIHBsdWdpbiByZWxvYWQsIHNldHRpbmdzIG1vZGFsIG9wZW4pXG5cdCAqIFRoaXMgcHJldmVudHMgZGVzdHJ1Y3RpdmUgYmVoYXZpb3Igd2hlbiB0aGUgcGx1Z2luIGlzIHJlbG9hZGVkIG9yIHNldHRpbmdzIGFyZSBvcGVuXG5cdCAqL1xuXHRwcml2YXRlIHNob3VsZFNraXBTdGFydHVwTG9naWMoKTogYm9vbGVhbiB7XG5cdFx0Ly8gQ2hlY2sgaWYgc2V0dGluZ3MgbW9kYWwgaXMgb3BlbiAtIG5ldmVyIHJ1biBzdGFydHVwIGxvZ2ljIGlmIGl0IGlzXG5cdFx0aWYgKHRoaXMuaXNTZXR0aW5nc01vZGFsT3BlbigpKSB7XG5cdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHR9XG5cblx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIGEgcGx1Z2luIHJlbG9hZCB2cyBhY3R1YWwgYXBwIHN0YXJ0dXBcblx0XHQvLyBPbiBhY3R1YWwgc3RhcnR1cCwgT2JzaWRpYW4gaGFzbid0IHJlc3RvcmVkIHRoZSB3b3Jrc3BhY2UgeWV0XG5cdFx0Ly8gT24gcGx1Z2luIHJlbG9hZCwgZmlsZXMgYXJlIGFscmVhZHkgb3BlbiBhbmQgd29ya3NwYWNlIGlzIHJlc3RvcmVkXG5cdFx0Y29uc3QgaGFzT3BlbkZpbGVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnbWFya2Rvd24nKS5sZW5ndGggPiAwIHx8XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnY2FudmFzJykubGVuZ3RoID4gMCB8fFxuXHRcdCAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2Jhc2VzJykubGVuZ3RoID4gMCB8fFxuXHRcdCAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUoJ2VtcHR5JykubGVuZ3RoID4gMDtcblx0XHRcblx0XHQvLyBJZiBmaWxlcyBhcmUgb3BlbiwgdGhpcyBpcyBsaWtlbHkgYSBwbHVnaW4gcmVsb2FkLCBub3QgYWN0dWFsIHN0YXJ0dXBcblx0XHRyZXR1cm4gaGFzT3BlbkZpbGVzO1xuXHR9XG5cblx0LyoqXG5cdCAqIENoZWNrIGlmIHRoZSBzZXR0aW5ncyBtb2RhbCBpcyBjdXJyZW50bHkgb3BlblxuXHQgKi9cblx0cHJpdmF0ZSBpc1NldHRpbmdzTW9kYWxPcGVuKCk6IGJvb2xlYW4ge1xuXHRcdC8vIENoZWNrIGZvciBzZXR0aW5ncyBtb2RhbCBieSBsb29raW5nIGZvciB0aGUgbW9kYWwgY29udGFpbmVyXG5cdFx0Ly8gVHJ5IG11bHRpcGxlIHNlbGVjdG9ycyB0byBiZSBtb3JlIHJvYnVzdFxuXHRcdGNvbnN0IHNldHRpbmdzTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGFpbmVyLm1vZC1zZXR0aW5ncycpIHx8XG5cdFx0ICAgICAgICAgICAgICAgICAgICAgIGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5tb2RhbC5tb2Qtc2V0dGluZ3MnKSB8fFxuXHRcdCAgICAgICAgICAgICAgICAgICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcudmVydGljYWwtdGFiLWNvbnRlbnQnKTtcblx0XHRcblx0XHQvLyBBbHNvIGNoZWNrIGlmIGFueSBtb2RhbCBpcyBvcGVuIGFuZCBjb250YWlucyBzZXR0aW5ncyBjb250ZW50XG5cdFx0aWYgKCFzZXR0aW5nc01vZGFsKSB7XG5cdFx0XHRjb25zdCBhbGxNb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWwtY29udGFpbmVyJyk7XG5cdFx0XHRmb3IgKGNvbnN0IG1vZGFsIG9mIEFycmF5LmZyb20oYWxsTW9kYWxzKSkge1xuXHRcdFx0XHRpZiAobW9kYWwucXVlcnlTZWxlY3RvcignLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXG5cdFx0XHRcdCAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuc2V0dGluZ3MtY29udGVudCcpIHx8XG5cdFx0XHRcdCAgICBtb2RhbC5jbGFzc0xpc3QuY29udGFpbnMoJ21vZC1zZXR0aW5ncycpKSB7XG5cdFx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cdFx0XG5cdFx0cmV0dXJuIHNldHRpbmdzTW9kYWwgIT09IG51bGw7XG5cdH1cblxuXHQvKipcblx0ICogUGF0Y2ggcnVuT3BlbmluZ0JlaGF2aW9yIGZvciBmYXN0IHN0YXJ0dXAgKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxuXHQgKi9cblx0cHJpdmF0ZSBwYXRjaE9wZW5pbmdCZWhhdmlvcigpOiB2b2lkIHtcblx0XHQvLyBTdG9yZSBvcmlnaW5hbCBtZXRob2Rcblx0XHQgXG5cdFx0dGhpcy5hcHAubnZPcmlnX3J1bk9wZW5pbmdCZWhhdmlvciA9IHRoaXMuYXBwLnJ1bk9wZW5pbmdCZWhhdmlvcjtcblx0XHRcblx0XHQvLyBQYXRjaCB0aGUgbWV0aG9kXG5cdFx0IFxuXHRcdHRoaXMuYXBwLnJ1bk9wZW5pbmdCZWhhdmlvciA9IGFzeW5jIChwYXRoOiBzdHJpbmcpID0+IHtcblx0XHRjb25zdCBvcGVuSW5pdGlhbGx5ID0gKFxuXHRcdFx0dGhpcy5zZXR0aW5ncy5vcGVuT25TdGFydHVwICYmIFxuXHRcdFx0IXRoaXMuaGFzVXJsUGFyYW1zKClcblx0XHQpO1xuXHRcdFx0XG5cdFx0XHRpZiAob3BlbkluaXRpYWxseSkge1xuXHRcdFx0XHQvLyBNYXJrIHRoYXQgd2UndmUgcnVuIG9wZW5pbmcgYmVoYXZpb3Jcblx0XHRcdFx0dGhpcy5vcGVuaW5nQmVoYXZpb3JSYW4gPSB0cnVlO1xuXHRcdFx0XHRcblx0XHRcdFx0Ly8gVXNlIGZhc3Qgc3RhcnR1cCAtIGRldGFjaCBhbGwgbGVhdmVzIGFuZCBvcGVuIGhvbWUgYmFzZVxuXHRcdFx0XHRjb25zdCBtb2RlID0gdGhpcy5zZXR0aW5ncy5vcGVuTW9kZTtcblx0XHRcdFx0aWYgKG1vZGUgPT09ICdyZXBsYWNlLWFsbCcpIHtcblx0XHRcdFx0XHRhd2FpdCB0aGlzLmhvbWVTZXJ2aWNlLmRldGFjaEFsbExlYXZlcygpO1xuXHRcdFx0XHR9XG5cdFx0XHRcdFxuXHRcdFx0XHQvLyBVc2UgZ2hvc3QgdGFiIGlmIHN0aWNreSBpY29uIGlzIGVuYWJsZWQsIG90aGVyd2lzZSB1c2Ugbm9ybWFsIG9wZW5cblx0XHRcdFx0aWYgKHRoaXMuc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5ob21lU2VydmljZS5vcGVuSG9tZUJhc2VJbkdob3N0VGFiKHtcblx0XHRcdFx0XHRcdHJ1bkNvbW1hbmQ6IHRydWUsXG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0YXdhaXQgdGhpcy5ob21lU2VydmljZS5vcGVuSG9tZUJhc2VXaXRoTW9kZShtb2RlLCB0cnVlKTtcblx0XHRcdFx0fVxuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gQ2FsbCBvcmlnaW5hbCBiZWhhdmlvclxuXHRcdFx0XHQgXG5cdFx0XHRcdGlmICh0aGlzLmFwcC5udk9yaWdfcnVuT3BlbmluZ0JlaGF2aW9yKSB7XG5cdFx0XHRcdFx0IFxuXHRcdFx0XHRcdGF3YWl0IHRoaXMuYXBwLm52T3JpZ19ydW5PcGVuaW5nQmVoYXZpb3IocGF0aCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHRcdFxuXHRcdFx0Ly8gVW5wYXRjaCByZWxlYXNlIG5vdGVzIGFmdGVyIG9wZW5pbmcgYmVoYXZpb3IgY29tcGxldGVzXG5cdFx0XHR0aGlzLnVucGF0Y2hSZWxlYXNlTm90ZXMoKTtcblx0XHR9O1xuXHR9XG5cblx0LyoqXG5cdCAqIFVucGF0Y2ggcnVuT3BlbmluZ0JlaGF2aW9yXG5cdCAqL1xuXHRwcml2YXRlIHVucGF0Y2hPcGVuaW5nQmVoYXZpb3IoKTogdm9pZCB7XG5cdFx0IFxuXHRcdGlmICh0aGlzLmFwcC5udk9yaWdfcnVuT3BlbmluZ0JlaGF2aW9yKSB7XG5cdFx0XHQgXG5cdFx0XHR0aGlzLmFwcC5ydW5PcGVuaW5nQmVoYXZpb3IgPSB0aGlzLmFwcC5udk9yaWdfcnVuT3BlbmluZ0JlaGF2aW9yO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBQYXRjaCBzaG93UmVsZWFzZU5vdGVzIHRvIHRyYWNrIG5ldyByZWxlYXNlc1xuXHQgKi9cblx0cHJpdmF0ZSBwYXRjaFJlbGVhc2VOb3RlcygpOiB2b2lkIHtcblx0XHRjb25zdCBhcHBBbnkgPSB0aGlzLmFwcCBhcyB1bmtub3duIGFzIEFwcFdpdGhSZWxlYXNlTm90ZXM7XG5cdFx0IFxuXHRcdGFwcEFueS5udk9yaWdfc2hvd1JlbGVhc2VOb3RlcyA9IGFwcEFueS5zaG93UmVsZWFzZU5vdGVzO1xuXHRcdCBcblx0XHRhcHBBbnkuc2hvd1JlbGVhc2VOb3RlcyA9ICgpID0+IHtcblx0XHRcdHRoaXMubmV3UmVsZWFzZSA9IHRydWU7XG5cdFx0fTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVbnBhdGNoIHNob3dSZWxlYXNlTm90ZXNcblx0ICovXG5cdHByaXZhdGUgdW5wYXRjaFJlbGVhc2VOb3RlcygpOiB2b2lkIHtcblx0XHRjb25zdCBhcHBBbnkgPSB0aGlzLmFwcCBhcyB1bmtub3duIGFzIEFwcFdpdGhSZWxlYXNlTm90ZXM7XG5cdFx0IFxuXHRcdGlmICh0aGlzLm5ld1JlbGVhc2UgJiYgIXRoaXMuc2V0dGluZ3MuaGlkZVJlbGVhc2VOb3Rlcykge1xuXHRcdFx0IFxuXHRcdFx0YXBwQW55Lm52T3JpZ19zaG93UmVsZWFzZU5vdGVzPy4oKTtcblx0XHR9XG5cdFx0XG5cdFx0IFxuXHRcdGlmIChhcHBBbnkubnZPcmlnX3Nob3dSZWxlYXNlTm90ZXMpIHtcblx0XHRcdCBcblx0XHRcdGFwcEFueS5zaG93UmVsZWFzZU5vdGVzID0gYXBwQW55Lm52T3JpZ19zaG93UmVsZWFzZU5vdGVzO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBDaGVjayBpZiBhIGhvbWUgYmFzZSB0eXBlIGhhcyBpdHMgcmVxdWlyZWQgcGx1Z2luIGVuYWJsZWRcblx0ICovXG5cdGhhc1JlcXVpcmVkUGx1Z2luKHR5cGU6IEhvbWVCYXNlVHlwZSk6IGJvb2xlYW4ge1xuXHRcdHN3aXRjaCAodHlwZSkge1xuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuV29ya3NwYWNlOlxuXHRcdFx0XHQgXG5cdFx0XHRcdHJldHVybiB0aGlzLmFwcC5pbnRlcm5hbFBsdWdpbnM/LnBsdWdpbnM/LndvcmtzcGFjZXM/LmVuYWJsZWQgPT09IHRydWU7XG5cdFx0XHRjYXNlIEhvbWVCYXNlVHlwZS5HcmFwaDpcblx0XHRcdFx0IFxuXHRcdFx0XHRyZXR1cm4gdGhpcy5hcHAuaW50ZXJuYWxQbHVnaW5zPy5wbHVnaW5zPy5ncmFwaD8uZW5hYmxlZCA9PT0gdHJ1ZTtcblx0XHRcdGNhc2UgSG9tZUJhc2VUeXBlLkpvdXJuYWw6XG5cdFx0XHRcdCBcblx0XHRcdFx0cmV0dXJuICEhdGhpcy5hcHAucGx1Z2lucz8ucGx1Z2lucz8uWydqb3VybmFscyddO1xuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuRGFpbHlOb3RlOlxuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuV2Vla2x5Tm90ZTpcblx0XHRcdGNhc2UgSG9tZUJhc2VUeXBlLk1vbnRobHlOb3RlOlxuXHRcdFx0Y2FzZSBIb21lQmFzZVR5cGUuWWVhcmx5Tm90ZTpcblx0XHRcdFx0cmV0dXJuIHRoaXMuaGFzUmVxdWlyZWRQZXJpb2RpY2l0eSh0eXBlKTtcblx0XHRcdGRlZmF1bHQ6XG5cdFx0XHRcdHJldHVybiB0cnVlO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBDaGVjayBpZiBwZXJpb2RpYyBub3RlcyBhcmUgYXZhaWxhYmxlIGZvciB0aGUgZ2l2ZW4gdHlwZVxuXHQgKi9cblx0cHJpdmF0ZSBoYXNSZXF1aXJlZFBlcmlvZGljaXR5KHR5cGU6IEhvbWVCYXNlVHlwZSk6IGJvb2xlYW4ge1xuXHRcdGlmICh0eXBlID09PSBIb21lQmFzZVR5cGUuRGFpbHlOb3RlKSB7XG5cdFx0XHQvLyBEYWlseSBub3RlcyBjYW4gY29tZSBmcm9tIGVpdGhlciBjb3JlIHBsdWdpbiBPUiBwZXJpb2RpYyBub3RlcyBwbHVnaW5cblx0XHRcdGNvbnN0IGNvcmVEYWlseU5vdGVzID0gdGhpcy5hcHAuaW50ZXJuYWxQbHVnaW5zPy5wbHVnaW5zPy5bJ2RhaWx5LW5vdGVzJ10/LmVuYWJsZWQgPT09IHRydWU7XG5cdFx0XHRpZiAoY29yZURhaWx5Tm90ZXMpIHtcblx0XHRcdFx0cmV0dXJuIHRydWU7XG5cdFx0XHR9XG5cdFx0XHQvLyBDaGVjayBwZXJpb2RpYyBub3RlcyBwbHVnaW4gZm9yIGRhaWx5IG5vdGUgc3VwcG9ydFxuXHRcdFx0Y29uc3QgcGVyaW9kaWNOb3RlcyA9IHRoaXMuYXBwLnBsdWdpbnM/LnBsdWdpbnM/LlsncGVyaW9kaWMtbm90ZXMnXTtcblx0XHRcdGlmIChwZXJpb2RpY05vdGVzKSB7XG5cdFx0XHRcdGNvbnN0IHZlcnNpb24gPSAocGVyaW9kaWNOb3RlcyBhcyB7IG1hbmlmZXN0PzogeyB2ZXJzaW9uPzogc3RyaW5nIH0gfSk/Lm1hbmlmZXN0Py52ZXJzaW9uIHx8ICcwJztcblx0XHRcdFx0Y29uc3QgaXNMZWdhY3kgPSB2ZXJzaW9uLnN0YXJ0c1dpdGgoJzAnKTtcblx0XHRcdCBcblx0XHRcdFx0aWYgKGlzTGVnYWN5KSB7XG5cdFx0XHRcdFx0cmV0dXJuIChwZXJpb2RpY05vdGVzIGFzIHsgc2V0dGluZ3M/OiBSZWNvcmQ8c3RyaW5nLCB7IGVuYWJsZWQ/OiBib29sZWFuIH0+IH0pPy5zZXR0aW5ncz8uWydkYWlseSddPy5lbmFibGVkID09PSB0cnVlO1xuXHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdGNvbnN0IGNhbGVuZGFyU2V0ID0gKHBlcmlvZGljTm90ZXMgYXMgeyBjYWxlbmRhclNldE1hbmFnZXI/OiB7IGdldEFjdGl2ZVNldD86ICgpID0+IFJlY29yZDxzdHJpbmcsIHsgZW5hYmxlZD86IGJvb2xlYW4gfT4gfSB9KT8uY2FsZW5kYXJTZXRNYW5hZ2VyPy5nZXRBY3RpdmVTZXQ/LigpO1xuXHRcdFx0XHRcdHJldHVybiBjYWxlbmRhclNldD8uWydkYXknXT8uZW5hYmxlZCA9PT0gdHJ1ZTtcblx0XHRcdFx0fVxuXHRcdFx0fVxuXHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdH1cblx0XHRcblx0XHQgXG5cdFx0Y29uc3QgcGVyaW9kaWNOb3RlcyA9IHRoaXMuYXBwLnBsdWdpbnM/LnBsdWdpbnM/LlsncGVyaW9kaWMtbm90ZXMnXTtcblx0XHRpZiAoIXBlcmlvZGljTm90ZXMpIHJldHVybiBmYWxzZTtcblx0XHRcblx0XHQvLyBDaGVjayBpZiBwZXJpb2RpYyBub3RlcyBwbHVnaW4gaGFzIHRoZSByZXF1aXJlZCBwZXJpb2QgZW5hYmxlZFxuXHRcdCBcblx0XHRjb25zdCB2ZXJzaW9uID0gKHBlcmlvZGljTm90ZXMgYXMgeyBtYW5pZmVzdD86IHsgdmVyc2lvbj86IHN0cmluZyB9IH0pPy5tYW5pZmVzdD8udmVyc2lvbiB8fCAnMCc7XG5cdFx0Y29uc3QgaXNMZWdhY3kgPSB2ZXJzaW9uLnN0YXJ0c1dpdGgoJzAnKTtcblx0XHRcblx0XHRpZiAoaXNMZWdhY3kpIHtcblx0XHRcdC8vIExlZ2FjeSBwZXJpb2RpYyBub3Rlc1xuXHRcdFx0Y29uc3QgcGVyaW9kTWFwOiBQYXJ0aWFsPFJlY29yZDxIb21lQmFzZVR5cGUsIHN0cmluZz4+ID0ge1xuXHRcdFx0XHRbSG9tZUJhc2VUeXBlLldlZWtseU5vdGVdOiAnd2Vla2x5Jyxcblx0XHRcdFx0W0hvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZV06ICdtb250aGx5Jyxcblx0XHRcdFx0W0hvbWVCYXNlVHlwZS5ZZWFybHlOb3RlXTogJ3llYXJseScsXG5cdFx0XHR9O1xuXHRcdFx0IFxuXHRcdFx0Y29uc3QgYWRqZWN0aXZlID0gcGVyaW9kTWFwW3R5cGVdO1xuXHRcdFx0aWYgKCFhZGplY3RpdmUpIHJldHVybiBmYWxzZTtcblx0XHRcdCBcblx0XHRcdHJldHVybiAocGVyaW9kaWNOb3RlcyBhcyB7IHNldHRpbmdzPzogUmVjb3JkPHN0cmluZywgeyBlbmFibGVkPzogYm9vbGVhbiB9PiB9KT8uc2V0dGluZ3M/LlthZGplY3RpdmVdPy5lbmFibGVkID09PSB0cnVlO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQvLyBOZXcgcGVyaW9kaWMgbm90ZXNcblx0XHRcdGNvbnN0IG5vdW5NYXA6IFBhcnRpYWw8UmVjb3JkPEhvbWVCYXNlVHlwZSwgc3RyaW5nPj4gPSB7XG5cdFx0XHRcdFtIb21lQmFzZVR5cGUuV2Vla2x5Tm90ZV06ICd3ZWVrJyxcblx0XHRcdFx0W0hvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZV06ICdtb250aCcsXG5cdFx0XHRcdFtIb21lQmFzZVR5cGUuWWVhcmx5Tm90ZV06ICd5ZWFyJyxcblx0XHRcdH07XG5cdFx0XHQgXG5cdFx0XHRjb25zdCBub3VuID0gbm91bk1hcFt0eXBlXTtcblx0XHRcdGlmICghbm91bikgcmV0dXJuIGZhbHNlO1xuXHRcdFx0IFxuXHRcdFx0Y29uc3QgY2FsZW5kYXJTZXQgPSAocGVyaW9kaWNOb3RlcyBhcyB7IGNhbGVuZGFyU2V0TWFuYWdlcj86IHsgZ2V0QWN0aXZlU2V0PzogKCkgPT4gUmVjb3JkPHN0cmluZywgeyBlbmFibGVkPzogYm9vbGVhbiB9PiB9IH0pPy5jYWxlbmRhclNldE1hbmFnZXI/LmdldEFjdGl2ZVNldD8uKCk7XG5cdFx0XHQgXG5cdFx0XHRyZXR1cm4gY2FsZW5kYXJTZXQ/Lltub3VuXT8uZW5hYmxlZCA9PT0gdHJ1ZTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2sgaWYgVVJMIHBhcmFtcyBpbmRpY2F0ZSBhIGZpbGUvd29ya3NwYWNlIHNob3VsZCBiZSBvcGVuZWQgKHNraXAgaG9tZXBhZ2UpXG5cdCAqL1xuXHRwcml2YXRlIGhhc1VybFBhcmFtcygpOiBib29sZWFuIHtcblx0XHQvLyBDaGVjayBmb3IgVVJMIHBhcmFtcyB0aGF0IGluZGljYXRlIGEgc3BlY2lmaWMgZmlsZS93b3Jrc3BhY2Ugc2hvdWxkIGJlIG9wZW5lZFxuXHRcdC8vIFRoaXMgcHJldmVudHMgaG9tZXBhZ2UgZnJvbSBvcGVuaW5nIHdoZW4gT2JzaWRpYW4gaXMgb3BlbmVkIHdpdGggYSBzcGVjaWZpYyBmaWxlXG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgIT09ICd1bmRlZmluZWQnICYmIHdpbmRvdy5PQlNfQUNUKSB7XG5cdFx0XHRjb25zdCBwYXJhbXMgPSBPYmplY3Qua2V5cyh3aW5kb3cuT0JTX0FDVCk7XG5cdFx0XHRjb25zdCBhY3Rpb24gPSB3aW5kb3cuT0JTX0FDVC5hY3Rpb247XG5cdFx0XHRyZXR1cm4gKFxuXHRcdFx0XHRhY3Rpb24gIT09IHVuZGVmaW5lZCAmJlxuXHRcdFx0XHRbJ29wZW4nLCAnYWR2YW5jZWQtdXJpJ10uaW5jbHVkZXMoYWN0aW9uKSAmJlxuXHRcdFx0XHRbJ2ZpbGUnLCAnZmlsZXBhdGgnLCAnd29ya3NwYWNlJ10uc29tZShlID0+IHBhcmFtcy5pbmNsdWRlcyhlKSlcblx0XHRcdCk7XG5cdFx0fVxuXHRcdHJldHVybiBmYWxzZTtcblx0fVxuXG5cdC8vIFwiT3BlbiB3aGVuIGVtcHR5XCIgZmVhdHVyZSByZW1vdmVkIC0gcmVkdW5kYW50IHdpdGggXCJOZXcgdGFiIHJlcGxhY2VtZW50OiBvbmx5IHdoZW4gZW1wdHlcIlxuXHQvLyBTaW5jZSBPYnNpZGlhbiBhdXRvLWNyZWF0ZXMgYW4gZW1wdHkgdGFiIHdoZW4geW91IGNsb3NlIHRoZSBsYXN0IG9uZSwgdGhleSBkbyB0aGUgc2FtZSB0aGluZ1xufVxuIiwgIi8qKlxyXG4gKiBIb21lIEJhc2UgUGx1Z2luIFNldHRpbmdzXHJcbiAqL1xyXG5cclxuZXhwb3J0IHR5cGUgVmlld01vZGUgPSAnZGVmYXVsdCcgfCAncHJldmlldycgfCAnc291cmNlJyB8ICdsaXZlJztcclxuZXhwb3J0IHR5cGUgTmV3VGFiTW9kZSA9ICdvbmx5LXdoZW4tZW1wdHknIHwgJ2Fsd2F5cyc7XHJcbmV4cG9ydCB0eXBlIE9wZW5pbmdNb2RlID0gJ3JlcGxhY2UtYWxsJyB8ICdyZXBsYWNlLWxhc3QnIHwgJ3JldGFpbic7XHJcblxyXG4vKipcclxuICogSG9tZXBhZ2UgdHlwZSBlbnVtIC0gbWF0Y2hlcyBob21lcGFnZSBwbHVnaW4ncyBLaW5kIGVudW1cclxuICovXHJcbmV4cG9ydCBlbnVtIEhvbWVCYXNlVHlwZSB7XHJcblx0RmlsZSA9ICdGaWxlJyxcclxuXHRXb3Jrc3BhY2UgPSAnV29ya3NwYWNlJyxcclxuXHRSYW5kb20gPSAnUmFuZG9tIGZpbGUnLFxyXG5cdFJhbmRvbUZvbGRlciA9ICdSYW5kb20gaW4gZm9sZGVyJyxcclxuXHRHcmFwaCA9ICdHcmFwaCB2aWV3JyxcclxuXHROb25lID0gJ05vdGhpbmcnLFxyXG5cdEpvdXJuYWwgPSAnSm91cm5hbCcsXHJcblx0RGFpbHlOb3RlID0gJ0RhaWx5IE5vdGUnLFxyXG5cdFdlZWtseU5vdGUgPSAnV2Vla2x5IE5vdGUnLFxyXG5cdE1vbnRobHlOb3RlID0gJ01vbnRobHkgTm90ZScsXHJcblx0WWVhcmx5Tm90ZSA9ICdZZWFybHkgTm90ZScsXHJcbn1cclxuXHJcbmV4cG9ydCBpbnRlcmZhY2UgSG9tZUJhc2VTZXR0aW5ncyB7XHJcblx0Ly8gR2VuZXJhbFxyXG5cdGhvbWVCYXNlUGF0aDogc3RyaW5nOyAvLyBMZWdhY3kgLSBrZXB0IGZvciBiYWNrd2FyZCBjb21wYXRpYmlsaXR5XHJcblx0aG9tZUJhc2VUeXBlOiBIb21lQmFzZVR5cGU7XHJcblx0aG9tZUJhc2VWYWx1ZTogc3RyaW5nOyAvLyBUeXBlLXNwZWNpZmljIHZhbHVlIChmaWxlIHBhdGgsIHdvcmtzcGFjZSBuYW1lLCBmb2xkZXIgcGF0aCwgZXRjLilcclxuXHRvcGVuT25TdGFydHVwOiBib29sZWFuO1xyXG5cdG9wZW5WaWV3TW9kZTogVmlld01vZGU7XHJcblx0b3Blbk1vZGU6IE9wZW5pbmdNb2RlO1xyXG5cdG1hbnVhbE9wZW5Nb2RlOiBPcGVuaW5nTW9kZTtcclxuXHJcblx0Ly8gVGFiIEJlaGF2aW9yXHJcblx0cmVwbGFjZU5ld1RhYjogYm9vbGVhbjtcclxuXHRuZXdUYWJNb2RlOiBOZXdUYWJNb2RlO1xyXG5cdG9wZW5XaGVuQWxsVGFic0Nsb3NlZDogYm9vbGVhbjsgLy8gT3BlbiBob21lIGJhc2Ugd2hlbiBhbGwgdGFicyBhcmUgY2xvc2VkIChpbmRlcGVuZGVudCBvZiByZXBsYWNlTmV3VGFiKVxyXG5cdGtlZXBFeGlzdGluZ1RhYnM6IGJvb2xlYW47IC8vIExlZ2FjeSAtIG1hcHMgdG8gb3Blbk1vZGU6ICdyZXBsYWNlLWFsbCcgdnMgJ3JldGFpbidcclxuXHR1c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiOiBib29sZWFuOyAvLyBVc2Ugc2VwYXJhdGUgbmV3IHRhYiBzZXR0aW5ncyB2cyBob21lIGJhc2VcclxuXHRuZXdUYWJUeXBlOiBIb21lQmFzZVR5cGU7XHJcblx0bmV3VGFiVmFsdWU6IHN0cmluZztcclxuXHRuZXdUYWJTZXBhcmF0ZU1vYmlsZTogYm9vbGVhbjtcclxuXHRtb2JpbGVOZXdUYWJUeXBlOiBIb21lQmFzZVR5cGU7XHJcblx0bW9iaWxlTmV3VGFiVmFsdWU6IHN0cmluZztcclxuXHJcblx0Ly8gVUkgRmVhdHVyZXMgKG9mZiBieSBkZWZhdWx0KVxyXG5cdHNob3dTdGlja3lIb21lSWNvbjogYm9vbGVhbjtcclxuXHRzdGlja3lJY29uTmFtZTogc3RyaW5nIHwgbnVsbDtcclxuXHRoaWRlSG9tZVRhYkhlYWRlcjogYm9vbGVhbjtcclxuXHRyZXBsYWNlTW9iaWxlTmV3VGFiOiBib29sZWFuO1xyXG5cdFxyXG5cdC8vIE1vYmlsZVxyXG5cdHNlcGFyYXRlTW9iaWxlOiBib29sZWFuO1xyXG5cdG1vYmlsZUhvbWVCYXNlUGF0aDogc3RyaW5nOyAvLyBMZWdhY3lcclxuXHRtb2JpbGVIb21lQmFzZVR5cGU6IEhvbWVCYXNlVHlwZTtcclxuXHRtb2JpbGVIb21lQmFzZVZhbHVlOiBzdHJpbmc7XHJcblxyXG5cdC8vIEF1dG9tYXRpb25cclxuXHRjb21tYW5kT25PcGVuOiBzdHJpbmc7XHJcblx0XHJcblx0Ly8gVmlldyBiZWhhdmlvclxyXG5cdHJldmVydFZpZXc6IGJvb2xlYW47XHJcblx0YXV0b1Njcm9sbDogYm9vbGVhbjtcclxuXHRoaWRlUmVsZWFzZU5vdGVzOiBib29sZWFuO1xyXG59XHJcblxyXG5leHBvcnQgY29uc3QgREVGQVVMVF9TRVRUSU5HUzogSG9tZUJhc2VTZXR0aW5ncyA9IHtcclxuXHQvLyBHZW5lcmFsXHJcblx0aG9tZUJhc2VQYXRoOiAnJywgLy8gTGVnYWN5XHJcblx0aG9tZUJhc2VUeXBlOiBIb21lQmFzZVR5cGUuRmlsZSxcclxuXHRob21lQmFzZVZhbHVlOiAnJyxcclxuXHRvcGVuT25TdGFydHVwOiB0cnVlLFxyXG5cdG9wZW5WaWV3TW9kZTogJ2RlZmF1bHQnLFxyXG5cdG9wZW5Nb2RlOiAncmVwbGFjZS1hbGwnLFxyXG5cdG1hbnVhbE9wZW5Nb2RlOiAncmV0YWluJyxcclxuXHJcblx0Ly8gVGFiIEJlaGF2aW9yXHJcblx0cmVwbGFjZU5ld1RhYjogZmFsc2UsXHJcblx0bmV3VGFiTW9kZTogJ29ubHktd2hlbi1lbXB0eScsIC8vIERlZmF1bHQ6IG9ubHkgcmVwbGFjZSB3aGVuIG5vIHRhYnMgYXJlIG9wZW5cclxuXHRvcGVuV2hlbkFsbFRhYnNDbG9zZWQ6IHRydWUsIC8vIERlZmF1bHQ6IG9wZW4gaG9tZSBiYXNlIHdoZW4gYWxsIHRhYnMgYXJlIGNsb3NlZFxyXG5cdGtlZXBFeGlzdGluZ1RhYnM6IHRydWUsXHJcblx0dXNlRGlmZmVyZW50RmlsZUZvck5ld1RhYjogZmFsc2UsXHJcblx0bmV3VGFiVHlwZTogSG9tZUJhc2VUeXBlLkZpbGUsXHJcblx0bmV3VGFiVmFsdWU6ICcnLFxyXG5cdG5ld1RhYlNlcGFyYXRlTW9iaWxlOiBmYWxzZSxcclxuXHRtb2JpbGVOZXdUYWJUeXBlOiBIb21lQmFzZVR5cGUuRmlsZSxcclxuXHRtb2JpbGVOZXdUYWJWYWx1ZTogJycsXHJcblxyXG5cdC8vIFVJIEZlYXR1cmVzXHJcblx0c2hvd1N0aWNreUhvbWVJY29uOiBmYWxzZSxcclxuXHRzdGlja3lJY29uTmFtZTogJ2hvbWUnLFxyXG5cdGhpZGVIb21lVGFiSGVhZGVyOiBmYWxzZSxcclxuXHRyZXBsYWNlTW9iaWxlTmV3VGFiOiBmYWxzZSxcclxuXHRcclxuXHQvLyBNb2JpbGVcclxuXHRzZXBhcmF0ZU1vYmlsZTogZmFsc2UsXHJcblx0bW9iaWxlSG9tZUJhc2VQYXRoOiAnJywgLy8gTGVnYWN5XHJcblx0bW9iaWxlSG9tZUJhc2VUeXBlOiBIb21lQmFzZVR5cGUuRmlsZSxcclxuXHRtb2JpbGVIb21lQmFzZVZhbHVlOiAnJyxcclxuXHJcblx0Ly8gQXV0b21hdGlvblxyXG5cdGNvbW1hbmRPbk9wZW46ICcnLFxyXG5cdFxyXG5cdC8vIFZpZXcgYmVoYXZpb3JcclxuXHRyZXZlcnRWaWV3OiBmYWxzZSxcclxuXHRhdXRvU2Nyb2xsOiBmYWxzZSxcclxuXHRoaWRlUmVsZWFzZU5vdGVzOiBmYWxzZSwgLy8gT0ZGIGJ5IGRlZmF1bHRcclxufTtcclxuXHJcbi8qKlxyXG4gKiBWaWV3IG1vZGUgZGlzcGxheSBuYW1lcyBmb3Igc2V0dGluZ3MgZHJvcGRvd25cclxuICovXHJcbmV4cG9ydCBjb25zdCBWSUVXX01PREVfT1BUSU9OUzogUmVjb3JkPFZpZXdNb2RlLCBzdHJpbmc+ID0ge1xyXG5cdCdkZWZhdWx0JzogJ0RlZmF1bHQnLFxyXG5cdCdwcmV2aWV3JzogJ1JlYWRpbmcgdmlldycsXHJcblx0J3NvdXJjZSc6ICdTb3VyY2UgbW9kZScsXHJcblx0J2xpdmUnOiAnTGl2ZSBQcmV2aWV3JyxcclxufTtcclxuXHJcbi8qKlxyXG4gKiBOZXcgdGFiIG1vZGUgZGlzcGxheSBuYW1lcyBmb3Igc2V0dGluZ3MgZHJvcGRvd25cclxuICovXHJcbmV4cG9ydCBjb25zdCBORVdfVEFCX01PREVfT1BUSU9OUzogUmVjb3JkPE5ld1RhYk1vZGUsIHN0cmluZz4gPSB7XHJcblx0J29ubHktd2hlbi1lbXB0eSc6ICdPbmx5IHdoZW4gbm8gdGFicyBhcmUgb3BlbicsXHJcblx0J2Fsd2F5cyc6ICdBbHdheXMgcmVwbGFjZSBuZXcgdGFicycsXHJcbn07XHJcblxyXG4vKipcclxuICogT3BlbmluZyBtb2RlIGRpc3BsYXkgbmFtZXMgZm9yIHNldHRpbmdzIGRyb3Bkb3duXHJcbiAqL1xyXG5leHBvcnQgY29uc3QgT1BFTklOR19NT0RFX09QVElPTlM6IFJlY29yZDxPcGVuaW5nTW9kZSwgc3RyaW5nPiA9IHtcclxuXHQncmVwbGFjZS1hbGwnOiAnUmVwbGFjZSBhbGwgb3BlbiBub3RlcycsXHJcblx0J3JlcGxhY2UtbGFzdCc6ICdSZXBsYWNlIGxhc3Qgbm90ZScsXHJcblx0J3JldGFpbic6ICdLZWVwIG9wZW4gbm90ZXMnLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEhvbWVwYWdlIHR5cGVzIHRoYXQgZG9uJ3QgcmVxdWlyZSBhIHZhbHVlIGlucHV0XHJcbiAqL1xyXG5leHBvcnQgY29uc3QgVU5DSEFOR0VBQkxFX1RZUEVTOiBIb21lQmFzZVR5cGVbXSA9IFtcclxuXHRIb21lQmFzZVR5cGUuUmFuZG9tLFxyXG5cdEhvbWVCYXNlVHlwZS5HcmFwaCxcclxuXHRIb21lQmFzZVR5cGUuTm9uZSxcclxuXHRIb21lQmFzZVR5cGUuRGFpbHlOb3RlLFxyXG5cdEhvbWVCYXNlVHlwZS5XZWVrbHlOb3RlLFxyXG5cdEhvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZSxcclxuXHRIb21lQmFzZVR5cGUuWWVhcmx5Tm90ZSxcclxuXTtcclxuIiwgIi8qKlxuICogSG9tZSBCYXNlIFNldHRpbmdzIFRhYlxuICovXG5cbmltcG9ydCB7IEFwcCwgUGx1Z2luU2V0dGluZ1RhYiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIEhvbWVCYXNlUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgXG5cdFZJRVdfTU9ERV9PUFRJT05TLCBcblx0TkVXX1RBQl9NT0RFX09QVElPTlMsIFxuXHRPUEVOSU5HX01PREVfT1BUSU9OUyxcblx0Vmlld01vZGUsIFxuXHROZXdUYWJNb2RlLFxuXHRPcGVuaW5nTW9kZSxcblx0SG9tZUJhc2VUeXBlLFxuXHRVTkNIQU5HRUFCTEVfVFlQRVMsXG59IGZyb20gJy4uL3NldHRpbmdzJztcbmltcG9ydCB7IGNyZWF0ZVNldHRpbmdzR3JvdXAgfSBmcm9tICcuLi91dGlscy9zZXR0aW5ncy1jb21wYXQnO1xuaW1wb3J0IHsgRmlsZVBhdGhTdWdnZXN0LCBGb2xkZXJTdWdnZXN0LCBXb3Jrc3BhY2VTdWdnZXN0IH0gZnJvbSAnLi9maWxlLXN1Z2dlc3QnO1xuaW1wb3J0IHsgQ29tbWFuZFN1Z2dlc3QsIGdldENvbW1hbmRCeUlkIH0gZnJvbSAnLi9jb21tYW5kLXN1Z2dlc3QnO1xuaW1wb3J0IHsgSWNvblBpY2tlciB9IGZyb20gJy4vaWNvbi1waWNrZXInO1xuXG5leHBvcnQgY2xhc3MgSG9tZUJhc2VTZXR0aW5nVGFiIGV4dGVuZHMgUGx1Z2luU2V0dGluZ1RhYiB7XG5cdHBsdWdpbjogSG9tZUJhc2VQbHVnaW47XG5cblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIHBsdWdpbjogSG9tZUJhc2VQbHVnaW4pIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cdFx0Y29udGFpbmVyRWwuZW1wdHkoKTtcblxuXHRcdC8vIEdldCBhY3RpdmUgc2V0dGluZ3MgKG1vYmlsZSBvciBkZXNrdG9wKVxuXHRcdGNvbnN0IGlzTW9iaWxlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VwYXJhdGVNb2JpbGU7XG5cdFx0Y29uc3QgYWN0aXZlVHlwZSA9IGlzTW9iaWxlID8gdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlIDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9tZUJhc2VUeXBlO1xuXHRcdGNvbnN0IGFjdGl2ZVZhbHVlID0gaXNNb2JpbGUgPyB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlIDogdGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9tZUJhc2VWYWx1ZTtcblxuXHRcdC8vIEdlbmVyYWwgU2V0dGluZ3MgKG5vIGhlYWRpbmcgZm9yIGZpcnN0IGdyb3VwKVxuXHRcdGNvbnN0IGdlbmVyYWxHcm91cCA9IGNyZWF0ZVNldHRpbmdzR3JvdXAoY29udGFpbmVyRWwsIHVuZGVmaW5lZCwgJ2hvbWUtYmFzZScpO1xuXG5cdFx0Ly8gSG9tZSBwYWdlIHR5cGUgZHJvcGRvd25cblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnVHlwZScpXG5cdFx0XHRcdC5zZXREZXNjKCdXaGF0IHRvIG9wZW4gYXMgeW91ciBob21lIGJhc2UnKVxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdFx0bGV0IHBsdWdpbkRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0Zm9yIChjb25zdCB0eXBlIG9mIE9iamVjdC52YWx1ZXMoSG9tZUJhc2VUeXBlKSkge1xuXHRcdFx0XHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5oYXNSZXF1aXJlZFBsdWdpbih0eXBlKSkge1xuXHRcdFx0XHRcdFx0XHQvLyBJZiBjdXJyZW50IHR5cGUgaXMgZGlzYWJsZWQsIG1hcmsgaXQgYnV0IHN0aWxsIGFsbG93IGl0XG5cdFx0XHRcdFx0XHRcdGlmICh0eXBlID09PSBhY3RpdmVUeXBlKSB7XG5cdFx0XHRcdFx0XHRcdFx0cGx1Z2luRGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih0eXBlLCB0eXBlKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgZGlzYWJsZWQgb3B0aW9uXG5cdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uc2VsZWN0RWwuY3JlYXRlRWwoJ29wdGlvbicsIHsgXG5cdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiB0eXBlLCBcblx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgZGlzYWJsZWQ6ICd0cnVlJyB9IFxuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odHlwZSwgdHlwZSk7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoYWN0aXZlVHlwZSB8fCBIb21lQmFzZVR5cGUuRmlsZSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0aWYgKGlzTW9iaWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlID0gdmFsdWUgYXMgSG9tZUJhc2VUeXBlO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhvbWVCYXNlVHlwZSA9IHZhbHVlIGFzIEhvbWVCYXNlVHlwZTtcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciB0byBzaG93L2hpZGUgdmFsdWUgaW5wdXRcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XG5cdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0XHRcdFx0XHRyZXF1ZXN0QW5pbWF0aW9uRnJhbWUoKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdC8vIFNob3cgd2FybmluZyBpZiBjdXJyZW50IHR5cGUgcmVxdWlyZXMgYSBkaXNhYmxlZCBwbHVnaW5cblx0XHRcdFx0XHRpZiAocGx1Z2luRGlzYWJsZWQpIHtcblx0XHRcdFx0XHRcdHNldHRpbmcuZGVzY0VsLmNyZWF0ZURpdih7XG5cdFx0XHRcdFx0XHRcdHRleHQ6ICdUaGUgcGx1Z2luIHJlcXVpcmVkIGZvciB0aGlzIGhvbWUgcGFnZSB0eXBlIGlzblxcJ3QgYXZhaWxhYmxlLicsXG5cdFx0XHRcdFx0XHRcdGNsczogJ21vZC13YXJuaW5nJ1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIFZhbHVlIGlucHV0IChjb25kaXRpb25hbCBvbiB0eXBlKVxuXHRcdGlmICghVU5DSEFOR0VBQkxFX1RZUEVTLmluY2x1ZGVzKGFjdGl2ZVR5cGUpKSB7XG5cdFx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRsZXQgZGVzYyA9ICcnO1xuXHRcdFx0XHRsZXQgcGxhY2Vob2xkZXIgPSAnJztcblxuXHRcdFx0XHRpZiAoYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUpIHtcblx0XHRcdFx0XHRkZXNjID0gJ1RoZSBmaWxlIHRvIG9wZW4gYXMgeW91ciBob21lIGJhc2UgKHN1cHBvcnRzIC5tZCwgLm1keCwgLmNhbnZhcywgLmJhc2UpJztcblx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdQYXRoIHRvIGhvbWUgYmFzZSBmaWxlJztcblx0XHRcdFx0fSBlbHNlIGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlKSB7XG5cdFx0XHRcdFx0ZGVzYyA9ICdUaGUgd29ya3NwYWNlIHRvIGxvYWQgYXMgeW91ciBob21lIGJhc2UnO1xuXHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ1dvcmtzcGFjZSBuYW1lJztcblx0XHRcdFx0fSBlbHNlIGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyKSB7XG5cdFx0XHRcdFx0ZGVzYyA9ICdUaGUgZm9sZGVyIHRvIHBpY2sgYSByYW5kb20gZmlsZSBmcm9tJztcblx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdGb2xkZXIgcGF0aCc7XG5cdFx0XHRcdH0gZWxzZSBpZiAoYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwpIHtcblx0XHRcdFx0XHRkZXNjID0gJ1RoZSBqb3VybmFsIG5hbWUnO1xuXHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ0pvdXJuYWwgbmFtZSc7XG5cdFx0XHRcdH1cblxuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoYWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUgPyAnRmlsZScgOiBcblx0XHRcdFx0XHRcdFx0YWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSA/ICdXb3Jrc3BhY2UnIDpcblx0XHRcdFx0XHRcdFx0YWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlciA/ICdGb2xkZXInIDpcblx0XHRcdFx0XHRcdFx0YWN0aXZlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwgPyAnSm91cm5hbCcgOiAnVmFsdWUnKVxuXHRcdFx0XHRcdC5zZXREZXNjKGRlc2MpXG5cdFx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcblx0XHRcdFx0XHRcdC8vIEFkZCBhcHByb3ByaWF0ZSBzdWdnZXN0ZXJcblx0XHRcdFx0XHRcdGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xuXHRcdFx0XHRcdFx0XHRuZXcgRmlsZVBhdGhTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlKSB7XG5cdFx0XHRcdFx0XHRcdG5ldyBXb3Jrc3BhY2VTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChhY3RpdmVUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyKSB7XG5cdFx0XHRcdFx0XHRcdG5ldyBGb2xkZXJTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHR0ZXh0XG5cdFx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlcilcblx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKGFjdGl2ZVZhbHVlIHx8ICcnKVxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKGlzTW9iaWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVZhbHVlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBBbHNvIHVwZGF0ZSBsZWdhY3kgcGF0aCBmb3IgY29tcGF0aWJpbGl0eVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlUGF0aCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVZhbHVlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBBbHNvIHVwZGF0ZSBsZWdhY3kgcGF0aCBmb3IgY29tcGF0aWJpbGl0eVxuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKGFjdGl2ZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmhvbWVCYXNlUGF0aCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblx0XHR9XG5cblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnT3BlbiBvbiBzdGFydHVwJylcblx0XHRcdFx0LnNldERlc2MoJ09wZW4gdGhlIGhvbWUgYmFzZSB3aGVuIGxhdW5jaGluZyBPYnNpZGlhbicpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5PblN0YXJ0dXApXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5PblN0YXJ0dXAgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBcIk9wZW4gd2hlbiBlbXB0eVwiIHNldHRpbmcgcmVtb3ZlZCAtIHJlZHVuZGFudCB3aXRoIFwiTmV3IHRhYiByZXBsYWNlbWVudDogb25seSB3aGVuIGVtcHR5XCJcblx0XHQvLyBTaW5jZSBPYnNpZGlhbiBhdXRvLWNyZWF0ZXMgYW4gZW1wdHkgdGFiIHdoZW4geW91IGNsb3NlIHRoZSBsYXN0IG9uZSwgdGhleSBkbyB0aGUgc2FtZSB0aGluZ1xuXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ09wZW5pbmcgbW9kZSAoc3RhcnR1cCknKVxuXHRcdFx0XHQuc2V0RGVzYygnSG93IHRvIGhhbmRsZSBleGlzdGluZyB0YWJzIHdoZW4gb3BlbmluZyBvbiBzdGFydHVwJylcblx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuXHRcdFx0XHRcdGZvciAoY29uc3QgW3ZhbHVlLCBsYWJlbF0gb2YgT2JqZWN0LmVudHJpZXMoT1BFTklOR19NT0RFX09QVElPTlMpKSB7XG5cdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odmFsdWUsIGxhYmVsKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0ZHJvcGRvd25cblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuTW9kZSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Mub3Blbk1vZGUgPSB2YWx1ZSBhcyBPcGVuaW5nTW9kZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHRnZW5lcmFsR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0c2V0dGluZ1xuXHRcdFx0XHQuc2V0TmFtZSgnT3BlbmluZyBtb2RlIChtYW51YWwpJylcblx0XHRcdFx0LnNldERlc2MoJ0hvdyB0byBoYW5kbGUgZXhpc3RpbmcgdGFicyB3aGVuIG9wZW5pbmcgbWFudWFsbHknKVxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBbdmFsdWUsIGxhYmVsXSBvZiBPYmplY3QuZW50cmllcyhPUEVOSU5HX01PREVfT1BUSU9OUykpIHtcblx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih2YWx1ZSwgbGFiZWwpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1hbnVhbE9wZW5Nb2RlKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYW51YWxPcGVuTW9kZSA9IHZhbHVlIGFzIE9wZW5pbmdNb2RlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdWaWV3IG1vZGUnKVxuXHRcdFx0XHQuc2V0RGVzYygnSG93IHRvIG9wZW4gTWFya2Rvd24gZmlsZXMnKVxuXHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdFx0Zm9yIChjb25zdCBbdmFsdWUsIGxhYmVsXSBvZiBPYmplY3QuZW50cmllcyhWSUVXX01PREVfT1BUSU9OUykpIHtcblx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih2YWx1ZSwgbGFiZWwpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5WaWV3TW9kZSlcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3Mub3BlblZpZXdNb2RlID0gdmFsdWUgYXMgVmlld01vZGU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ1JldmVydCB2aWV3IG9uIGNsb3NlJylcblx0XHRcdFx0LnNldERlc2MoJ1doZW4gbmF2aWdhdGluZyBhd2F5IGZyb20gdGhlIGhvbWUgYmFzZSwgcmVzdG9yZSB0aGUgZGVmYXVsdCB2aWV3Jylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2ZXJ0Vmlldylcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MucmV2ZXJ0VmlldyA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdGdlbmVyYWxHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdBdXRvLXNjcm9sbCcpXG5cdFx0XHRcdC5zZXREZXNjKCdXaGVuIG9wZW5pbmcgdGhlIGhvbWUgYmFzZSwgc2Nyb2xsIHRvIHRoZSBib3R0b20gYW5kIGZvY3VzIG9uIHRoZSBsYXN0IGxpbmUnKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvU2Nyb2xsKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5hdXRvU2Nyb2xsID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Z2VuZXJhbEdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ0hpZGUgcmVsZWFzZSBub3RlcycpXG5cdFx0XHRcdC5zZXREZXNjKCdOZXZlciBkaXNwbGF5IHJlbGVhc2Ugbm90ZXMgd2hlbiBPYnNpZGlhbiB1cGRhdGVzJylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZVJlbGVhc2VOb3Rlcylcblx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZVJlbGVhc2VOb3RlcyA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIFRhYiBCZWhhdmlvciBTZXR0aW5nc1xuXHRcdGNvbnN0IHRhYkdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ1RhYiBCZWhhdmlvcicsICdob21lLWJhc2UnKTtcblxuXHRcdHRhYkdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ09wZW4gaG9tZSBiYXNlIHdoZW4gYWxsIHRhYnMgYXJlIGNsb3NlZCcpXG5cdFx0XHRcdC5zZXREZXNjKCdXaGVuIHlvdSBjbG9zZSBhbGwgdGFicywgYXV0b21hdGljYWxseSBvcGVuIHRoZSBob21lIGJhc2UnKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuV2hlbkFsbFRhYnNDbG9zZWQpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm9wZW5XaGVuQWxsVGFic0Nsb3NlZCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdHRhYkdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ1JlcGxhY2UgbmV3IHRhYnMnKVxuXHRcdFx0XHQuc2V0RGVzYygnT3BlbiBob21lIGJhc2UgaW5zdGVhZCBvZiBuZXcgZW1wdHkgdGFicyAod29ya3MgaW5kZXBlbmRlbnRseSBvZiBcIm9wZW4gaG9tZSBiYXNlIHdoZW4gYWxsIHRhYnMgYXJlIGNsb3NlZFwiKScpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGxhY2VOZXdUYWIpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGxhY2VOZXdUYWIgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gYmVmb3JlIHJlLXJlbmRlcmluZ1xuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpOyAvLyBSZS1yZW5kZXIgdG8gc2hvdy9oaWRlIGRlcGVuZGVudCBzZXR0aW5nXG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHQvLyBSZXN0b3JlIHNjcm9sbCBwb3NpdGlvbiBhZnRlciByZW5kZXJpbmdcblx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoc2Nyb2xsQ29udGFpbmVyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBPbmx5IHNob3cgbmV3IHRhYiBtb2RlIGlmIHJlcGxhY2UgbmV3IHRhYiBpcyBlbmFibGVkXG5cdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGxhY2VOZXdUYWIpIHtcblx0XHRcdHRhYkdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKCdOZXcgdGFiIHJlcGxhY2VtZW50IG1vZGUnKVxuXHRcdFx0XHRcdC5zZXREZXNjKCdXaGVuIHRvIHJlcGxhY2UgbmV3IHRhYnMgKG9ubHkgd2hlbiBubyB0YWJzIGFyZSBvcGVuLCBvciBhbHdheXMpJylcblx0XHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdFx0XHRmb3IgKGNvbnN0IFt2YWx1ZSwgbGFiZWxdIG9mIE9iamVjdC5lbnRyaWVzKE5FV19UQUJfTU9ERV9PUFRJT05TKSkge1xuXHRcdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odmFsdWUsIGxhYmVsKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZXdUYWJNb2RlKVxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiTW9kZSA9IHZhbHVlIGFzIE5ld1RhYk1vZGU7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFVzZSBkaWZmZXJlbnQgZmlsZSBmb3IgbmV3IHRhYnMgdG9nZ2xlXG5cdFx0XHR0YWJHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHQuc2V0TmFtZSgnVXNlIGRpZmZlcmVudCBob21lIGJhc2UgZm9yIG5ldyB0YWJzJylcblx0XHRcdFx0XHQuc2V0RGVzYygnQ29uZmlndXJlIGEgZGlmZmVyZW50IGhvbWUgYmFzZSB0byBvcGVuIGZvciBuZXcgdGFicyAoaW5zdGVhZCBvZiB0aGUgbWFpbiBob21lIGJhc2UpJylcblx0XHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MudXNlRGlmZmVyZW50RmlsZUZvck5ld1RhYilcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZURpZmZlcmVudEZpbGVGb3JOZXdUYWIgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gYmVmb3JlIHJlLXJlbmRlcmluZ1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xuXHRcdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpOyAvLyBSZS1yZW5kZXIgdG8gc2hvdy9oaWRlIGRlcGVuZGVudCBzZXR0aW5nc1xuXHRcdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRcdC8vIFJlc3RvcmUgc2Nyb2xsIHBvc2l0aW9uIGFmdGVyIHJlbmRlcmluZ1xuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2Nyb2xsQ29udGFpbmVyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdC8vIFNob3cgbmV3IHRhYiBjb25maWd1cmF0aW9uIGlmIGVuYWJsZWQgKGFsd2F5cyBkZXNrdG9wIHNldHRpbmdzKVxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnVzZURpZmZlcmVudEZpbGVGb3JOZXdUYWIpIHtcblx0XHRcdFx0Y29uc3QgZGVza3RvcFR5cGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZXdUYWJUeXBlIHx8IEhvbWVCYXNlVHlwZS5GaWxlO1xuXHRcdFx0XHRjb25zdCBkZXNrdG9wVmFsdWUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZXdUYWJWYWx1ZSB8fCAnJztcblxuXHRcdFx0XHQvLyBOZXcgdGFiIHR5cGUgZHJvcGRvd25cblx0XHRcdFx0dGFiR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHRcdC5zZXROYW1lKCdOZXcgdGFiIHR5cGUnKVxuXHRcdFx0XHRcdFx0LnNldERlc2MoJ1doYXQgdG8gb3BlbiBmb3IgbmV3IHRhYnMnKVxuXHRcdFx0XHRcdFx0LmFkZERyb3Bkb3duKChkcm9wZG93bikgPT4ge1xuXHRcdFx0XHRcdFx0XHRsZXQgcGx1Z2luRGlzYWJsZWQgPSBmYWxzZTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdGZvciAoY29uc3QgdHlwZSBvZiBPYmplY3QudmFsdWVzKEhvbWVCYXNlVHlwZSkpIHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoIXRoaXMucGx1Z2luLmhhc1JlcXVpcmVkUGx1Z2luKHR5cGUpKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBJZiBjdXJyZW50IHR5cGUgaXMgZGlzYWJsZWQsIG1hcmsgaXQgYnV0IHN0aWxsIGFsbG93IGl0XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAodHlwZSA9PT0gZGVza3RvcFR5cGUpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0cGx1Z2luRGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odHlwZSwgdHlwZSk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9IGVsc2Uge1xuXHRcdFx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgZGlzYWJsZWQgb3B0aW9uXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLnNlbGVjdEVsLmNyZWF0ZUVsKCdvcHRpb24nLCB7IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdHRleHQ6IHR5cGUsIFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgZGlzYWJsZWQ6ICd0cnVlJyB9IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGludWU7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdGRyb3Bkb3duLmFkZE9wdGlvbih0eXBlLCB0eXBlKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKGRlc2t0b3BUeXBlKVxuXHRcdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYlR5cGUgPSB2YWx1ZSBhcyBIb21lQmFzZVR5cGU7XG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHNob3cvaGlkZSB2YWx1ZSBpbnB1dFxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIFNob3cgd2FybmluZyBpZiBjdXJyZW50IHR5cGUgcmVxdWlyZXMgYSBkaXNhYmxlZCBwbHVnaW5cblx0XHRcdFx0XHRcdFx0aWYgKHBsdWdpbkRpc2FibGVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZy5kZXNjRWwuY3JlYXRlRGl2KHtcblx0XHRcdFx0XHRcdFx0XHRcdHRleHQ6ICdUaGUgcGx1Z2luIHJlcXVpcmVkIGZvciB0aGlzIG5ldyB0YWIgdHlwZSBpc25cXCd0IGF2YWlsYWJsZS4nLFxuXHRcdFx0XHRcdFx0XHRcdFx0Y2xzOiAnbW9kLXdhcm5pbmcnXG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHQvLyBWYWx1ZSBpbnB1dCAoY29uZGl0aW9uYWwgb24gdHlwZSlcblx0XHRcdFx0aWYgKCFVTkNIQU5HRUFCTEVfVFlQRVMuaW5jbHVkZXMoZGVza3RvcFR5cGUpKSB7XG5cdFx0XHRcdFx0dGFiR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRcdFx0bGV0IGRlc2MgPSAnJztcblx0XHRcdFx0XHRcdGxldCBwbGFjZWhvbGRlciA9ICcnO1xuXG5cdFx0XHRcdFx0XHRpZiAoZGVza3RvcFR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XG5cdFx0XHRcdFx0XHRcdGRlc2MgPSAnVGhlIGZpbGUgdG8gb3BlbiBmb3IgbmV3IHRhYnMgKHN1cHBvcnRzIC5tZCwgLm1keCwgLmNhbnZhcywgLmJhc2UpJztcblx0XHRcdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSAnUGF0aCB0byBuZXcgdGFiIGZpbGUnO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSkge1xuXHRcdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSB3b3Jrc3BhY2UgdG8gbG9hZCBmb3IgbmV3IHRhYnMnO1xuXHRcdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdXb3Jrc3BhY2UgbmFtZSc7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGRlc2t0b3BUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyKSB7XG5cdFx0XHRcdFx0XHRcdGRlc2MgPSAnVGhlIGZvbGRlciB0byBwaWNrIGEgcmFuZG9tIGZpbGUgZnJvbSBmb3IgbmV3IHRhYnMnO1xuXHRcdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdGb2xkZXIgcGF0aCc7XG5cdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGRlc2t0b3BUeXBlID09PSBIb21lQmFzZVR5cGUuSm91cm5hbCkge1xuXHRcdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBqb3VybmFsIG5hbWUgZm9yIG5ldyB0YWJzJztcblx0XHRcdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSAnSm91cm5hbCBuYW1lJztcblx0XHRcdFx0XHRcdH1cblxuXHRcdFx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdFx0XHQuc2V0TmFtZShkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUgPyAnTmV3IHRhYiBmaWxlJyA6IFxuXHRcdFx0XHRcdFx0XHRcdFx0ZGVza3RvcFR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UgPyAnTmV3IHRhYiB3b3Jrc3BhY2UnIDpcblx0XHRcdFx0XHRcdFx0XHRcdGRlc2t0b3BUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyID8gJ05ldyB0YWIgZm9sZGVyJyA6XG5cdFx0XHRcdFx0XHRcdFx0XHRkZXNrdG9wVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwgPyAnTmV3IHRhYiBqb3VybmFsJyA6ICdOZXcgdGFiIHZhbHVlJylcblx0XHRcdFx0XHRcdFx0LnNldERlc2MoZGVzYylcblx0XHRcdFx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcblx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgYXBwcm9wcmlhdGUgc3VnZ2VzdGVyXG5cdFx0XHRcdFx0XHRcdFx0aWYgKGRlc2t0b3BUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmV3IEZpbGVQYXRoU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGRlc2t0b3BUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXcgV29ya3NwYWNlU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKGRlc2t0b3BUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRuZXcgRm9sZGVyU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKHBsYWNlaG9sZGVyKVxuXHRcdFx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKGRlc2t0b3BWYWx1ZSB8fCAnJylcblx0XHRcdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiVmFsdWUgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBMZWdhY3kgXCJLZWVwIGV4aXN0aW5nIHRhYnNcIiAtIGtlcHQgZm9yIGJhY2t3YXJkIGNvbXBhdGliaWxpdHkgYnV0IGhpZGRlblxuXHRcdC8vIChmdW5jdGlvbmFsaXR5IG5vdyBoYW5kbGVkIGJ5IFwiT3BlbmluZyBtb2RlIChzdGFydHVwKVwiKVxuXG5cdFx0Ly8gVUkgRmVhdHVyZXMgU2V0dGluZ3Ncblx0XHRjb25zdCB1aUdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ1VJIEZlYXR1cmVzJywgJ2hvbWUtYmFzZScpO1xuXG5cdFx0dWlHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdTdGlja3kgaG9tZSBpY29uJylcblx0XHRcdFx0LnNldERlc2MoJ1Nob3cgYSBob21lIGljb24gaW4gdGhlIHRhYiBiYXIgdGhhdCBzdGF5cyBwaW5uZWQgdG8gdGhlIGxlZnQgKGRlc2t0b3Agb25seSknKVxuXHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0XHR0b2dnbGVcblx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbiA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4udXBkYXRlU3RpY2t5VGFiSWNvbigpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gUHJlc2VydmUgc2Nyb2xsIHBvc2l0aW9uIGJlZm9yZSByZS1yZW5kZXJpbmdcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLnBhcmVudEVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTsgLy8gUmUtcmVuZGVyIHRvIHNob3cvaGlkZSBkZXBlbmRlbnQgc2V0dGluZ1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyaW5nXG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gT25seSBzaG93IHN0aWNreSBpY29uIHNldHRpbmdzIGlmIHN0aWNreSBpY29uIGlzIGVuYWJsZWRcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKSB7XG5cdFx0XHR1aUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKCdJY29uJylcblx0XHRcdFx0XHQuc2V0RGVzYygnVGhlIGljb24gdG8gZGlzcGxheSBpbiB0aGUgc3RpY2t5IGhvbWUgaWNvbicpXG5cdFx0XHRcdFx0LmFkZEJ1dHRvbigoYnV0dG9uKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBpY29uTmFtZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnN0aWNreUljb25OYW1lIHx8ICdob21lJztcblx0XHRcdFx0XHRcdGJ1dHRvblxuXHRcdFx0XHRcdFx0XHQuc2V0QnV0dG9uVGV4dCgnQ2hhbmdlIGljb24nKVxuXHRcdFx0XHRcdFx0XHQuc2V0SWNvbihpY29uTmFtZSlcblx0XHRcdFx0XHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHBpY2tlciA9IG5ldyBJY29uUGlja2VyKFxuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5hcHAsXG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGlja3lJY29uTmFtZSxcblx0XHRcdFx0XHRcdFx0XHRcdChpY29uOiBzdHJpbmcgfCBudWxsKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHZvaWQgKGFzeW5jICgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGlja3lJY29uTmFtZSA9IGljb247XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gVXBkYXRlIHRoZSBpY29uIGRpc3BsYXlcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zdGlja3lUYWJTZXJ2aWNlLnVwZGF0ZSgpO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdC8vIFJlLXJlbmRlciBzZXR0aW5ncyB0byB1cGRhdGUgYnV0dG9uIGljb25cblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSkoKTtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHQpO1xuXHRcdFx0XHRcdFx0XHRcdHBpY2tlci5vcGVuKCk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cblx0XHRcdHVpR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoJ0hpZGUgdGFiIGhlYWRlcicpXG5cdFx0XHRcdFx0LnNldERlc2MoJ0hpZGUgdGhlIHN0aWNreSBob21lIHRhYiBoZWFkZXIgd2hlbiBpdFxcJ3Mgb3BlbiwgdXNpbmcgdGhlIHN0aWNreSBpY29uIGFzIHRoZSB0YWIgaW5kaWNhdG9yJylcblx0XHRcdFx0XHQuYWRkVG9nZ2xlKCh0b2dnbGUpID0+IHtcblx0XHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUhvbWVUYWJIZWFkZXIpXG5cdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlSG9tZVRhYkhlYWRlciA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlVGFiSGVhZGVycygpO1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXHRcdH1cblxuXG5cdFx0Ly8gTW9iaWxlIFNldHRpbmdzXG5cdFx0Y29uc3QgbW9iaWxlR3JvdXAgPSBjcmVhdGVTZXR0aW5nc0dyb3VwKGNvbnRhaW5lckVsLCAnTW9iaWxlJywgJ2hvbWUtYmFzZScpO1xuXG5cdFx0bW9iaWxlR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoJ1NlcGFyYXRlIG1vYmlsZSBob21lIGJhc2UnKVxuXHRcdFx0XHRcdC5zZXREZXNjKCdVc2UgYSBkaWZmZXJlbnQgaG9tZSBiYXNlIG9uIG1vYmlsZSBkZXZpY2VzJylcblx0XHRcdFx0LmFkZFRvZ2dsZSgodG9nZ2xlKSA9PiB7XG5cdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2VwYXJhdGVNb2JpbGUpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNlcGFyYXRlTW9iaWxlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHNob3cgbW9iaWxlIHNldHRpbmdzXG5cdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xuXHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRpZiAoc2Nyb2xsQ29udGFpbmVyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHQvLyBTaG93IG1vYmlsZS1zcGVjaWZpYyBzZXR0aW5ncyBpZiBzZXBhcmF0ZSBtb2JpbGUgaXMgZW5hYmxlZFxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zZXBhcmF0ZU1vYmlsZSkge1xuXHRcdFx0bW9iaWxlR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0LnNldE5hbWUoJ01vYmlsZSBob21lIGJhc2UnKVxuXHRcdFx0XHRcdC5zZXREZXNjKCdXaGF0IHRvIG9wZW4gYXMgeW91ciBob21lIGJhc2Ugb24gbW9iaWxlJylcblx0XHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBtb2JpbGVUeXBlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlIHx8IEhvbWVCYXNlVHlwZS5GaWxlO1xuXHRcdFx0XHRcdFx0bGV0IHBsdWdpbkRpc2FibGVkID0gZmFsc2U7XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGZvciAoY29uc3QgdHlwZSBvZiBPYmplY3QudmFsdWVzKEhvbWVCYXNlVHlwZSkpIHtcblx0XHRcdFx0XHRcdFx0aWYgKCF0aGlzLnBsdWdpbi5oYXNSZXF1aXJlZFBsdWdpbih0eXBlKSkge1xuXHRcdFx0XHRcdFx0XHRcdC8vIElmIGN1cnJlbnQgdHlwZSBpcyBkaXNhYmxlZCwgbWFyayBpdCBidXQgc3RpbGwgYWxsb3cgaXRcblx0XHRcdFx0XHRcdFx0XHRpZiAodHlwZSA9PT0gbW9iaWxlVHlwZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0cGx1Z2luRGlzYWJsZWQgPSB0cnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHR5cGUsIHR5cGUpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHQvLyBBZGQgZGlzYWJsZWQgb3B0aW9uXG5cdFx0XHRcdFx0XHRcdFx0XHRkcm9wZG93bi5zZWxlY3RFbC5jcmVhdGVFbCgnb3B0aW9uJywgeyBcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGV4dDogdHlwZSwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdGF0dHI6IHsgZGlzYWJsZWQ6ICd0cnVlJyB9IFxuXHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRjb250aW51ZTtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHR5cGUsIHR5cGUpO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdGRyb3Bkb3duXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShtb2JpbGVUeXBlKVxuXHRcdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlID0gdmFsdWUgYXMgSG9tZUJhc2VUeXBlO1xuXHRcdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbENvbnRhaW5lciA9IGNvbnRhaW5lckVsLmNsb3Nlc3QoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRhaW5lckVsLmNsb3Nlc3QoJy5zZXR0aW5ncy1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxUb3AgPSBzY3JvbGxDb250YWluZXI/LnNjcm9sbFRvcCB8fCAwO1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAoc2Nyb2xsQ29udGFpbmVyKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHNjcm9sbENvbnRhaW5lci5zY3JvbGxUb3AgPSBzY3JvbGxUb3A7XG5cdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHQvLyBTaG93IHdhcm5pbmcgaWYgY3VycmVudCB0eXBlIHJlcXVpcmVzIGEgZGlzYWJsZWQgcGx1Z2luXG5cdFx0XHRcdFx0XHRpZiAocGx1Z2luRGlzYWJsZWQpIHtcblx0XHRcdFx0XHRcdFx0c2V0dGluZy5kZXNjRWwuY3JlYXRlRGl2KHtcblx0XHRcdFx0XHRcdFx0XHR0ZXh0OiAnVGhlIHBsdWdpbiByZXF1aXJlZCBmb3IgdGhpcyBob21lIHBhZ2UgdHlwZSBpc25cXCd0IGF2YWlsYWJsZS4nLFxuXHRcdFx0XHRcdFx0XHRcdGNsczogJ21vZC13YXJuaW5nJ1xuXHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblx0XHRcdH0pO1xuXG5cdFx0XHRpZiAoIVVOQ0hBTkdFQUJMRV9UWVBFUy5pbmNsdWRlcyh0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVIb21lQmFzZVR5cGUpKSB7XG5cdFx0XHRcdG1vYmlsZUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0XHRjb25zdCBtb2JpbGVUeXBlID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VUeXBlO1xuXHRcdFx0XHRcdGxldCBkZXNjID0gJyc7XG5cdFx0XHRcdFx0bGV0IHBsYWNlaG9sZGVyID0gJyc7XG5cblx0XHRcdFx0XHRpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUpIHtcblx0XHRcdFx0XHRcdGRlc2MgPSAnVGhlIGZpbGUgdG8gb3BlbiBhcyB5b3VyIGhvbWUgYmFzZSBvbiBtb2JpbGUnO1xuXHRcdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSAnUGF0aCB0byBob21lIGJhc2UgZmlsZSc7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlKSB7XG5cdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSB3b3Jrc3BhY2UgdG8gbG9hZCBhcyB5b3VyIGhvbWUgYmFzZSBvbiBtb2JpbGUnO1xuXHRcdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSAnV29ya3NwYWNlIG5hbWUnO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcikge1xuXHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgZm9sZGVyIHRvIHBpY2sgYSByYW5kb20gZmlsZSBmcm9tIG9uIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRwbGFjZWhvbGRlciA9ICdGb2xkZXIgcGF0aCc7XG5cdFx0XHRcdFx0fSBlbHNlIGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuSm91cm5hbCkge1xuXHRcdFx0XHRcdFx0ZGVzYyA9ICdUaGUgam91cm5hbCBuYW1lIGZvciBtb2JpbGUnO1xuXHRcdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSAnSm91cm5hbCBuYW1lJztcblx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRzZXR0aW5nXG5cdFx0XHRcdFx0XHQuc2V0TmFtZShtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSA/ICdNb2JpbGUgZmlsZScgOiBcblx0XHRcdFx0XHRcdFx0XHRtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlID8gJ01vYmlsZSB3b3Jrc3BhY2UnIDpcblx0XHRcdFx0XHRcdFx0XHRtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyID8gJ01vYmlsZSBmb2xkZXInIDpcblx0XHRcdFx0XHRcdFx0XHRtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuSm91cm5hbCA/ICdNb2JpbGUgam91cm5hbCcgOiAnTW9iaWxlIHZhbHVlJylcblx0XHRcdFx0XHRcdC5zZXREZXNjKGRlc2MpXG5cdFx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUpIHtcblx0XHRcdFx0XHRcdFx0XHRuZXcgRmlsZVBhdGhTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcblx0XHRcdFx0XHRcdFx0XHRuZXcgV29ya3NwYWNlU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcblx0XHRcdFx0XHRcdFx0fSBlbHNlIGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyKSB7XG5cdFx0XHRcdFx0XHRcdFx0bmV3IEZvbGRlclN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdFx0XHQuc2V0UGxhY2Vob2xkZXIocGxhY2Vob2xkZXIpXG5cdFx0XHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlVmFsdWUgfHwgJycpXG5cdFx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlSG9tZUJhc2VWYWx1ZSA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0aWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZUhvbWVCYXNlUGF0aCA9IHZhbHVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gUmVwbGFjZSBtb2JpbGUgbmV3IHRhYiBidXR0b24gKGFsd2F5cyBhdmFpbGFibGUsIG5vdCBkZXBlbmRlbnQgb24gXCJVc2UgZGlmZmVyZW50IGhvbWUgYmFzZSBmb3IgbmV3IHRhYnNcIilcblx0XHRtb2JpbGVHcm91cC5hZGRTZXR0aW5nKChzZXR0aW5nKSA9PiB7XG5cdFx0XHRzZXR0aW5nXG5cdFx0XHRcdC5zZXROYW1lKCdSZXBsYWNlIG1vYmlsZSBuZXcgdGFiIGJ1dHRvbicpXG5cdFx0XHRcdC5zZXREZXNjKCdDaGFuZ2UgdGhlIG1vYmlsZSBuZXcgdGFiIGJ1dHRvbiB0byBhIGhvbWUgaWNvbicpXG5cdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHRcdHRvZ2dsZVxuXHRcdFx0XHRcdFx0LnNldFZhbHVlKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGxhY2VNb2JpbGVOZXdUYWIpXG5cdFx0XHRcdFx0XHQub25DaGFuZ2UoYXN5bmMgKHZhbHVlKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGxhY2VNb2JpbGVOZXdUYWIgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnVwZGF0ZU1vYmlsZUJ1dHRvbigpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gTW9iaWxlIG5ldyB0YWIgc2V0dGluZ3MgKG9ubHkgc2hvdyBpZiBcIlVzZSBkaWZmZXJlbnQgZmlsZSBmb3IgbmV3IHRhYnNcIiBpcyBlbmFibGVkKVxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiKSB7XG5cdFx0XHQvLyBTZXBhcmF0ZSBtb2JpbGUgbmV3IHRhYiB0b2dnbGVcblx0XHRcdG1vYmlsZUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0c2V0dGluZ1xuXHRcdFx0XHRcdC5zZXROYW1lKCdTZXBhcmF0ZSBtb2JpbGUgbmV3IHRhYicpXG5cdFx0XHRcdFx0LnNldERlc2MoJ1VzZSBhIGRpZmZlcmVudCBuZXcgdGFiIGZpbGUgb24gbW9iaWxlIGRldmljZXMnKVxuXHRcdFx0XHRcdC5hZGRUb2dnbGUoKHRvZ2dsZSkgPT4ge1xuXHRcdFx0XHRcdFx0dG9nZ2xlXG5cdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZXdUYWJTZXBhcmF0ZU1vYmlsZSlcblx0XHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYlNlcGFyYXRlTW9iaWxlID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdFx0Ly8gUmUtcmVuZGVyIHRvIHNob3cgbW9iaWxlIHNldHRpbmdzXG5cdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5wYXJlbnRFbGVtZW50O1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XG5cdFx0XHRcdFx0XHRcdFx0dGhpcy5kaXNwbGF5KCk7XG5cdFx0XHRcdFx0XHRcdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gU2hvdyBtb2JpbGUtc3BlY2lmaWMgbmV3IHRhYiBzZXR0aW5ncyBpZiBzZXBhcmF0ZSBtb2JpbGUgaXMgZW5hYmxlZFxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLm5ld1RhYlNlcGFyYXRlTW9iaWxlKSB7XG5cdFx0XHRcdGNvbnN0IG1vYmlsZVR5cGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tb2JpbGVOZXdUYWJUeXBlIHx8IEhvbWVCYXNlVHlwZS5GaWxlO1xuXHRcdFx0XHRjb25zdCBtb2JpbGVWYWx1ZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZU5ld1RhYlZhbHVlIHx8ICcnO1xuXG5cdFx0XHRcdC8vIE1vYmlsZSBuZXcgdGFiIHR5cGUgZHJvcGRvd25cblx0XHRcdFx0bW9iaWxlR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHRcdC5zZXROYW1lKCdNb2JpbGUgbmV3IHRhYiB0eXBlJylcblx0XHRcdFx0XHRcdC5zZXREZXNjKCdXaGF0IHRvIG9wZW4gZm9yIG5ldyB0YWJzIG9uIG1vYmlsZScpXG5cdFx0XHRcdFx0XHQuYWRkRHJvcGRvd24oKGRyb3Bkb3duKSA9PiB7XG5cdFx0XHRcdFx0XHRcdGxldCBwbHVnaW5EaXNhYmxlZCA9IGZhbHNlO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Zm9yIChjb25zdCB0eXBlIG9mIE9iamVjdC52YWx1ZXMoSG9tZUJhc2VUeXBlKSkge1xuXHRcdFx0XHRcdFx0XHRcdGlmICghdGhpcy5wbHVnaW4uaGFzUmVxdWlyZWRQbHVnaW4odHlwZSkpIHtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIElmIGN1cnJlbnQgdHlwZSBpcyBkaXNhYmxlZCwgbWFyayBpdCBidXQgc3RpbGwgYWxsb3cgaXRcblx0XHRcdFx0XHRcdFx0XHRcdGlmICh0eXBlID09PSBtb2JpbGVUeXBlKSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdHBsdWdpbkRpc2FibGVkID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0ZHJvcGRvd24uYWRkT3B0aW9uKHR5cGUsIHR5cGUpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0Ly8gQWRkIGRpc2FibGVkIG9wdGlvblxuXHRcdFx0XHRcdFx0XHRcdFx0XHRkcm9wZG93bi5zZWxlY3RFbC5jcmVhdGVFbCgnb3B0aW9uJywgeyBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHR0ZXh0OiB0eXBlLCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRhdHRyOiB7IGRpc2FibGVkOiAndHJ1ZScgfSBcblx0XHRcdFx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGNvbnRpbnVlO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdFx0XHRkcm9wZG93bi5hZGRPcHRpb24odHlwZSwgdHlwZSk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRkcm9wZG93blxuXHRcdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShtb2JpbGVUeXBlKVxuXHRcdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLm1vYmlsZU5ld1RhYlR5cGUgPSB2YWx1ZSBhcyBIb21lQmFzZVR5cGU7XG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsQ29udGFpbmVyID0gY29udGFpbmVyRWwuY2xvc2VzdCgnLnZlcnRpY2FsLXRhYi1jb250ZW50JykgfHwgXG5cdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRjb250YWluZXJFbC5jbG9zZXN0KCcuc2V0dGluZ3MtY29udGVudCcpIHx8IFxuXHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRcdFx0XHRcdGNvbnN0IHNjcm9sbFRvcCA9IHNjcm9sbENvbnRhaW5lcj8uc2Nyb2xsVG9wIHx8IDA7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLmRpc3BsYXkoKTtcblx0XHRcdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHRcdGlmIChzY3JvbGxDb250YWluZXIpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRzY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wID0gc2Nyb2xsVG9wO1xuXHRcdFx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdC8vIFNob3cgd2FybmluZyBpZiBjdXJyZW50IHR5cGUgcmVxdWlyZXMgYSBkaXNhYmxlZCBwbHVnaW5cblx0XHRcdFx0XHRcdFx0aWYgKHBsdWdpbkRpc2FibGVkKSB7XG5cdFx0XHRcdFx0XHRcdFx0c2V0dGluZy5kZXNjRWwuY3JlYXRlRGl2KHtcblx0XHRcdFx0XHRcdFx0XHRcdHRleHQ6ICdUaGUgcGx1Z2luIHJlcXVpcmVkIGZvciB0aGlzIG1vYmlsZSBuZXcgdGFiIHR5cGUgaXNuXFwndCBhdmFpbGFibGUuJyxcblx0XHRcdFx0XHRcdFx0XHRcdGNsczogJ21vZC13YXJuaW5nJ1xuXHRcdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fSk7XG5cblx0XHRcdFx0Ly8gTW9iaWxlIHZhbHVlIGlucHV0IChjb25kaXRpb25hbCBvbiB0eXBlKVxuXHRcdFx0XHRpZiAoIVVOQ0hBTkdFQUJMRV9UWVBFUy5pbmNsdWRlcyhtb2JpbGVUeXBlKSkge1xuXHRcdFx0XHRcdG1vYmlsZUdyb3VwLmFkZFNldHRpbmcoKHNldHRpbmcpID0+IHtcblx0XHRcdFx0XHRcdGxldCBkZXNjID0gJyc7XG5cdFx0XHRcdFx0XHRsZXQgcGxhY2Vob2xkZXIgPSAnJztcblxuXHRcdFx0XHRcdFx0aWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSB7XG5cdFx0XHRcdFx0XHRcdGRlc2MgPSAnVGhlIGZpbGUgdG8gb3BlbiBmb3IgbmV3IHRhYnMgb24gbW9iaWxlJztcblx0XHRcdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSAnUGF0aCB0byBtb2JpbGUgbmV3IHRhYiBmaWxlJztcblx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSkge1xuXHRcdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSB3b3Jrc3BhY2UgdG8gbG9hZCBmb3IgbmV3IHRhYnMgb24gbW9iaWxlJztcblx0XHRcdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSAnV29ya3NwYWNlIG5hbWUnO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyKSB7XG5cdFx0XHRcdFx0XHRcdGRlc2MgPSAnVGhlIGZvbGRlciB0byBwaWNrIGEgcmFuZG9tIGZpbGUgZnJvbSBmb3IgbmV3IHRhYnMgb24gbW9iaWxlJztcblx0XHRcdFx0XHRcdFx0cGxhY2Vob2xkZXIgPSAnRm9sZGVyIHBhdGgnO1xuXHRcdFx0XHRcdFx0fSBlbHNlIGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuSm91cm5hbCkge1xuXHRcdFx0XHRcdFx0XHRkZXNjID0gJ1RoZSBqb3VybmFsIG5hbWUgZm9yIG5ldyB0YWJzIG9uIG1vYmlsZSc7XG5cdFx0XHRcdFx0XHRcdHBsYWNlaG9sZGVyID0gJ0pvdXJuYWwgbmFtZSc7XG5cdFx0XHRcdFx0XHR9XG5cblx0XHRcdFx0XHRcdHNldHRpbmdcblx0XHRcdFx0XHRcdFx0LnNldE5hbWUobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUgPyAnTW9iaWxlIG5ldyB0YWIgZmlsZScgOiBcblx0XHRcdFx0XHRcdFx0XHRcdG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UgPyAnTW9iaWxlIG5ldyB0YWIgd29ya3NwYWNlJyA6XG5cdFx0XHRcdFx0XHRcdFx0XHRtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyID8gJ01vYmlsZSBuZXcgdGFiIGZvbGRlcicgOlxuXHRcdFx0XHRcdFx0XHRcdFx0bW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLkpvdXJuYWwgPyAnTW9iaWxlIG5ldyB0YWIgam91cm5hbCcgOiAnTW9iaWxlIG5ldyB0YWIgdmFsdWUnKVxuXHRcdFx0XHRcdFx0XHQuc2V0RGVzYyhkZXNjKVxuXHRcdFx0XHRcdFx0XHQuYWRkVGV4dCgodGV4dCkgPT4ge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChtb2JpbGVUeXBlID09PSBIb21lQmFzZVR5cGUuRmlsZSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmV3IEZpbGVQYXRoU3VnZ2VzdCh0aGlzLmFwcCwgdGV4dC5pbnB1dEVsKTtcblx0XHRcdFx0XHRcdFx0XHR9IGVsc2UgaWYgKG1vYmlsZVR5cGUgPT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UpIHtcblx0XHRcdFx0XHRcdFx0XHRcdG5ldyBXb3Jrc3BhY2VTdWdnZXN0KHRoaXMuYXBwLCB0ZXh0LmlucHV0RWwpO1xuXHRcdFx0XHRcdFx0XHRcdH0gZWxzZSBpZiAobW9iaWxlVHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0bmV3IEZvbGRlclN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHRcdHRleHRcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRQbGFjZWhvbGRlcihwbGFjZWhvbGRlcilcblx0XHRcdFx0XHRcdFx0XHRcdC5zZXRWYWx1ZShtb2JpbGVWYWx1ZSB8fCAnJylcblx0XHRcdFx0XHRcdFx0XHRcdC5vbkNoYW5nZShhc3luYyAodmFsdWUpID0+IHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uc2V0dGluZ3MubW9iaWxlTmV3VGFiVmFsdWUgPSB2YWx1ZTtcblx0XHRcdFx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFx0XHR9KTtcblx0XHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBBdXRvbWF0aW9uIFNldHRpbmdzXG5cdFx0Y29uc3QgYXV0b21hdGlvbkdyb3VwID0gY3JlYXRlU2V0dGluZ3NHcm91cChjb250YWluZXJFbCwgJ0F1dG9tYXRpb24nLCAnaG9tZS1iYXNlJyk7XG5cblx0XHRhdXRvbWF0aW9uR3JvdXAuYWRkU2V0dGluZygoc2V0dGluZykgPT4ge1xuXHRcdFx0Y29uc3QgY29tbWFuZElkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29tbWFuZE9uT3Blbjtcblx0XHRcdGNvbnN0IGNvbW1hbmQgPSBjb21tYW5kSWQgPyBnZXRDb21tYW5kQnlJZCh0aGlzLmFwcCwgY29tbWFuZElkKSA6IHVuZGVmaW5lZDtcblx0XHRcdGNvbnN0IGRpc3BsYXlWYWx1ZSA9IGNvbW1hbmQgPyBjb21tYW5kLm5hbWUgOiBjb21tYW5kSWQ7XG5cblx0XHRcdHNldHRpbmdcblx0XHRcdFx0LnNldE5hbWUoJ0NvbW1hbmQgb24gb3BlbicpXG5cdFx0XHRcdC5zZXREZXNjKCdSdW4gYW4gT2JzaWRpYW4gY29tbWFuZCB3aGVuIG9wZW5pbmcgaG9tZSBiYXNlJylcblx0XHRcdFx0LmFkZFRleHQoKHRleHQpID0+IHtcblx0XHRcdFx0XHQvLyBBZGQgY29tbWFuZCBzdWdnZXN0ZXJcblx0XHRcdFx0XHRuZXcgQ29tbWFuZFN1Z2dlc3QodGhpcy5hcHAsIHRleHQuaW5wdXRFbCk7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0dGV4dFxuXHRcdFx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdTZWFyY2ggZm9yIGEgY29tbWFuZC4uLicpXG5cdFx0XHRcdFx0XHQuc2V0VmFsdWUoZGlzcGxheVZhbHVlIHx8ICcnKVxuXHRcdFx0XHRcdFx0Lm9uQ2hhbmdlKGFzeW5jICh2YWx1ZSkgPT4ge1xuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5jb21tYW5kT25PcGVuID0gdmFsdWU7XG5cdFx0XHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pXG5cdFx0XHRcdC5hZGRFeHRyYUJ1dHRvbigoYnRuKSA9PiB7XG5cdFx0XHRcdFx0YnRuXG5cdFx0XHRcdFx0XHQuc2V0SWNvbigneCcpXG5cdFx0XHRcdFx0XHQuc2V0VG9vbHRpcCgnQ2xlYXIgY29tbWFuZCcpXG5cdFx0XHRcdFx0XHQub25DbGljayhhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmNvbW1hbmRPbk9wZW4gPSAnJztcblx0XHRcdFx0XHRcdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0XHRcdFx0XHRcdFxuXHRcdFx0XHRcdFx0XHQvLyBQcmVzZXJ2ZSBzY3JvbGwgcG9zaXRpb24gYmVmb3JlIHJlLXJlbmRlcmluZ1xuXHRcdFx0XHRcdFx0XHRjb25zdCBzY3JvbGxDb250YWluZXIgPSBjb250YWluZXJFbC5jbG9zZXN0KCcudmVydGljYWwtdGFiLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwuY2xvc2VzdCgnLnNldHRpbmdzLWNvbnRlbnQnKSB8fCBcblx0XHRcdFx0XHRcdFx0XHRcdFx0XHRcdFx0Y29udGFpbmVyRWwucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRcdFx0Y29uc3Qgc2Nyb2xsVG9wID0gc2Nyb2xsQ29udGFpbmVyPy5zY3JvbGxUb3AgfHwgMDtcblx0XHRcdFx0XHRcdFx0XG5cdFx0XHRcdFx0XHRcdHRoaXMuZGlzcGxheSgpO1xuXHRcdFx0XHRcdFx0XHRcblx0XHRcdFx0XHRcdFx0Ly8gUmVzdG9yZSBzY3JvbGwgcG9zaXRpb24gYWZ0ZXIgcmVuZGVyaW5nXG5cdFx0XHRcdFx0XHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0aWYgKHNjcm9sbENvbnRhaW5lcikge1xuXHRcdFx0XHRcdFx0XHRcdFx0c2Nyb2xsQ29udGFpbmVyLnNjcm9sbFRvcCA9IHNjcm9sbFRvcDtcblx0XHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHRcdH0pO1xuXHRcdFx0XHRcdFx0fSk7XG5cdFx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG59XG4iLCAiLyoqXHJcbiAqIENvbXBhdGliaWxpdHkgdXRpbGl0aWVzIGZvciBzZXR0aW5nc1xyXG4gKiBQcm92aWRlcyBiYWNrd2FyZCBjb21wYXRpYmlsaXR5IGZvciBTZXR0aW5nR3JvdXAgKHJlcXVpcmVzIEFQSSAxLjExLjArKVxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFNldHRpbmcsIHJlcXVpcmVBcGlWZXJzaW9uIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgKiBhcyBPYnNpZGlhbk1vZHVsZSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG4vKipcclxuICogSW50ZXJmYWNlIHRoYXQgd29ya3Mgd2l0aCBib3RoIFNldHRpbmdHcm91cCBhbmQgZmFsbGJhY2sgY29udGFpbmVyXHJcbiAqL1xyXG5leHBvcnQgaW50ZXJmYWNlIFNldHRpbmdzQ29udGFpbmVyIHtcclxuXHRhZGRTZXR0aW5nKGNiOiAoc2V0dGluZzogU2V0dGluZykgPT4gdm9pZCk6IHZvaWQ7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDcmVhdGVzIGEgc2V0dGluZ3MgY29udGFpbmVyIHRoYXQgdXNlcyBTZXR0aW5nR3JvdXAgaWYgYXZhaWxhYmxlIChBUEkgMS4xMS4wKyksXHJcbiAqIG90aGVyd2lzZSBmYWxscyBiYWNrIHRvIGNyZWF0aW5nIGEgaGVhZGluZyBhbmQgdXNpbmcgdGhlIGNvbnRhaW5lciBkaXJlY3RseS5cclxuICogXHJcbiAqIFVzZXMgcmVxdWlyZUFwaVZlcnNpb24oJzEuMTEuMCcpIHRvIGNoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUuXHJcbiAqIFRoaXMgaXMgdGhlIG9mZmljaWFsIE9ic2lkaWFuIEFQSSBtZXRob2QgZm9yIHZlcnNpb24gY2hlY2tpbmcuXHJcbiAqIFxyXG4gKiBAcGFyYW0gY29udGFpbmVyRWwgLSBUaGUgY29udGFpbmVyIGVsZW1lbnQgZm9yIHNldHRpbmdzXHJcbiAqIEBwYXJhbSBoZWFkaW5nIC0gVGhlIGhlYWRpbmcgdGV4dCBmb3IgdGhlIHNldHRpbmdzIGdyb3VwIChvcHRpb25hbClcclxuICogQHBhcmFtIG1hbmlmZXN0SWQgLSBUaGUgcGx1Z2luJ3MgbWFuaWZlc3QgSUQgZm9yIENTUyBzY29waW5nIChyZXF1aXJlZCBmb3IgZmFsbGJhY2sgbW9kZSlcclxuICogQHJldHVybnMgQSBjb250YWluZXIgdGhhdCBjYW4gYmUgdXNlZCB0byBhZGQgc2V0dGluZ3NcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBjcmVhdGVTZXR0aW5nc0dyb3VwKFxyXG5cdGNvbnRhaW5lckVsOiBIVE1MRWxlbWVudCxcclxuXHRoZWFkaW5nPzogc3RyaW5nLFxyXG5cdG1hbmlmZXN0SWQ/OiBzdHJpbmdcclxuKTogU2V0dGluZ3NDb250YWluZXIge1xyXG5cdC8vIENoZWNrIGlmIFNldHRpbmdHcm91cCBpcyBhdmFpbGFibGUgKEFQSSAxLjExLjArKVxyXG5cdGlmIChyZXF1aXJlQXBpVmVyc2lvbignMS4xMS4wJykpIHtcclxuXHRcdC8vIEFjY2VzcyBTZXR0aW5nR3JvdXAgdmlhIHR5cGUgYXNzZXJ0aW9uIHNpbmNlIGl0IG1heSBub3QgYmUgaW4gdHlwZSBkZWZpbml0aW9uc1xyXG5cdFx0Y29uc3QgU2V0dGluZ0dyb3VwQ2xhc3MgPSAoT2JzaWRpYW5Nb2R1bGUgYXMgdW5rbm93biBhcyB7IFNldHRpbmdHcm91cD86IG5ldyAoY29udGFpbmVyRWw6IEhUTUxFbGVtZW50KSA9PiB7XHJcblx0XHRcdHNldEhlYWRpbmcoaGVhZGluZzogc3RyaW5nKToge1xyXG5cdFx0XHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKTogdm9pZDtcclxuXHRcdFx0fTtcclxuXHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpOiB2b2lkO1xyXG5cdFx0fSB9KS5TZXR0aW5nR3JvdXA7XHJcblx0XHRcclxuXHRcdGlmIChTZXR0aW5nR3JvdXBDbGFzcykge1xyXG5cdFx0XHRjb25zdCBncm91cCA9IGhlYWRpbmcgXHJcblx0XHRcdFx0PyBuZXcgU2V0dGluZ0dyb3VwQ2xhc3MoY29udGFpbmVyRWwpLnNldEhlYWRpbmcoaGVhZGluZylcclxuXHRcdFx0XHQ6IG5ldyBTZXR0aW5nR3JvdXBDbGFzcyhjb250YWluZXJFbCk7XHJcblx0XHRcdHJldHVybiB7XHJcblx0XHRcdFx0YWRkU2V0dGluZyhjYjogKHNldHRpbmc6IFNldHRpbmcpID0+IHZvaWQpIHtcclxuXHRcdFx0XHRcdGdyb3VwLmFkZFNldHRpbmcoY2IpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fTtcclxuXHRcdH1cclxuXHR9XHJcblx0XHJcblx0Ly8gRmFsbGJhY2sgcGF0aCAoZWl0aGVyIEFQSSA8IDEuMTEuMCBvciBTZXR0aW5nR3JvdXAgbm90IGZvdW5kKVxyXG5cdC8vIEFkZCBzY29waW5nIGNsYXNzIHRvIGNvbnRhaW5lckVsIHRvIHNjb3BlIENTUyB0byBvbmx5IHRoaXMgcGx1Z2luJ3Mgc2V0dGluZ3NcclxuXHRpZiAobWFuaWZlc3RJZCkge1xyXG5cdFx0Y29udGFpbmVyRWwuYWRkQ2xhc3MoYCR7bWFuaWZlc3RJZH0tc2V0dGluZ3MtY29tcGF0YCk7XHJcblx0fVxyXG5cdFxyXG5cdGlmIChoZWFkaW5nKSB7XHJcblx0XHRjb25zdCBoZWFkaW5nRWwgPSBjb250YWluZXJFbC5jcmVhdGVEaXYoJ3NldHRpbmctZ3JvdXAtaGVhZGluZycpO1xyXG5cdFx0aGVhZGluZ0VsLmNyZWF0ZUVsKCdoMycsIHsgdGV4dDogaGVhZGluZyB9KTtcclxuXHR9XHJcblx0XHJcblx0cmV0dXJuIHtcclxuXHRcdGFkZFNldHRpbmcoY2I6IChzZXR0aW5nOiBTZXR0aW5nKSA9PiB2b2lkKSB7XHJcblx0XHRcdGNvbnN0IHNldHRpbmcgPSBuZXcgU2V0dGluZyhjb250YWluZXJFbCk7XHJcblx0XHRcdGNiKHNldHRpbmcpO1xyXG5cdFx0fVxyXG5cdH07XHJcbn1cclxuIiwgIi8qKlxyXG4gKiBGaWxlIFBhdGggU3VnZ2VzdGVyIENvbXBvbmVudFxyXG4gKiBQcm92aWRlcyBhdXRvY29tcGxldGUgZm9yIGZpbGUgcGF0aHMgaW4gc2V0dGluZ3NcclxuICovXHJcblxyXG5pbXBvcnQgeyBBYnN0cmFjdElucHV0U3VnZ2VzdCwgQXBwLCBURmlsZSwgVEZvbGRlciB9IGZyb20gJ29ic2lkaWFuJztcclxuXHJcbi8qKlxyXG4gKiBTdXBwb3J0ZWQgZmlsZSBleHRlbnNpb25zIGZvciBob21lIGJhc2VcclxuICovXHJcbmNvbnN0IFNVUFBPUlRFRF9FWFRFTlNJT05TID0gWydtZCcsICdtZHgnLCAnY2FudmFzJywgJ2Jhc2UnXTtcclxuXHJcbi8qKlxyXG4gKiBGaWxlIHBhdGggc3VnZ2VzdGVyIHRoYXQgcHJvdmlkZXMgYXV0b2NvbXBsZXRlIGZvciB2YXVsdCBmaWxlc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEZpbGVQYXRoU3VnZ2VzdCBleHRlbmRzIEFic3RyYWN0SW5wdXRTdWdnZXN0PFRGaWxlPiB7XHJcblx0cHJpdmF0ZSBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudCkge1xyXG5cdFx0c3VwZXIoYXBwLCBpbnB1dEVsKTtcclxuXHRcdHRoaXMuaW5wdXRFbCA9IGlucHV0RWw7XHJcblx0fVxyXG5cclxuXHRnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogVEZpbGVbXSB7XHJcblx0XHRjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcclxuXHRcdGNvbnN0IGZpbGVzOiBURmlsZVtdID0gW107XHJcblxyXG5cdFx0Ly8gR2V0IGFsbCBmaWxlcyBmcm9tIHZhdWx0XHJcblx0XHR0aGlzLmFwcC52YXVsdC5nZXRBbGxMb2FkZWRGaWxlcygpLmZvckVhY2goKGZpbGUpID0+IHtcclxuXHRcdFx0aWYgKGZpbGUgaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRcdC8vIE9ubHkgaW5jbHVkZSBzdXBwb3J0ZWQgZmlsZSB0eXBlc1xyXG5cdFx0XHRcdGlmIChTVVBQT1JURURfRVhURU5TSU9OUy5pbmNsdWRlcyhmaWxlLmV4dGVuc2lvbikpIHtcclxuXHRcdFx0XHRcdC8vIE1hdGNoIGFnYWluc3QgcGF0aCBvciBuYW1lXHJcblx0XHRcdFx0XHRpZiAoXHJcblx0XHRcdFx0XHRcdGZpbGUucGF0aC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGxvd2VyUXVlcnkpIHx8XHJcblx0XHRcdFx0XHRcdGZpbGUuYmFzZW5hbWUudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KVxyXG5cdFx0XHRcdFx0KSB7XHJcblx0XHRcdFx0XHRcdGZpbGVzLnB1c2goZmlsZSk7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBTb3J0IGJ5IHJlbGV2YW5jZSAoZXhhY3QgbWF0Y2hlcyBmaXJzdCwgdGhlbiBhbHBoYWJldGljYWxseSlcclxuXHRcdGZpbGVzLnNvcnQoKGEsIGIpID0+IHtcclxuXHRcdFx0Y29uc3QgYVN0YXJ0c1dpdGggPSBhLnBhdGgudG9Mb3dlckNhc2UoKS5zdGFydHNXaXRoKGxvd2VyUXVlcnkpO1xyXG5cdFx0XHRjb25zdCBiU3RhcnRzV2l0aCA9IGIucGF0aC50b0xvd2VyQ2FzZSgpLnN0YXJ0c1dpdGgobG93ZXJRdWVyeSk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoYVN0YXJ0c1dpdGggJiYgIWJTdGFydHNXaXRoKSByZXR1cm4gLTE7XHJcblx0XHRcdGlmICghYVN0YXJ0c1dpdGggJiYgYlN0YXJ0c1dpdGgpIHJldHVybiAxO1xyXG5cdFx0XHRcclxuXHRcdFx0cmV0dXJuIGEucGF0aC5sb2NhbGVDb21wYXJlKGIucGF0aCk7XHJcblx0XHR9KTtcclxuXHJcblx0XHQvLyBMaW1pdCByZXN1bHRzXHJcblx0XHRyZXR1cm4gZmlsZXMuc2xpY2UoMCwgMjApO1xyXG5cdH1cclxuXHJcblx0cmVuZGVyU3VnZ2VzdGlvbihmaWxlOiBURmlsZSwgZWw6IEhUTUxFbGVtZW50KTogdm9pZCB7XHJcblx0XHQvLyBTaG93IGZpbGUgbmFtZSBwcm9taW5lbnRseVxyXG5cdFx0ZWwuY3JlYXRlRWwoJ2RpdicsIHsgXHJcblx0XHRcdHRleHQ6IGZpbGUuYmFzZW5hbWUsXHJcblx0XHRcdGNsczogJ3N1Z2dlc3Rpb24tdGl0bGUnXHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0Ly8gU2hvdyBwYXRoIGluIHNtYWxsZXIgdGV4dCBpZiBkaWZmZXJlbnQgZnJvbSBiYXNlbmFtZVxyXG5cdFx0aWYgKGZpbGUucGFyZW50ICYmIGZpbGUucGFyZW50LnBhdGggIT09ICcvJykge1xyXG5cdFx0XHRlbC5jcmVhdGVFbCgnc21hbGwnLCB7IFxyXG5cdFx0XHRcdHRleHQ6IGZpbGUucGFyZW50LnBhdGgsXHJcblx0XHRcdFx0Y2xzOiAnc3VnZ2VzdGlvbi1wYXRoJ1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBTaG93IGZpbGUgdHlwZSBpbmRpY2F0b3JcclxuXHRcdGlmIChmaWxlLmV4dGVuc2lvbiAhPT0gJ21kJykge1xyXG5cdFx0XHRlbC5jcmVhdGVFbCgnc3BhbicsIHtcclxuXHRcdFx0XHR0ZXh0OiBmaWxlLmV4dGVuc2lvbi50b1VwcGVyQ2FzZSgpLFxyXG5cdFx0XHRcdGNsczogJ3N1Z2dlc3Rpb24tZmxhaXInXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0c2VsZWN0U3VnZ2VzdGlvbihmaWxlOiBURmlsZSk6IHZvaWQge1xyXG5cdFx0dGhpcy5pbnB1dEVsLnZhbHVlID0gZmlsZS5wYXRoO1xyXG5cdFx0dGhpcy5pbnB1dEVsLnRyaWdnZXIoJ2lucHV0Jyk7XHJcblx0XHR0aGlzLmNsb3NlKCk7XHJcblx0fVxyXG59XHJcblxyXG4vKipcclxuICogRm9sZGVyIHBhdGggc3VnZ2VzdGVyIGZvciBzZWxlY3RpbmcgZm9sZGVyc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEZvbGRlclN1Z2dlc3QgZXh0ZW5kcyBBYnN0cmFjdElucHV0U3VnZ2VzdDxURm9sZGVyPiB7XHJcblx0cHJpdmF0ZSBpbnB1dEVsOiBIVE1MSW5wdXRFbGVtZW50O1xyXG5cclxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudCkge1xyXG5cdFx0c3VwZXIoYXBwLCBpbnB1dEVsKTtcclxuXHRcdHRoaXMuaW5wdXRFbCA9IGlucHV0RWw7XHJcblx0fVxyXG5cclxuXHRnZXRTdWdnZXN0aW9ucyhxdWVyeTogc3RyaW5nKTogVEZvbGRlcltdIHtcclxuXHRcdGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0Y29uc3QgZm9sZGVyczogVEZvbGRlcltdID0gW107XHJcblxyXG5cdFx0dGhpcy5hcHAudmF1bHQuZ2V0QWxsTG9hZGVkRmlsZXMoKS5mb3JFYWNoKChmaWxlKSA9PiB7XHJcblx0XHRcdGlmIChmaWxlIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0XHRcdGlmIChmaWxlLnBhdGgudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KSkge1xyXG5cdFx0XHRcdFx0Zm9sZGVycy5wdXNoKGZpbGUpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblxyXG5cdFx0Zm9sZGVycy5zb3J0KChhLCBiKSA9PiBhLnBhdGgubG9jYWxlQ29tcGFyZShiLnBhdGgpKTtcclxuXHRcdHJldHVybiBmb2xkZXJzLnNsaWNlKDAsIDIwKTtcclxuXHR9XHJcblxyXG5cdHJlbmRlclN1Z2dlc3Rpb24oZm9sZGVyOiBURm9sZGVyLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IGZvbGRlci5wYXRoIHx8ICcvJyB9KTtcclxuXHR9XHJcblxyXG5cdHNlbGVjdFN1Z2dlc3Rpb24oZm9sZGVyOiBURm9sZGVyKTogdm9pZCB7XHJcblx0XHR0aGlzLmlucHV0RWwudmFsdWUgPSBmb2xkZXIucGF0aDtcclxuXHRcdHRoaXMuaW5wdXRFbC50cmlnZ2VyKCdpbnB1dCcpO1xyXG5cdFx0dGhpcy5jbG9zZSgpO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIFdvcmtzcGFjZSBzdWdnZXN0ZXIgZm9yIHNlbGVjdGluZyBPYnNpZGlhbiB3b3Jrc3BhY2VzXHJcbiAqL1xyXG5leHBvcnQgY2xhc3MgV29ya3NwYWNlU3VnZ2VzdCBleHRlbmRzIEFic3RyYWN0SW5wdXRTdWdnZXN0PHN0cmluZz4ge1xyXG5cdHByaXZhdGUgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcclxuXHRcdHN1cGVyKGFwcCwgaW5wdXRFbCk7XHJcblx0XHR0aGlzLmlucHV0RWwgPSBpbnB1dEVsO1xyXG5cdH1cclxuXHJcblx0Z2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IHN0cmluZ1tdIHtcclxuXHRcdCBcclxuXHRcdGNvbnN0IHdvcmtzcGFjZXNQbHVnaW4gPSB0aGlzLmFwcC5pbnRlcm5hbFBsdWdpbnM/LnBsdWdpbnM/LndvcmtzcGFjZXM7XHJcblx0XHQgXHJcblx0XHRpZiAoIXdvcmtzcGFjZXNQbHVnaW4/LmVuYWJsZWQgfHwgIXdvcmtzcGFjZXNQbHVnaW4uaW5zdGFuY2U/LndvcmtzcGFjZXMpIHtcclxuXHRcdFx0cmV0dXJuIFtdO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQgXHJcblx0XHRjb25zdCB3b3Jrc3BhY2VzID0gT2JqZWN0LmtleXMod29ya3NwYWNlc1BsdWdpbi5pbnN0YW5jZS53b3Jrc3BhY2VzKTtcclxuXHRcdGNvbnN0IGxvd2VyUXVlcnkgPSBxdWVyeS50b0xvd2VyQ2FzZSgpO1xyXG5cdFx0XHJcblx0XHRyZXR1cm4gd29ya3NwYWNlcy5maWx0ZXIoKHdvcmtzcGFjZTogc3RyaW5nKSA9PiBcclxuXHRcdFx0d29ya3NwYWNlLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSlcclxuXHRcdCk7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJTdWdnZXN0aW9uKHdvcmtzcGFjZTogc3RyaW5nLCBlbDogSFRNTEVsZW1lbnQpOiB2b2lkIHtcclxuXHRcdGVsLmNyZWF0ZUVsKCdkaXYnLCB7IHRleHQ6IHdvcmtzcGFjZSB9KTtcclxuXHR9XHJcblxyXG5cdHNlbGVjdFN1Z2dlc3Rpb24od29ya3NwYWNlOiBzdHJpbmcpOiB2b2lkIHtcclxuXHRcdHRoaXMuaW5wdXRFbC52YWx1ZSA9IHdvcmtzcGFjZTtcclxuXHRcdHRoaXMuaW5wdXRFbC50cmlnZ2VyKCdpbnB1dCcpO1xyXG5cdFx0dGhpcy5jbG9zZSgpO1xyXG5cdH1cclxufSIsICIvKipcclxuICogQ29tbWFuZCBTdWdnZXN0ZXIgQ29tcG9uZW50XHJcbiAqIFByb3ZpZGVzIGF1dG9jb21wbGV0ZSBmb3IgT2JzaWRpYW4gY29tbWFuZHMgaW4gc2V0dGluZ3NcclxuICovXHJcblxyXG5pbXBvcnQgeyBBYnN0cmFjdElucHV0U3VnZ2VzdCwgQXBwLCBDb21tYW5kIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5cclxuLyoqXHJcbiAqIENvbW1hbmQgc3VnZ2VzdGVyIHRoYXQgcHJvdmlkZXMgYXV0b2NvbXBsZXRlIGZvciBPYnNpZGlhbiBjb21tYW5kc1xyXG4gKi9cclxuZXhwb3J0IGNsYXNzIENvbW1hbmRTdWdnZXN0IGV4dGVuZHMgQWJzdHJhY3RJbnB1dFN1Z2dlc3Q8Q29tbWFuZD4ge1xyXG5cdHByaXZhdGUgaW5wdXRFbDogSFRNTElucHV0RWxlbWVudDtcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGlucHV0RWw6IEhUTUxJbnB1dEVsZW1lbnQpIHtcclxuXHRcdHN1cGVyKGFwcCwgaW5wdXRFbCk7XHJcblx0XHR0aGlzLmlucHV0RWwgPSBpbnB1dEVsO1xyXG5cdH1cclxuXHJcblx0Z2V0U3VnZ2VzdGlvbnMocXVlcnk6IHN0cmluZyk6IENvbW1hbmRbXSB7XHJcblx0XHRjb25zdCBsb3dlclF1ZXJ5ID0gcXVlcnkudG9Mb3dlckNhc2UoKTtcclxuXHRcdGNvbnN0IGNvbW1hbmRzOiBDb21tYW5kW10gPSBbXTtcclxuXHJcblx0XHQvLyBHZXQgYWxsIGNvbW1hbmRzIGZyb20gdGhlIGFwcFxyXG5cdFx0Y29uc3QgYXBwV2l0aENvbW1hbmRzID0gdGhpcy5hcHAgYXMgQXBwICYgeyBcclxuXHRcdFx0Y29tbWFuZHM/OiB7IGNvbW1hbmRzPzogUmVjb3JkPHN0cmluZywgQ29tbWFuZD4gfSBcclxuXHRcdH07XHJcblx0XHRjb25zdCBhbGxDb21tYW5kcyA9IGFwcFdpdGhDb21tYW5kcy5jb21tYW5kcz8uY29tbWFuZHM7XHJcblx0XHRcclxuXHRcdGlmIChhbGxDb21tYW5kcykge1xyXG5cdFx0XHRmb3IgKGNvbnN0IGNvbW1hbmQgb2YgT2JqZWN0LnZhbHVlcyhhbGxDb21tYW5kcykpIHtcclxuXHRcdFx0XHRpZiAoY29tbWFuZC5uYW1lLnRvTG93ZXJDYXNlKCkuaW5jbHVkZXMobG93ZXJRdWVyeSkgfHxcclxuXHRcdFx0XHRcdGNvbW1hbmQuaWQudG9Mb3dlckNhc2UoKS5pbmNsdWRlcyhsb3dlclF1ZXJ5KSkge1xyXG5cdFx0XHRcdFx0Y29tbWFuZHMucHVzaChjb21tYW5kKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBTb3J0IGFscGhhYmV0aWNhbGx5IGJ5IG5hbWVcclxuXHRcdGNvbW1hbmRzLnNvcnQoKGEsIGIpID0+IGEubmFtZS5sb2NhbGVDb21wYXJlKGIubmFtZSkpO1xyXG5cclxuXHRcdC8vIExpbWl0IHJlc3VsdHNcclxuXHRcdHJldHVybiBjb21tYW5kcy5zbGljZSgwLCAzMCk7XHJcblx0fVxyXG5cclxuXHRyZW5kZXJTdWdnZXN0aW9uKGNvbW1hbmQ6IENvbW1hbmQsIGVsOiBIVE1MRWxlbWVudCk6IHZvaWQge1xyXG5cdFx0ZWwuY3JlYXRlRWwoJ2RpdicsIHsgXHJcblx0XHRcdHRleHQ6IGNvbW1hbmQubmFtZSxcclxuXHRcdFx0Y2xzOiAnc3VnZ2VzdGlvbi10aXRsZSdcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRlbC5jcmVhdGVFbCgnc21hbGwnLCB7IFxyXG5cdFx0XHR0ZXh0OiBjb21tYW5kLmlkLFxyXG5cdFx0XHRjbHM6ICdzdWdnZXN0aW9uLW5vdGUnXHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdHNlbGVjdFN1Z2dlc3Rpb24oY29tbWFuZDogQ29tbWFuZCk6IHZvaWQge1xyXG5cdFx0dGhpcy5pbnB1dEVsLnZhbHVlID0gY29tbWFuZC5pZDtcclxuXHRcdHRoaXMuaW5wdXRFbC50cmlnZ2VyKCdpbnB1dCcpO1xyXG5cdFx0dGhpcy5jbG9zZSgpO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEV4dGVuZGVkIEFwcCBpbnRlcmZhY2Ugd2l0aCBjb21tYW5kc1xyXG4gKi9cclxuaW50ZXJmYWNlIEFwcFdpdGhDb21tYW5kcyBleHRlbmRzIEFwcCB7XHJcblx0Y29tbWFuZHM/OiB7XHJcblx0XHRjb21tYW5kcz86IFJlY29yZDxzdHJpbmcsIENvbW1hbmQ+O1xyXG5cdFx0ZXhlY3V0ZUNvbW1hbmRCeUlkPzogKGNvbW1hbmRJZDogc3RyaW5nKSA9PiBib29sZWFuIHwgUHJvbWlzZTx2b2lkPjtcclxuXHR9O1xyXG59XHJcblxyXG4vKipcclxuICogR2V0IGEgY29tbWFuZCBieSBpdHMgSURcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiBnZXRDb21tYW5kQnlJZChhcHA6IEFwcCwgY29tbWFuZElkOiBzdHJpbmcpOiBDb21tYW5kIHwgdW5kZWZpbmVkIHtcclxuXHRjb25zdCBhcHBXaXRoQ29tbWFuZHMgPSBhcHAgYXMgQXBwV2l0aENvbW1hbmRzO1xyXG5cdGNvbnN0IGNvbW1hbmRzID0gYXBwV2l0aENvbW1hbmRzLmNvbW1hbmRzPy5jb21tYW5kcztcclxuXHRyZXR1cm4gY29tbWFuZHM/Lltjb21tYW5kSWRdO1xyXG59XHJcblxyXG4vKipcclxuICogRXhlY3V0ZSBhIGNvbW1hbmQgYnkgaXRzIElEXHJcbiAqL1xyXG5leHBvcnQgZnVuY3Rpb24gZXhlY3V0ZUNvbW1hbmQoYXBwOiBBcHAsIGNvbW1hbmRJZDogc3RyaW5nKTogYm9vbGVhbiB7XHJcblx0aWYgKCFjb21tYW5kSWQpIHJldHVybiBmYWxzZTtcclxuXHRcclxuXHRjb25zdCBhcHBXaXRoQ29tbWFuZHMgPSBhcHAgYXMgQXBwV2l0aENvbW1hbmRzO1xyXG5cdGNvbnN0IHJlc3VsdCA9IGFwcFdpdGhDb21tYW5kcy5jb21tYW5kcz8uZXhlY3V0ZUNvbW1hbmRCeUlkPy4oY29tbWFuZElkKTtcclxuXHRyZXR1cm4gcmVzdWx0ICE9PSBmYWxzZTtcclxufVxyXG4iLCAiLyoqXHJcbiAqIEljb24gUGlja2VyIE1vZGFsXHJcbiAqIFNpbXBsaWZpZWQgaWNvbiBwaWNrZXIgZm9yIHNlbGVjdGluZyBzdGlja3kgaWNvblxyXG4gKiBCYXNlZCBvbiBpY29uaWMgcGx1Z2luJ3MgaWNvbiBwaWNrZXJcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIEJ1dHRvbkNvbXBvbmVudCwgTW9kYWwsIFBsYXRmb3JtLCBTZXR0aW5nLCBUZXh0Q29tcG9uZW50LCBwcmVwYXJlRnV6enlTZWFyY2gsIHNldEljb24sIGdldEljb25JZHMgfSBmcm9tICdvYnNpZGlhbic7XHJcblxyXG5leHBvcnQgaW50ZXJmYWNlIEljb25QaWNrZXJDYWxsYmFjayB7XHJcblx0KGljb246IHN0cmluZyB8IG51bGwpOiB2b2lkO1xyXG59XHJcblxyXG4vKipcclxuICogU2ltcGxpZmllZCBpY29uIHBpY2tlciBtb2RhbFxyXG4gKi9cclxuZXhwb3J0IGNsYXNzIEljb25QaWNrZXIgZXh0ZW5kcyBNb2RhbCB7XHJcblx0cHJpdmF0ZSBzZWxlY3RlZEljb246IHN0cmluZyB8IG51bGw7XHJcblx0cHJpdmF0ZSBjYWxsYmFjazogSWNvblBpY2tlckNhbGxiYWNrO1xyXG5cdHByaXZhdGUgc2VhcmNoRmllbGQ6IFRleHRDb21wb25lbnQ7XHJcblx0cHJpdmF0ZSBzZWFyY2hSZXN1bHRzOiBbaWNvbjogc3RyaW5nLCBpY29uTmFtZTogc3RyaW5nXVtdID0gW107XHJcblx0cHJpdmF0ZSBzZWFyY2hSZXN1bHRzU2V0dGluZzogU2V0dGluZztcclxuXHJcblx0Y29uc3RydWN0b3IoYXBwOiBBcHAsIGN1cnJlbnRJY29uOiBzdHJpbmcgfCBudWxsLCBjYWxsYmFjazogSWNvblBpY2tlckNhbGxiYWNrKSB7XHJcblx0XHRzdXBlcihhcHApO1xyXG5cdFx0dGhpcy5zZWxlY3RlZEljb24gPSBjdXJyZW50SWNvbjtcclxuXHRcdHRoaXMuY2FsbGJhY2sgPSBjYWxsYmFjaztcclxuXHR9XHJcblxyXG5cdG9uT3BlbigpOiB2b2lkIHtcclxuXHRcdHRoaXMuY29udGFpbmVyRWwuYWRkQ2xhc3MoJ21vZC1jb25maXJtYXRpb24nKTtcclxuXHRcdHRoaXMubW9kYWxFbC5hZGRDbGFzcygnaWNvbmljLWljb24tcGlja2VyJyk7XHJcblx0XHR0aGlzLnNldFRpdGxlKCdDaGFuZ2UgaWNvbicpO1xyXG5cclxuXHRcdC8vIFNlYXJjaCBmaWVsZFxyXG5cdFx0Y29uc3Qgc2VhcmNoU2V0dGluZyA9IG5ldyBTZXR0aW5nKHRoaXMuY29udGVudEVsKTtcclxuXHRcdGlmICghUGxhdGZvcm0uaXNQaG9uZSkge1xyXG5cdFx0XHRzZWFyY2hTZXR0aW5nLnNldE5hbWUoJ1NlYXJjaCcpO1xyXG5cdFx0fVxyXG5cdFx0c2VhcmNoU2V0dGluZy5hZGRTZWFyY2goKHNlYXJjaEZpZWxkKSA9PiB7XHJcblx0XHRcdHNlYXJjaEZpZWxkXHJcblx0XHRcdFx0LnNldFBsYWNlaG9sZGVyKCdTZWFyY2ggaWNvbnMuLi4nKVxyXG5cdFx0XHRcdC5vbkNoYW5nZSgoKSA9PiB0aGlzLnVwZGF0ZVNlYXJjaFJlc3VsdHMoKSk7XHJcblx0XHRcdHNlYXJjaEZpZWxkLmlucHV0RWwuZW50ZXJLZXlIaW50ID0gJ2dvJztcclxuXHRcdFx0dGhpcy5zZWFyY2hGaWVsZCA9IHNlYXJjaEZpZWxkO1xyXG5cdFx0fSk7XHJcblx0XHRpZiAodGhpcy5zZWxlY3RlZEljb24pIHtcclxuXHRcdFx0dGhpcy5zZWFyY2hGaWVsZC5zZXRWYWx1ZSh0aGlzLnNlbGVjdGVkSWNvbik7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU2VhcmNoIHJlc3VsdHNcclxuXHRcdHRoaXMuc2VhcmNoUmVzdWx0c1NldHRpbmcgPSBuZXcgU2V0dGluZyh0aGlzLmNvbnRlbnRFbCk7XHJcblx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nLnNldHRpbmdFbC5hZGRDbGFzcygnaWNvbmljLXNlYXJjaC1yZXN1bHRzJyk7XHJcblx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nLnNldHRpbmdFbC50YWJJbmRleCA9IDA7XHJcblx0XHRcclxuXHRcdC8vIEFsbG93IHZlcnRpY2FsIHNjcm9sbGluZyB0byB3b3JrIGhvcml6b250YWxseVxyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzU2V0dGluZy5zZXR0aW5nRWwuYWRkRXZlbnRMaXN0ZW5lcignd2hlZWwnLCAoZXZlbnQpID0+IHtcclxuXHRcdFx0aWYgKGRvY3VtZW50LmJvZHkuaGFzQ2xhc3MoJ21vZC1ydGwnKSkge1xyXG5cdFx0XHRcdHRoaXMuc2VhcmNoUmVzdWx0c1NldHRpbmcuc2V0dGluZ0VsLnNjcm9sbExlZnQgLT0gZXZlbnQuZGVsdGFZO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdHRoaXMuc2VhcmNoUmVzdWx0c1NldHRpbmcuc2V0dGluZ0VsLnNjcm9sbExlZnQgKz0gZXZlbnQuZGVsdGFZO1xyXG5cdFx0XHR9XHJcblx0XHR9LCB7IHBhc3NpdmU6IHRydWUgfSk7XHJcblxyXG5cdFx0Ly8gQnV0dG9ucyAtIG1hdGNoIGljb25pYydzIGJ1dHRvbiBsYXlvdXRcclxuXHRcdGNvbnN0IGJ1dHRvbkNvbnRhaW5lciA9IHRoaXMubW9kYWxFbC5jcmVhdGVEaXYoeyBjbHM6ICdtb2RhbC1idXR0b24tY29udGFpbmVyJyB9KTtcclxuXHJcblx0XHQvLyBDYW5jZWxcclxuXHRcdG5ldyBCdXR0b25Db21wb25lbnQoYnV0dG9uQ29udGFpbmVyKVxyXG5cdFx0XHQuc2V0QnV0dG9uVGV4dCgnQ2FuY2VsJylcclxuXHRcdFx0Lm9uQ2xpY2soKCkgPT4gdGhpcy5jbG9zZSgpKVxyXG5cdFx0XHQuYnV0dG9uRWwuYWRkQ2xhc3MoJ21vZC1jYW5jZWwnKTtcclxuXHJcblx0XHQvLyBTYXZlXHJcblx0XHRuZXcgQnV0dG9uQ29tcG9uZW50KGJ1dHRvbkNvbnRhaW5lcilcclxuXHRcdFx0LnNldEJ1dHRvblRleHQoJ1NhdmUnKVxyXG5cdFx0XHQuc2V0Q3RhKClcclxuXHRcdFx0Lm9uQ2xpY2soKCkgPT4ge1xyXG5cdFx0XHRcdHRoaXMuY2FsbGJhY2sodGhpcy5zZWxlY3RlZEljb24pO1xyXG5cdFx0XHRcdHRoaXMuY2xvc2UoKTtcclxuXHRcdFx0fSk7XHJcblxyXG5cdFx0Ly8gQXV0by1mb2N1cyBzZWFyY2ggZmllbGRcclxuXHRcdHJlcXVlc3RBbmltYXRpb25GcmFtZSgoKSA9PiB7XHJcblx0XHRcdHRoaXMuc2VhcmNoRmllbGQuaW5wdXRFbC5zZWxlY3QoKTtcclxuXHRcdFx0dGhpcy51cGRhdGVTZWFyY2hSZXN1bHRzKCk7XHJcblx0XHR9KTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFVwZGF0ZSBzZWFyY2ggcmVzdWx0cyBiYXNlZCBvbiBjdXJyZW50IHF1ZXJ5XHJcblx0ICovXHJcblx0cHJpdmF0ZSB1cGRhdGVTZWFyY2hSZXN1bHRzKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgcXVlcnkgPSB0aGlzLnNlYXJjaEZpZWxkLmdldFZhbHVlKCkudG9Mb3dlckNhc2UoKS50cmltKCk7XHJcblx0XHRjb25zdCBmdXp6eVNlYXJjaCA9IHByZXBhcmVGdXp6eVNlYXJjaChxdWVyeSk7XHJcblx0XHRjb25zdCBtYXRjaGVzOiBbc2NvcmU6IG51bWJlciwgaWNvbkVudHJ5OiBbc3RyaW5nLCBzdHJpbmddXVtdID0gW107XHJcblxyXG5cdFx0Ly8gR2V0IGFsbCBhdmFpbGFibGUgaWNvbnNcclxuXHRcdGNvbnN0IGljb25JZHMgPSBnZXRJY29uSWRzKCk7XHJcblxyXG5cdFx0Ly8gU2VhcmNoIGljb25zXHJcblx0XHRpZiAocXVlcnkpIHtcclxuXHRcdFx0Zm9yIChjb25zdCBpY29uSWQgb2YgaWNvbklkcykge1xyXG5cdFx0XHRcdC8vIENyZWF0ZSBhIHJlYWRhYmxlIG5hbWUgZnJvbSBpY29uIElEXHJcblx0XHRcdFx0Y29uc3QgaWNvbk5hbWUgPSB0aGlzLmZvcm1hdEljb25OYW1lKGljb25JZCk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0aWYgKGljb25JZCA9PT0gcXVlcnkgfHwgaWNvbklkLnRvTG93ZXJDYXNlKCkgPT09IHF1ZXJ5KSB7XHJcblx0XHRcdFx0XHRtYXRjaGVzLnB1c2goWzAsIFtpY29uSWQsIGljb25OYW1lXV0pO1xyXG5cdFx0XHRcdH0gZWxzZSB7XHJcblx0XHRcdFx0XHRjb25zdCBmdXp6eU1hdGNoID0gZnV6enlTZWFyY2goaWNvbk5hbWUpO1xyXG5cdFx0XHRcdFx0aWYgKGZ1enp5TWF0Y2gpIHtcclxuXHRcdFx0XHRcdFx0bWF0Y2hlcy5wdXNoKFtmdXp6eU1hdGNoLnNjb3JlLCBbaWNvbklkLCBpY29uTmFtZV1dKTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdC8vIFNob3cgYWxsIGljb25zIGlmIG5vIHF1ZXJ5XHJcblx0XHRcdGZvciAoY29uc3QgaWNvbklkIG9mIGljb25JZHMpIHtcclxuXHRcdFx0XHRjb25zdCBpY29uTmFtZSA9IHRoaXMuZm9ybWF0SWNvbk5hbWUoaWNvbklkKTtcclxuXHRcdFx0XHRtYXRjaGVzLnB1c2goWzAsIFtpY29uSWQsIGljb25OYW1lXV0pO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gU29ydCBieSBzY29yZVxyXG5cdFx0bWF0Y2hlcy5zb3J0KChbc2NvcmVBXSwgW3Njb3JlQl0pID0+IHNjb3JlQSA+IHNjb3JlQiA/IC0xIDogKzEpO1xyXG5cclxuXHRcdC8vIExpbWl0IHJlc3VsdHNcclxuXHRcdHRoaXMuc2VhcmNoUmVzdWx0cy5sZW5ndGggPSAwO1xyXG5cdFx0Y29uc3QgbWF4UmVzdWx0cyA9IDEwMDtcclxuXHRcdGZvciAoY29uc3QgWywgaWNvbkVudHJ5XSBvZiBtYXRjaGVzKSB7XHJcblx0XHRcdHRoaXMuc2VhcmNoUmVzdWx0cy5wdXNoKGljb25FbnRyeSk7XHJcblx0XHRcdGlmICh0aGlzLnNlYXJjaFJlc3VsdHMubGVuZ3RoID49IG1heFJlc3VsdHMpIGJyZWFrO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFVwZGF0ZSBVSSAtIHVzZSBFeHRyYUJ1dHRvbkNvbXBvbmVudCBsaWtlIGljb25pY1xyXG5cdFx0dGhpcy5zZWFyY2hSZXN1bHRzU2V0dGluZy5jbGVhcigpO1xyXG5cdFx0Zm9yIChjb25zdCBbaWNvbklkLCBpY29uTmFtZV0gb2YgdGhpcy5zZWFyY2hSZXN1bHRzKSB7XHJcblx0XHRcdHRoaXMuc2VhcmNoUmVzdWx0c1NldHRpbmcuYWRkRXh0cmFCdXR0b24oKGljb25CdXR0b24pID0+IHtcclxuXHRcdFx0XHRpY29uQnV0dG9uLnNldFRvb2x0aXAoaWNvbk5hbWUsIHtcclxuXHRcdFx0XHRcdGRlbGF5OiAzMDAsXHJcblx0XHRcdFx0XHRwbGFjZW1lbnQ6IFBsYXRmb3JtLmlzUGhvbmUgPyAndG9wJyA6ICdib3R0b20nLFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdGNvbnN0IGljb25FbCA9IGljb25CdXR0b24uZXh0cmFTZXR0aW5nc0VsO1xyXG5cdFx0XHRcdGljb25FbC5hZGRDbGFzcygnaWNvbmljLXNlYXJjaC1yZXN1bHQnKTtcclxuXHRcdFx0XHRpY29uRWwudGFiSW5kZXggPSAtMTtcclxuXHJcblx0XHRcdFx0c2V0SWNvbihpY29uRWwsIGljb25JZCk7XHJcblxyXG5cdFx0XHRcdC8vIEhpZ2hsaWdodCBzZWxlY3RlZCBpY29uXHJcblx0XHRcdFx0aWYgKGljb25JZCA9PT0gdGhpcy5zZWxlY3RlZEljb24pIHtcclxuXHRcdFx0XHRcdGljb25FbC5hZGRDbGFzcygnaXMtc2VsZWN0ZWQnKTtcclxuXHRcdFx0XHR9XHJcblxyXG5cdFx0XHRcdGljb25FbC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuXHRcdFx0XHRcdHRoaXMuc2VsZWN0ZWRJY29uID0gaWNvbklkO1xyXG5cdFx0XHRcdFx0dGhpcy5jYWxsYmFjayhpY29uSWQpO1xyXG5cdFx0XHRcdFx0dGhpcy5jbG9zZSgpO1xyXG5cdFx0XHRcdH0pO1xyXG5cclxuXHRcdFx0XHQvLyBNb2JpbGU6IHNob3cgdG9vbHRpcCBvbiBsb25nIHByZXNzXHJcblx0XHRcdFx0aWYgKFBsYXRmb3JtLmlzUGhvbmUpIHtcclxuXHRcdFx0XHRcdGljb25FbC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsICgpID0+IHtcclxuXHRcdFx0XHRcdFx0bmF2aWdhdG9yLnZpYnJhdGU/LigxMDApO1xyXG5cdFx0XHRcdFx0XHQvLyBUb29sdGlwIGlzIGFscmVhZHkgc2V0IGFib3ZlXHJcblx0XHRcdFx0XHR9KTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFVzZSBhbiBpbnZpc2libGUgYnV0dG9uIHRvIHByZXNlcnZlIGhlaWdodCBpZiBubyByZXN1bHRzXHJcblx0XHRpZiAodGhpcy5zZWFyY2hSZXN1bHRzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHR0aGlzLnNlYXJjaFJlc3VsdHNTZXR0aW5nLmFkZEV4dHJhQnV0dG9uKChidXR0b24pID0+IHtcclxuXHRcdFx0XHRidXR0b24uZXh0cmFTZXR0aW5nc0VsLmFkZENsYXNzZXMoWydpY29uaWMtaW52aXNpYmxlJywgJ2ljb25pYy1zZWFyY2gtcmVzdWx0J10pO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZvcm1hdCBpY29uIElEIGludG8gcmVhZGFibGUgbmFtZVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgZm9ybWF0SWNvbk5hbWUoaWNvbklkOiBzdHJpbmcpOiBzdHJpbmcge1xyXG5cdFx0Ly8gUmVtb3ZlIGx1Y2lkZS0gcHJlZml4IGlmIHByZXNlbnRcclxuXHRcdGxldCBuYW1lID0gaWNvbklkLnJlcGxhY2UoL15sdWNpZGUtLywgJycpO1xyXG5cdFx0Ly8gUmVwbGFjZSBkYXNoZXMgd2l0aCBzcGFjZXNcclxuXHRcdG5hbWUgPSBuYW1lLnJlcGxhY2UoLy0vZywgJyAnKTtcclxuXHRcdC8vIENhcGl0YWxpemUgZmlyc3QgbGV0dGVyIG9mIGVhY2ggd29yZFxyXG5cdFx0cmV0dXJuIG5hbWUuc3BsaXQoJyAnKS5tYXAod29yZCA9PiBcclxuXHRcdFx0d29yZC5jaGFyQXQoMCkudG9VcHBlckNhc2UoKSArIHdvcmQuc2xpY2UoMSlcclxuXHRcdCkuam9pbignICcpO1xyXG5cdH1cclxuXHJcblx0b25DbG9zZSgpOiB2b2lkIHtcclxuXHRcdHRoaXMuY29udGVudEVsLmVtcHR5KCk7XHJcblx0fVxyXG59XHJcbiIsICIvKipcclxuICogSG9tZSBCYXNlIFNlcnZpY2VcclxuICogQ29yZSBsb2dpYyBmb3Igb3BlbmluZyBhbmQgbWFuYWdpbmcgdGhlIGhvbWUgYmFzZSBmaWxlXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBURmlsZSwgV29ya3NwYWNlTGVhZiwgTWFya2Rvd25WaWV3LCBQbGF0Zm9ybSwgVmlldyBhcyBPVmlldyB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHR5cGUgSG9tZUJhc2VQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IEhvbWVCYXNlVHlwZSwgT3BlbmluZ01vZGUgfSBmcm9tICcuLi9zZXR0aW5ncyc7XHJcbmltcG9ydCB7IGdldEZpbGVCeVBhdGgsIGlzTWFya2Rvd25MaWtlLCBsZWFmSGFzRmlsZSwgaXNTdXBwb3J0ZWRFeHRlbnNpb24gfSBmcm9tICcuLi91dGlscy9maWxlLXV0aWxzJztcclxuaW1wb3J0IHsgZXhlY3V0ZUNvbW1hbmQgfSBmcm9tICcuLi91aS9jb21tYW5kLXN1Z2dlc3QnO1xyXG5pbXBvcnQgeyBjb21wdXRlSG9tZUJhc2VQYXRoLCB0cmltRmlsZSB9IGZyb20gJy4uL3V0aWxzL2hvbWViYXNlLXJlc29sdmVyJztcclxuXHJcbi8qKlxyXG4gKiBWaWV3IHR5cGVzIHRoYXQgY2FuIGJlIGhvbWUgYmFzZSBmaWxlc1xyXG4gKi9cclxuY29uc3QgTEVBRl9UWVBFUyA9IFsnbWFya2Rvd24nLCAnY2FudmFzJywgJ2Jhc2VzJ107XHJcblxyXG4vKipcclxuICogSGVscGVyIHRvIGNoZWNrIGlmIHR3byBmaWxlIHBhdGhzIGFyZSBlcXVhbCAoY2FzZS1pbnNlbnNpdGl2ZSwgaWdub3JpbmcgZXh0ZW5zaW9uKVxyXG4gKi9cclxuZnVuY3Rpb24gZXF1YWxzQ2FzZWxlc3MocGF0aDE6IHN0cmluZywgcGF0aDI6IHN0cmluZyk6IGJvb2xlYW4ge1xyXG5cdGNvbnN0IG5vcm1hbGl6ZSA9IChwOiBzdHJpbmcpID0+IHAudG9Mb3dlckNhc2UoKS5yZXBsYWNlKC9cXC5tZCQvLCAnJyk7XHJcblx0cmV0dXJuIG5vcm1hbGl6ZShwYXRoMSkgPT09IG5vcm1hbGl6ZShwYXRoMik7XHJcbn1cclxuXHJcbmV4cG9ydCBjbGFzcyBIb21lQmFzZVNlcnZpY2Uge1xyXG5cdHByaXZhdGUgYXBwOiBBcHA7XHJcblx0cHJpdmF0ZSBwbHVnaW46IEhvbWVCYXNlUGx1Z2luO1xyXG5cclxuXHRjb25zdHJ1Y3RvcihwbHVnaW46IEhvbWVCYXNlUGx1Z2luKSB7XHJcblx0XHR0aGlzLnBsdWdpbiA9IHBsdWdpbjtcclxuXHRcdHRoaXMuYXBwID0gcGx1Z2luLmFwcDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIE9wZW4gaG9tZSBiYXNlIHdpdGggYSBzcGVjaWZpYyBtb2RlIChmb3Igc3RhcnR1cC9tYW51YWwgb3BlbnMpXHJcblx0ICovXHJcblx0YXN5bmMgb3BlbkhvbWVCYXNlV2l0aE1vZGUobW9kZTogT3BlbmluZ01vZGUsIHJ1bkNvbW1hbmQ6IGJvb2xlYW4gPSB0cnVlKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cdFx0XHJcblx0XHQvLyBIYW5kbGUgbm9uLWZpbGUgdHlwZXMgKFdvcmtzcGFjZSwgR3JhcGgsIE5vbmUpXHJcblx0XHRpZiAoaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLm9wZW5Xb3Jrc3BhY2UoaG9tZUJhc2VTZXR0aW5ncy52YWx1ZSk7XHJcblx0XHR9XHJcblx0XHRpZiAoaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuR3JhcGgpIHtcclxuXHRcdFx0Ly8gR3JhcGggdmlldzoganVzdCBvcGVuIGl0IChubyBnaG9zdCB0YWIgc3VwcG9ydCBkdWUgdG8gdW5yZWxpYWJsZSBkZXRlY3Rpb24pXHJcblx0XHRcdHJldHVybiB0aGlzLm9wZW5HcmFwaCgpO1xyXG5cdFx0fVxyXG5cdFx0aWYgKGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLk5vbmUpIHtcclxuXHRcdFx0Ly8gSnVzdCBydW4gY29tbWFuZCwgZG9uJ3Qgb3BlbiBhbnl0aGluZ1xyXG5cdFx0XHRpZiAocnVuQ29tbWFuZCkge1xyXG5cdFx0XHRcdHRoaXMucnVuQ29tbWFuZE9uT3BlbigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJlc29sdmUgdGhlIGFjdHVhbCBmaWxlIHBhdGggYmFzZWQgb24gdHlwZVxyXG5cdFx0Y29uc3QgcmVzb2x2ZWRQYXRoID0gYXdhaXQgY29tcHV0ZUhvbWVCYXNlUGF0aChcclxuXHRcdFx0aG9tZUJhc2VTZXR0aW5ncy50eXBlLFxyXG5cdFx0XHRob21lQmFzZVNldHRpbmdzLnZhbHVlLFxyXG5cdFx0XHR0aGlzLnBsdWdpblxyXG5cdFx0KTtcclxuXHRcdFxyXG5cdFx0aWYgKCFyZXNvbHZlZFBhdGgpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEdldCB0aGUgZmlsZSAtIHVzZSBtZXRhZGF0YUNhY2hlIGZvciBiZXR0ZXIgcGF0aCByZXNvbHV0aW9uIChsaWtlIGhvbWVwYWdlIHBsdWdpbilcclxuXHRcdGxldCBmaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZXNvbHZlZFBhdGgsICcvJyk7XHJcblx0XHRcclxuXHRcdC8vIElmIG5vdCBmb3VuZCBhbmQgYXV0by1jcmVhdGUgaXMgbm90IHN1cHBvcnRlZCBmb3IgdGhpcyB0eXBlLCByZXR1cm5cclxuXHRcdC8vIEZvciBub3csIHdlJ2xsIHRyeSBnZXRGaWxlQnlQYXRoIGFzIGZhbGxiYWNrXHJcblx0XHRpZiAoIWZpbGUpIHtcclxuXHRcdFx0ZmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5hcHAsIHJlc29sdmVkUGF0aCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICghZmlsZSkge1xyXG5cdFx0XHQvLyBUcnkgdG8gY3JlYXRlIGlmIGl0J3MgYSBtYXJrZG93biBmaWxlIGFuZCBwYXRoIGRvZXNuJ3QgaGF2ZSBleHRlbnNpb25cclxuXHRcdFx0Y29uc3QgdW50cmltbWVkUGF0aCA9IHJlc29sdmVkUGF0aC5lbmRzV2l0aCgnLm1kJykgPyByZXNvbHZlZFBhdGggOiBgJHtyZXNvbHZlZFBhdGh9Lm1kYDtcclxuXHRcdFx0ZmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5hcHAsIHVudHJpbW1lZFBhdGgpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKCFmaWxlICYmIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLkZpbGUpIHtcclxuXHRcdFx0XHQvLyBDb3VsZCBjcmVhdGUgZmlsZSBoZXJlIGlmIGF1dG9DcmVhdGUgc2V0dGluZyBleGlzdHMsIGJ1dCBmb3Igbm93IGp1c3QgcmV0dXJuXHJcblx0XHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmICghZmlsZSkge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSGFuZGxlIG9wZW5pbmcgbW9kZVxyXG5cdFx0aWYgKG1vZGUgPT09ICdyZXBsYWNlLWFsbCcpIHtcclxuXHRcdFx0YXdhaXQgdGhpcy5kZXRhY2hBbGxMZWF2ZXMoKTtcclxuXHRcdH0gZWxzZSBpZiAobW9kZSA9PT0gJ3JlcGxhY2UtbGFzdCcpIHtcclxuXHRcdFx0Ly8gUmVwbGFjZSB0aGUgYWN0aXZlIGxlYWYgKGNsb3NlIGl0IGFuZCBvcGVuIGhvbWUgYmFzZSBpbiBpdHMgcGxhY2UpXHJcblx0XHRcdGNvbnN0IGFjdGl2ZUxlYWYgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShPVmlldyk/LmxlYWY7XHJcblx0XHRcdGlmIChhY3RpdmVMZWFmKSB7XHJcblx0XHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gYWN0aXZlTGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0XHQvLyBPbmx5IGNsb3NlIGlmIG5vdCBwaW5uZWRcclxuXHRcdFx0XHRpZiAodmlld1N0YXRlLnBpbm5lZCAhPT0gdHJ1ZSkge1xyXG5cdFx0XHRcdFx0dm9pZCBhY3RpdmVMZWFmLmRldGFjaCgpO1xyXG5cdFx0XHRcdFx0Ly8gV2FpdCBhIGJpdCBmb3IgZGV0YWNobWVudFxyXG5cdFx0XHRcdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGZvciBleGlzdGluZyBsZWFmIChidXQgZXhjbHVkZSBnaG9zdCB0YWIgZm9yIG1hbnVhbCBvcGVucylcclxuXHRcdGNvbnN0IGV4aXN0aW5nTGVhZiA9IHRoaXMuZmluZEV4aXN0aW5nSG9tZUJhc2VMZWFmKGZpbGUpO1xyXG5cdFx0aWYgKGV4aXN0aW5nTGVhZiAmJiBtb2RlICE9PSAncmVwbGFjZS1hbGwnKSB7XHJcblx0XHRcdC8vIEZvciByZXBsYWNlLWxhc3QsIHdlIHN0aWxsIHdhbnQgdG8gcmV1c2UgZXhpc3RpbmcgaWYgZm91bmQgKGFmdGVyIGNsb3NpbmcgYWN0aXZlKVxyXG5cdFx0XHRjb25zdCB2aWV3U3RhdGUgPSBleGlzdGluZ0xlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdGlmICh2aWV3U3RhdGUucGlubmVkID09PSB0cnVlICYmIHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbikge1xyXG5cdFx0XHRcdC8vIERvbid0IHVzZSBnaG9zdCB0YWIgZm9yIG1hbnVhbCBvcGVucyAtIHdpbGwgY3JlYXRlIG5ldyB0YWIgYmVsb3dcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihleGlzdGluZ0xlYWYpO1xyXG5cdFx0XHRcdGF3YWl0IHRoaXMuY29uZmlndXJlVmlldyhleGlzdGluZ0xlYWYsIGZpbGUpO1xyXG5cdFx0XHRcdGlmIChydW5Db21tYW5kKSB7XHJcblx0XHRcdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBPcGVuIGluIG5ldyBsZWFmXHJcblx0XHRjb25zdCBuZXdMZWFmID0gbW9kZSA9PT0gJ3JldGFpbicgXHJcblx0XHRcdD8gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoJ3RhYicpXHJcblx0XHRcdDogdGhpcy5hcHAud29ya3NwYWNlLmdldExlYWYoZmFsc2UpO1xyXG5cdFx0XHJcblx0XHRpZiAoIW5ld0xlYWYpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0YXdhaXQgbmV3TGVhZi5vcGVuRmlsZShmaWxlKTtcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKG5ld0xlYWYpO1xyXG5cdFx0YXdhaXQgdGhpcy5jb25maWd1cmVWaWV3KG5ld0xlYWYsIGZpbGUpO1xyXG5cclxuXHRcdGlmIChydW5Db21tYW5kKSB7XHJcblx0XHRcdHRoaXMucnVuQ29tbWFuZE9uT3BlbigpO1xyXG5cdFx0fVxyXG5cclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogT3BlbiB3b3Jrc3BhY2VcclxuXHQgKi9cclxuXHRwcml2YXRlIGFzeW5jIG9wZW5Xb3Jrc3BhY2Uod29ya3NwYWNlTmFtZTogc3RyaW5nKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHQgXHJcblx0XHRjb25zdCB3b3Jrc3BhY2VQbHVnaW4gPSB0aGlzLmFwcC5pbnRlcm5hbFBsdWdpbnM/LnBsdWdpbnM/LndvcmtzcGFjZXM7XHJcblx0XHQgXHJcblx0XHRpZiAoIXdvcmtzcGFjZVBsdWdpbj8uZW5hYmxlZCB8fCAhd29ya3NwYWNlUGx1Z2luLmluc3RhbmNlPy5sb2FkV29ya3NwYWNlKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHRcdCBcclxuXHRcdHdvcmtzcGFjZVBsdWdpbi5pbnN0YW5jZS5sb2FkV29ya3NwYWNlKHdvcmtzcGFjZU5hbWUpO1xyXG5cdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpO1xyXG5cdFx0cmV0dXJuIHRydWU7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBPcGVuIGdyYXBoIHZpZXdcclxuXHQgKi9cclxuXHRhc3luYyBvcGVuR3JhcGgoKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHQgXHJcblx0XHRhd2FpdCB0aGlzLmFwcC5jb21tYW5kcz8uZXhlY3V0ZUNvbW1hbmRCeUlkPy4oJ2dyYXBoOm9wZW4nKTtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogT3BlbiBncmFwaCB2aWV3IGluIGdob3N0IHRhYlxyXG5cdCAqIERFUFJFQ0FURUQ6IEdyYXBoIHZpZXcgZ2hvc3QgdGFiIGRldGVjdGlvbiBpcyB1bnJlbGlhYmxlLCBzbyB0aGlzIGlzIG5vIGxvbmdlciB1c2VkXHJcblx0ICogR3JhcGggdmlld3Mgbm93IGp1c3Qgb3BlbiBub3JtYWxseSBsaWtlIHJhbmRvbSBmaWxlc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXN5bmMgb3BlbkdyYXBoSW5HaG9zdFRhYihydW5Db21tYW5kOiBib29sZWFuKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHQvLyBDaGVjayBpZiBzZXR0aW5ncyBtb2RhbCBpcyBvcGVuXHJcblx0XHRpZiAodGhpcy5pc1NldHRpbmdzTW9kYWxPcGVuKCkpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIGdob3N0IHRhYiBhbHJlYWR5IGV4aXN0cyAocGlubmVkIGdyYXBoIHZpZXcpXHJcblx0XHQvLyBVc2UgdGhlIHNhbWUgYXBwcm9hY2ggYXMgZmlsZS1iYXNlZCB0YWJzOiBmaW5kIGl0IGVhY2ggdGltZVxyXG5cdFx0Ly8gVHJ5IGdldExlYXZlc09mVHlwZSBmaXJzdCwgdGhlbiBpdGVyYXRlQWxsTGVhdmVzIGFzIGZhbGxiYWNrXHJcblx0XHRsZXQgZ3JhcGhMZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdncmFwaCcpO1xyXG5cdFx0XHJcblx0XHQvLyBJZiBnZXRMZWF2ZXNPZlR5cGUgZG9lc24ndCB3b3JrIChyZXR1cm5zIDApLCB1c2UgaXRlcmF0ZUFsbExlYXZlc1xyXG5cdFx0aWYgKGdyYXBoTGVhdmVzLmxlbmd0aCA9PT0gMCkge1xyXG5cdFx0XHRncmFwaExlYXZlcyA9IFtdO1xyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRjb25zdCB2aWV3U3RhdGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0XHRcdFx0aWYgKHZpZXdTdGF0ZS50eXBlID09PSAnZ3JhcGgnKSB7XHJcblx0XHRcdFx0XHRcdGdyYXBoTGVhdmVzLnB1c2gobGVhZik7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0XHQvLyBMZWFmIG1pZ2h0IGJlIGRldGFjaGVkLCBza2lwIGl0XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0XHJcblx0XHQvLyBJZiB0aGVyZSdzIGV4YWN0bHkgb25lIGdyYXBoIHZpZXcsIHVzZSBpdCBhcyB0aGUgZ2hvc3QgdGFiXHJcblx0XHQvLyAoc2luY2Ugd2Ugc2hvdWxkIG9ubHkgaGF2ZSBvbmUgZ2hvc3QgdGFiIGF0IGEgdGltZSlcclxuXHRcdGxldCBnaG9zdFRhYjogV29ya3NwYWNlTGVhZiB8IG51bGwgPSBudWxsO1xyXG5cdFx0XHJcblx0XHRpZiAoZ3JhcGhMZWF2ZXMubGVuZ3RoID09PSAxKSB7XHJcblx0XHRcdC8vIE9ubHkgb25lIGdyYXBoIHZpZXcgZXhpc3RzIC0gdGhpcyBpcyBvdXIgZ2hvc3QgdGFiXHJcblx0XHRcdGdob3N0VGFiID0gZ3JhcGhMZWF2ZXNbMF0gfHwgbnVsbDtcclxuXHRcdH0gZWxzZSBpZiAoZ3JhcGhMZWF2ZXMubGVuZ3RoID4gMSkge1xyXG5cdFx0XHQvLyBNdWx0aXBsZSBncmFwaCB2aWV3cyAtIGZpbmQgdGhlIHBpbm5lZCBvbmVcclxuXHRcdFx0Zm9yIChjb25zdCBsZWFmIG9mIGdyYXBoTGVhdmVzKSB7XHJcblx0XHRcdFx0aWYgKCFsZWFmKSBjb250aW51ZTtcclxuXHRcdFx0XHR0cnkge1xyXG5cdFx0XHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0XHRcdGlmICh2aWV3U3RhdGUucGlubmVkID09PSB0cnVlKSB7XHJcblx0XHRcdFx0XHRcdGdob3N0VGFiID0gbGVhZjtcclxuXHRcdFx0XHRcdFx0YnJlYWs7XHJcblx0XHRcdFx0XHR9XHJcblx0XHRcdFx0fSBjYXRjaCB7XHJcblx0XHRcdFx0XHQvLyBMZWFmIG1pZ2h0IGJlIGRldGFjaGVkLCBza2lwIGl0XHJcblx0XHRcdFx0XHRjb250aW51ZTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIElmIG5vIHBpbm5lZCBvbmUgZm91bmQsIHVzZSB0aGUgZmlyc3Qgb25lIChzaG91bGRuJ3QgaGFwcGVuLCBidXQgZmFsbGJhY2spXHJcblx0XHRcdGlmICghZ2hvc3RUYWIgJiYgZ3JhcGhMZWF2ZXNbMF0pIHtcclxuXHRcdFx0XHRnaG9zdFRhYiA9IGdyYXBoTGVhdmVzWzBdIHx8IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKGdob3N0VGFiKSB7XHJcblx0XHRcdC8vIEdob3N0IHRhYiBleGlzdHMgLSBjbG9zZSBBTEwgb3RoZXIgZ3JhcGggdmlld3MgKHBpbm5lZCBvciBub3QpLCB0aGVuIGZvY3VzIGdob3N0IHRhYlxyXG5cdFx0XHQvLyBGaW5kIGFsbCBncmFwaCBsZWF2ZXMgYWdhaW4gdG8gZ2V0IHRoZSBjdXJyZW50IGxpc3RcclxuXHRcdFx0Y29uc3QgYWxsR3JhcGhMZWF2ZXNGb3JDbGVhbnVwOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0XHRjb25zdCB2aWV3U3RhdGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0XHRcdGlmICh2aWV3U3RhdGUudHlwZSA9PT0gJ2dyYXBoJykge1xyXG5cdFx0XHRcdFx0YWxsR3JhcGhMZWF2ZXNGb3JDbGVhbnVwLnB1c2gobGVhZik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0Y29uc3Qgb3RoZXJHcmFwaExlYXZlcyA9IGFsbEdyYXBoTGVhdmVzRm9yQ2xlYW51cC5maWx0ZXIobGVhZiA9PiBsZWFmICE9PSBnaG9zdFRhYik7XHJcblx0XHRcdFxyXG5cdFx0XHRmb3IgKGNvbnN0IGxlYWYgb2Ygb3RoZXJHcmFwaExlYXZlcykge1xyXG5cdFx0XHRcdHZvaWQgbGVhZi5kZXRhY2goKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gV2FpdCBmb3IgZGV0YWNobWVudHMgdG8gY29tcGxldGVcclxuXHRcdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDE1MCkpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gRG91YmxlLWNoZWNrIC0gbWFrZSBzdXJlIG5vIG90aGVyIGdyYXBoIHZpZXdzIGV4aXN0XHJcblx0XHRcdC8vIFVzZSBpdGVyYXRlQWxsTGVhdmVzIGluc3RlYWQgb2YgZ2V0TGVhdmVzT2ZUeXBlIGZvciBncmFwaCB2aWV3c1xyXG5cdFx0XHRjb25zdCByZW1haW5pbmdHcmFwaExlYXZlczogV29ya3NwYWNlTGVhZltdID0gW107XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmKSA9PiB7XHJcblx0XHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0XHRpZiAodmlld1N0YXRlLnR5cGUgPT09ICdncmFwaCcpIHtcclxuXHRcdFx0XHRcdHJlbWFpbmluZ0dyYXBoTGVhdmVzLnB1c2gobGVhZik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9KTtcclxuXHRcdFx0aWYgKHJlbWFpbmluZ0dyYXBoTGVhdmVzLmxlbmd0aCA+IDEpIHtcclxuXHRcdFx0XHQvLyBTdGlsbCBoYXZlIGR1cGxpY2F0ZXMsIGNsb3NlIGFsbCBleGNlcHQgZ2hvc3QgdGFiXHJcblx0XHRcdFx0Zm9yIChjb25zdCBsZWFmIG9mIHJlbWFpbmluZ0dyYXBoTGVhdmVzKSB7XHJcblx0XHRcdFx0XHRpZiAobGVhZiAhPT0gZ2hvc3RUYWIpIHtcclxuXHRcdFx0XHRcdFx0dm9pZCBsZWFmLmRldGFjaCgpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMTAwKSk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdGNvbnN0IHNob3VsZEZvY3VzID0gIXRoaXMuaXNTZXR0aW5nc01vZGFsT3BlbigpO1xyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihnaG9zdFRhYiwgeyBmb2N1czogc2hvdWxkRm9jdXMgfSk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAocnVuQ29tbWFuZCkge1xyXG5cdFx0XHRcdHRoaXMucnVuQ29tbWFuZE9uT3BlbigpO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE5vIGdob3N0IHRhYiBleGlzdHMgLSBjbG9zZSBBTEwgZXhpc3RpbmcgZ3JhcGggdmlld3MgZmlyc3RcclxuXHRcdC8vIEZpbmQgYWxsIGdyYXBoIGxlYXZlc1xyXG5cdFx0Y29uc3QgYWxsRXhpc3RpbmdHcmFwaExlYXZlczogV29ya3NwYWNlTGVhZltdID0gW107XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHRjb25zdCB2aWV3U3RhdGUgPSBsZWFmLmdldFZpZXdTdGF0ZSgpO1xyXG5cdFx0XHRpZiAodmlld1N0YXRlLnR5cGUgPT09ICdncmFwaCcpIHtcclxuXHRcdFx0XHRhbGxFeGlzdGluZ0dyYXBoTGVhdmVzLnB1c2gobGVhZik7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cdFx0Zm9yIChjb25zdCBsZWFmIG9mIGFsbEV4aXN0aW5nR3JhcGhMZWF2ZXMpIHtcclxuXHRcdFx0dm9pZCBsZWFmLmRldGFjaCgpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBXYWl0IGZvciBkZXRhY2htZW50cyB0byBjb21wbGV0ZVxyXG5cdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpO1xyXG5cclxuXHRcdC8vIENoZWNrIGlmIHRoZXJlJ3MgYWxyZWFkeSBhIGdyYXBoIHZpZXcgKG1pZ2h0IGhhdmUgYmVlbiBvcGVuZWQgYnkgYW5vdGhlciBhY3Rpb24pXHJcblx0XHQvLyBVc2UgaXRlcmF0ZUFsbExlYXZlcyBpbnN0ZWFkIG9mIGdldExlYXZlc09mVHlwZSBmb3IgZ3JhcGggdmlld3MgKGdldExlYXZlc09mVHlwZSBkb2Vzbid0IHdvcmsgZm9yIGdyYXBoKVxyXG5cdFx0bGV0IGV4aXN0aW5nR3JhcGhMZWF2ZXM6IFdvcmtzcGFjZUxlYWZbXSA9IFtdO1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0aWYgKHZpZXdTdGF0ZS50eXBlID09PSAnZ3JhcGgnKSB7XHJcblx0XHRcdFx0ZXhpc3RpbmdHcmFwaExlYXZlcy5wdXNoKGxlYWYpO1xyXG5cdFx0XHR9XHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0bGV0IG5ld0dob3N0VGFiOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCA9IG51bGw7XHJcblx0XHRcclxuXHRcdGlmIChleGlzdGluZ0dyYXBoTGVhdmVzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0Ly8gVXNlIHRoZSBmaXJzdCBleGlzdGluZyBncmFwaCB2aWV3XHJcblx0XHRcdG5ld0dob3N0VGFiID0gZXhpc3RpbmdHcmFwaExlYXZlc1swXSB8fCBudWxsO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gTm8gZXhpc3RpbmcgZ3JhcGggdmlldywgb3BlbiBhIG5ldyBvbmVcclxuXHRcdFx0XHJcblx0XHRcdC8vIE9wZW4gZ3JhcGggdmlldyBpbiBhIG5ldyBsZWFmIGRpcmVjdGx5IGluc3RlYWQgb2YgdXNpbmcgdGhlIGNvbW1hbmRcclxuXHRcdFx0Ly8gVGhlIGNvbW1hbmQgbWlnaHQgY2xvc2UgZXhpc3Rpbmcgdmlld3NcclxuXHRcdFx0Y29uc3QgbmV3TGVhZiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKTtcclxuXHRcdFx0aWYgKG5ld0xlYWYpIHtcclxuXHRcdFx0XHRhd2FpdCBuZXdMZWFmLnNldFZpZXdTdGF0ZSh7XHJcblx0XHRcdFx0XHR0eXBlOiAnZ3JhcGgnLFxyXG5cdFx0XHRcdFx0c3RhdGU6IHt9LFxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdC8vIFdhaXQgZm9yIGdyYXBoIHRvIGluaXRpYWxpemVcclxuXHRcdFx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwKSk7XHJcblx0XHRcdFx0XHJcblx0XHRcdFx0bmV3R2hvc3RUYWIgPSBuZXdMZWFmO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIEZhbGxiYWNrIHRvIGNvbW1hbmQgaWYgd2UgY2FuJ3QgY3JlYXRlIGxlYWZcclxuXHRcdFx0XHRhd2FpdCB0aGlzLm9wZW5HcmFwaCgpO1xyXG5cdFx0XHRcdGF3YWl0IG5ldyBQcm9taXNlKHJlc29sdmUgPT4gc2V0VGltZW91dChyZXNvbHZlLCAzMDApKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHRleGlzdGluZ0dyYXBoTGVhdmVzID0gW107XHJcblx0XHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdFx0XHRpZiAodmlld1N0YXRlLnR5cGUgPT09ICdncmFwaCcpIHtcclxuXHRcdFx0XHRcdFx0ZXhpc3RpbmdHcmFwaExlYXZlcy5wdXNoKGxlYWYpO1xyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH0pO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChleGlzdGluZ0dyYXBoTGVhdmVzLmxlbmd0aCA+IDApIHtcclxuXHRcdFx0XHRcdG5ld0dob3N0VGFiID0gZXhpc3RpbmdHcmFwaExlYXZlc1swXSB8fCBudWxsO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAobmV3R2hvc3RUYWIpIHtcclxuXHRcdFx0bmV3R2hvc3RUYWIuc2V0UGlubmVkKHRydWUpO1xyXG5cdFx0XHRcclxuXHRcdFx0Ly8gQ2xvc2UgYW55IG90aGVyIGdyYXBoIHZpZXdzIHRoYXQgbWlnaHQgaGF2ZSBiZWVuIGNyZWF0ZWRcclxuXHRcdFx0Ly8gVXNlIGl0ZXJhdGVBbGxMZWF2ZXMgdG8gZmluZCBhbGwgZ3JhcGggdmlld3NcclxuXHRcdFx0Y29uc3QgYWxsR3JhcGhMZWF2ZXM6IFdvcmtzcGFjZUxlYWZbXSA9IFtdO1xyXG5cdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdFx0aWYgKHZpZXdTdGF0ZS50eXBlID09PSAnZ3JhcGgnKSB7XHJcblx0XHRcdFx0XHRhbGxHcmFwaExlYXZlcy5wdXNoKGxlYWYpO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fSk7XHJcblx0XHRcdFxyXG5cdFx0XHRmb3IgKGNvbnN0IGxlYWYgb2YgYWxsR3JhcGhMZWF2ZXMpIHtcclxuXHRcdFx0XHRpZiAobGVhZiAhPT0gbmV3R2hvc3RUYWIpIHtcclxuXHRcdFx0XHRcdHZvaWQgbGVhZi5kZXRhY2goKTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFdhaXQgZm9yIGNsZWFudXBcclxuXHRcdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDEwMCkpO1xyXG5cdFx0XHRcclxuXHRcdFx0Y29uc3Qgc2hvdWxkRm9jdXMgPSAhdGhpcy5pc1NldHRpbmdzTW9kYWxPcGVuKCk7XHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5zZXRBY3RpdmVMZWFmKG5ld0dob3N0VGFiLCB7IGZvY3VzOiBzaG91bGRGb2N1cyB9KTtcclxuXHRcdFx0XHJcblx0XHRcdGlmIChydW5Db21tYW5kKSB7XHJcblx0XHRcdFx0dGhpcy5ydW5Db21tYW5kT25PcGVuKCk7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIGZhbHNlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogT3BlbiB0aGUgaG9tZSBiYXNlIGZpbGVcclxuXHQgKiBAcGFyYW0gb3B0aW9ucyBPcHRpb25zIGZvciBvcGVuaW5nXHJcblx0ICovXHJcblx0YXN5bmMgb3BlbkhvbWVCYXNlKG9wdGlvbnM6IHtcclxuXHRcdHJlcGxhY2VBY3RpdmVMZWFmPzogYm9vbGVhbjtcclxuXHRcdHJ1bkNvbW1hbmQ/OiBib29sZWFuO1xyXG5cdH0gPSB7fSk6IFByb21pc2U8Ym9vbGVhbj4ge1xyXG5cdFx0Y29uc3QgeyBydW5Db21tYW5kID0gdHJ1ZSB9ID0gb3B0aW9ucztcclxuXHRcdGNvbnN0IG1vZGUgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5tYW51YWxPcGVuTW9kZTtcclxuXHRcdFxyXG5cdFx0XHJcblx0XHQvLyBVc2UgdGhlIG5ldyBtZXRob2Qgd2l0aCBtYW51YWwgbW9kZVxyXG5cdFx0cmV0dXJuIHRoaXMub3BlbkhvbWVCYXNlV2l0aE1vZGUobW9kZSwgcnVuQ29tbWFuZCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBPcGVuIGhvbWUgYmFzZSBpbiBhbiBlbXB0eSBsZWFmIChmb3IgbmV3IHRhYiByZXBsYWNlbWVudClcclxuXHQgKi9cclxuXHRhc3luYyBvcGVuSW5MZWFmKGxlYWY6IFdvcmtzcGFjZUxlYWYpOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdGNvbnN0IGhvbWVCYXNlU2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5nZXRIb21lQmFzZVNldHRpbmdzKCk7XHJcblx0XHRyZXR1cm4gdGhpcy5vcGVuSW5MZWFmV2l0aFNldHRpbmdzKGxlYWYsIGhvbWVCYXNlU2V0dGluZ3MpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogT3BlbiBhIGZpbGUgaW4gYW4gZW1wdHkgbGVhZiB3aXRoIGN1c3RvbSBzZXR0aW5nc1xyXG5cdCAqIEBwYXJhbSBsZWFmIFRoZSBsZWFmIHRvIG9wZW4gdGhlIGZpbGUgaW5cclxuXHQgKiBAcGFyYW0gc2V0dGluZ3MgU2V0dGluZ3Mgb2JqZWN0IHdpdGggdHlwZSBhbmQgdmFsdWVcclxuXHQgKiBAcGFyYW0gaXNOZXdUYWIgV2hldGhlciB0aGlzIGlzIGZvciBuZXcgdGFiIHJlcGxhY2VtZW50IChza2lwcyBwaW5uaW5nL2dob3N0IHRhYiBsb2dpYylcclxuXHQgKi9cclxuXHRhc3luYyBvcGVuSW5MZWFmV2l0aFNldHRpbmdzKGxlYWY6IFdvcmtzcGFjZUxlYWYsIHNldHRpbmdzOiB7IHR5cGU6IEhvbWVCYXNlVHlwZTsgdmFsdWU6IHN0cmluZyB9LCBpc05ld1RhYjogYm9vbGVhbiA9IGZhbHNlKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHQvLyBIYW5kbGUgbm9uLWZpbGUgdHlwZXNcclxuXHRcdGlmIChzZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuV29ya3NwYWNlKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMub3BlbldvcmtzcGFjZShzZXR0aW5ncy52YWx1ZSk7XHJcblx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0fVxyXG5cdFx0aWYgKHNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5HcmFwaCkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLm9wZW5HcmFwaCgpO1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHRcdGlmIChzZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuTm9uZSkge1xyXG5cdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gUmVzb2x2ZSB0aGUgYWN0dWFsIGZpbGUgcGF0aCBiYXNlZCBvbiB0eXBlXHJcblx0XHRjb25zdCByZXNvbHZlZFBhdGggPSBhd2FpdCBjb21wdXRlSG9tZUJhc2VQYXRoKFxyXG5cdFx0XHRzZXR0aW5ncy50eXBlLFxyXG5cdFx0XHRzZXR0aW5ncy52YWx1ZSxcclxuXHRcdFx0dGhpcy5wbHVnaW5cclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdGlmICghcmVzb2x2ZWRQYXRoKSB7XHJcblx0XHRcdC8vIExvZyB3YXJuaW5nIGZvciBkZWJ1Z2dpbmcgLSBmaWxlIHBhdGggY291bGRuJ3QgYmUgcmVzb2x2ZWRcclxuXHRcdFx0Y29uc29sZS53YXJuKCdbSG9tZSBCYXNlXSBDb3VsZCBub3QgcmVzb2x2ZSBwYXRoIGZvciBuZXcgdGFiOicsIHNldHRpbmdzLnR5cGUsIHNldHRpbmdzLnZhbHVlKTtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEdldCB0aGUgZmlsZSAtIHVzZSBtZXRhZGF0YUNhY2hlIGZvciBiZXR0ZXIgcGF0aCByZXNvbHV0aW9uIChsaWtlIGhvbWVwYWdlIHBsdWdpbilcclxuXHRcdC8vIFRoaXMgaXMgZXNwZWNpYWxseSBpbXBvcnRhbnQgZm9yIHBlcmlvZGljIG5vdGVzIHdoaWNoIG1heSBoYXZlIGJlZW4ganVzdCBjcmVhdGVkXHJcblx0XHRsZXQgZmlsZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QocmVzb2x2ZWRQYXRoLCAnLycpO1xyXG5cdFx0XHJcblx0XHQvLyBJZiBub3QgZm91bmQsIHRyeSBnZXRGaWxlQnlQYXRoIGFzIGZhbGxiYWNrXHJcblx0XHRpZiAoIWZpbGUpIHtcclxuXHRcdFx0ZmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5hcHAsIHJlc29sdmVkUGF0aCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIEZvciBwZXJpb2RpYyBub3RlcywgdGhlIHBhdGggbWlnaHQgYmUgdHJpbW1lZCAobm8gZXh0ZW5zaW9uKVxyXG5cdFx0Ly8gVHJ5IHdpdGggLm1kIGV4dGVuc2lvbiBpZiBzdGlsbCBub3QgZm91bmRcclxuXHRcdGlmICghZmlsZSAmJiAhcmVzb2x2ZWRQYXRoLmVuZHNXaXRoKCcubWQnKSAmJiAhcmVzb2x2ZWRQYXRoLmVuZHNXaXRoKCcuY2FudmFzJykgJiYgIXJlc29sdmVkUGF0aC5lbmRzV2l0aCgnLmJhc2UnKSkge1xyXG5cdFx0XHRjb25zdCB1bnRyaW1tZWRQYXRoID0gYCR7cmVzb2x2ZWRQYXRofS5tZGA7XHJcblx0XHRcdGZpbGUgPSBnZXRGaWxlQnlQYXRoKHRoaXMuYXBwLCB1bnRyaW1tZWRQYXRoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKCFmaWxlKSB7XHJcblx0XHRcdC8vIExvZyB3YXJuaW5nIGZvciBkZWJ1Z2dpbmcgLSBmaWxlIG5vdCBmb3VuZFxyXG5cdFx0XHRjb25zb2xlLndhcm4oJ1tIb21lIEJhc2VdIEZpbGUgbm90IGZvdW5kIGZvciBuZXcgdGFiOicsIHJlc29sdmVkUGF0aCk7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBGb3IgbmV3IHRhYiByZXBsYWNlbWVudDoganVzdCBvcGVuIHRoZSBmaWxlLCBubyBwaW5uaW5nLCBubyBnaG9zdCB0YWIgbG9naWNcclxuXHRcdC8vIE11bHRpcGxlIHRhYnMgd2l0aCB0aGUgc2FtZSBmaWxlIGFyZSBmaW5lXHJcblx0XHQvLyBDUklUSUNBTDogV2hlbiBpc05ld1RhYj10cnVlLCBjb21wbGV0ZWx5IGJ5cGFzcyBBTEwgZ2hvc3QgdGFiIGxvZ2ljXHJcblx0XHRpZiAoaXNOZXdUYWIpIHtcclxuXHRcdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gb3BlbkluTGVhZldpdGhTZXR0aW5nczogaXNOZXdUYWI9dHJ1ZSwgYnlwYXNzaW5nIGdob3N0IHRhYiBsb2dpYycsIHtcclxuXHRcdFx0XHRmaWxlOiBmaWxlLnBhdGgsXHJcblx0XHRcdFx0c2V0dGluZ3M6IHNldHRpbmdzXHJcblx0XHRcdH0pO1xyXG5cdFx0XHRhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xyXG5cdFx0XHRhd2FpdCB0aGlzLmNvbmZpZ3VyZVZpZXcobGVhZiwgZmlsZSk7XHJcblx0XHRcdHRoaXMucnVuQ29tbWFuZE9uT3BlbigpO1xyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBGb3IgaG9tZSBiYXNlOiB1c2UgZ2hvc3QgdGFiL3Bpbm5pbmcgbG9naWMgKGV4aXN0aW5nIGJlaGF2aW9yKVxyXG5cdFx0Ly8gSWYgc3RpY2t5IGljb24gaXMgZW5hYmxlZCBBTkQgdGhpcyBpcyBhIHRydWx5IGVtcHR5IHRhYiAobm90IGEgZmlsZSBvcGVuZWQgZnJvbSBleHBsb3JlciksXHJcblx0XHQvLyBjaGVjayBpZiB0aGVyZSdzIGEgZ2hvc3QgdGFiIGFuZCBtZXJnZSB3aXRoIGl0LlxyXG5cdFx0Ly8gVGhpcyBlbnN1cmVzIHRoYXQgd2hlbiB5b3UgY2xvc2UgdGhlIGxhc3QgdGFiIGFuZCBPYnNpZGlhbiBjcmVhdGVzIGEgbmV3IGVtcHR5IG9uZSxcclxuXHRcdC8vIGl0IG1lcmdlcyB3aXRoIHRoZSBnaG9zdCB0YWIgaW5zdGVhZCBvZiBjcmVhdGluZyBhIGR1cGxpY2F0ZS5cclxuXHRcdC8vIEJVVDogSWYgdGhlIHVzZXIgbWFudWFsbHkgb3BlbmVkIGEgZmlsZSBmcm9tIGV4cGxvcmVyLCB3ZSBzaG91bGQgTk9UIG1lcmdlIC0gbGV0IHRoZW0gaGF2ZSB0aGVpciB0YWIuXHJcblx0XHRjb25zdCBpc1RydWx5RW1wdHkgPSAhbGVhZi52aWV3IHx8IGxlYWYudmlldy5nZXRWaWV3VHlwZSgpID09PSAnZW1wdHknO1xyXG5cdFx0XHJcblx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uICYmIGlzVHJ1bHlFbXB0eSkge1xyXG5cdFx0XHQvLyBSYW5kb20gdHlwZXMgYW5kIHBlcmlvZGljIG5vdGVzOiBkb24ndCBwaW4sIGJ1dCBjYW4gc3RpbGwgbWVyZ2VcclxuXHRcdFx0Y29uc3QgaXNSYW5kb20gPSBzZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tIHx8IFxyXG5cdFx0XHQgICAgICAgICAgICAgICAgIHNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5SYW5kb21Gb2xkZXIgfHxcclxuXHRcdFx0ICAgICAgICAgICAgICAgICBzZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuRGFpbHlOb3RlIHx8XHJcblx0XHRcdCAgICAgICAgICAgICAgICAgc2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLldlZWtseU5vdGUgfHxcclxuXHRcdFx0ICAgICAgICAgICAgICAgICBzZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuTW9udGhseU5vdGUgfHxcclxuXHRcdFx0ICAgICAgICAgICAgICAgICBzZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuWWVhcmx5Tm90ZTtcclxuXHRcdFx0Y29uc3QgZ2hvc3RUYWIgPSB0aGlzLmZpbmRHaG9zdFRhYihmaWxlLCBpc1JhbmRvbSk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoZ2hvc3RUYWIpIHtcclxuXHRcdFx0XHQvLyBDbG9zZSB0aGUgbmV3IGVtcHR5IGxlYWYgc2luY2Ugd2UncmUgbWVyZ2luZyB3aXRoIGdob3N0IHRhYlxyXG5cdFx0XHRcdHZvaWQgbGVhZi5kZXRhY2goKTtcclxuXHRcdFx0XHRcclxuXHRcdFx0XHQvLyBGb2N1cyB0aGUgZ2hvc3QgdGFiIGFuZCBjb25maWd1cmUgaXRcclxuXHRcdFx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihnaG9zdFRhYik7XHJcblx0XHRcdFx0YXdhaXQgdGhpcy5jb25maWd1cmVWaWV3KGdob3N0VGFiLCBmaWxlKTtcclxuXHRcdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0Ly8gTm8gZ2hvc3QgdGFiIGZvdW5kLCBidXQgc3RpY2t5IGljb24gaXMgZW5hYmxlZCAtIHRoaXMgdGFiIHNob3VsZCBiZWNvbWUgdGhlIGdob3N0IHRhYlxyXG5cdFx0XHQvLyBQaW4gaXQgc28gaXQncyByZWNvZ25pemVkIGFzIHRoZSBnaG9zdCB0YWJcclxuXHRcdFx0aWYgKCFpc1JhbmRvbSkge1xyXG5cdFx0XHRcdGxlYWYuc2V0UGlubmVkKHRydWUpO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblx0XHRhd2FpdCBsZWFmLm9wZW5GaWxlKGZpbGUpO1xyXG5cdFx0YXdhaXQgdGhpcy5jb25maWd1cmVWaWV3KGxlYWYsIGZpbGUpO1xyXG5cdFx0XHJcblx0XHQvLyBSdW4gY29tbWFuZCBpZiBjb25maWd1cmVkXHJcblx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIExhc3QgdmlldyByZWZlcmVuY2UgZm9yIHJldmVydFZpZXcgZnVuY3Rpb25hbGl0eVxyXG5cdCAqL1xyXG5cdHByaXZhdGUgbGFzdFZpZXc6IFdlYWtSZWY8TWFya2Rvd25WaWV3PiB8IHVuZGVmaW5lZDtcclxuXHJcblx0LyoqXHJcblx0ICogQ29uZmlndXJlIHRoZSB2aWV3IG1vZGUgZm9yIGEgbGVhZlxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXN5bmMgY29uZmlndXJlVmlldyhsZWFmOiBXb3Jrc3BhY2VMZWFmLCBmaWxlOiBURmlsZSk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcclxuXHRcdGNvbnN0IHZpZXcgPSBsZWFmLnZpZXc7XHJcblxyXG5cdFx0Ly8gT25seSBjb25maWd1cmUgdmlldyBtb2RlIGZvciBtYXJrZG93bi1saWtlIGZpbGVzXHJcblx0XHRpZiAoIWlzTWFya2Rvd25MaWtlKGZpbGUpIHx8ICEodmlldyBpbnN0YW5jZW9mIE1hcmtkb3duVmlldykpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGNvbnN0IHN0YXRlID0gdmlldy5nZXRTdGF0ZSgpO1xyXG5cclxuXHRcdC8vIFRyYWNrIHZpZXcgZm9yIHJldmVydFZpZXcgaWYgZW5hYmxlZFxyXG5cdFx0aWYgKHNldHRpbmdzLnJldmVydFZpZXcpIHtcclxuXHRcdFx0dGhpcy5sYXN0VmlldyA9IG5ldyBXZWFrUmVmKHZpZXcpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEF1dG8tc2Nyb2xsIHRvIGJvdHRvbSBpZiBlbmFibGVkXHJcblx0XHRpZiAoc2V0dGluZ3MuYXV0b1Njcm9sbCkge1xyXG5cdFx0XHRjb25zdCBjb3VudCA9IHZpZXcuZWRpdG9yLmxpbmVDb3VudCgpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHN0YXRlLm1vZGUgPT09ICdwcmV2aWV3Jykge1xyXG5cdFx0XHRcdHZpZXcucHJldmlld01vZGUuYXBwbHlTY3JvbGwoY291bnQgLSA0KTtcclxuXHRcdFx0fSBlbHNlIHtcclxuXHRcdFx0XHR2aWV3LmVkaXRvci5zZXRDdXJzb3IoY291bnQpO1xyXG5cdFx0XHRcdHZpZXcuZWRpdG9yLmZvY3VzKCk7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBTZXQgdmlldyBtb2RlXHJcblx0XHRpZiAoc2V0dGluZ3Mub3BlblZpZXdNb2RlICE9PSAnZGVmYXVsdCcpIHtcclxuXHRcdFx0c3dpdGNoIChzZXR0aW5ncy5vcGVuVmlld01vZGUpIHtcclxuXHRcdFx0XHRjYXNlICdwcmV2aWV3JzpcclxuXHRcdFx0XHRcdHN0YXRlLm1vZGUgPSAncHJldmlldyc7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRjYXNlICdzb3VyY2UnOlxyXG5cdFx0XHRcdFx0c3RhdGUubW9kZSA9ICdzb3VyY2UnO1xyXG5cdFx0XHRcdFx0c3RhdGUuc291cmNlID0gdHJ1ZTtcclxuXHRcdFx0XHRcdGJyZWFrO1xyXG5cdFx0XHRcdGNhc2UgJ2xpdmUnOlxyXG5cdFx0XHRcdFx0c3RhdGUubW9kZSA9ICdzb3VyY2UnO1xyXG5cdFx0XHRcdFx0c3RhdGUuc291cmNlID0gZmFsc2U7XHJcblx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0YXdhaXQgbGVhZi5zZXRWaWV3U3RhdGUoe1xyXG5cdFx0XHRcdHR5cGU6ICdtYXJrZG93bicsXHJcblx0XHRcdFx0c3RhdGU6IHN0YXRlLFxyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFJldmVydCB2aWV3IHRvIGRlZmF1bHQgd2hlbiBuYXZpZ2F0aW5nIGF3YXkgZnJvbSBob21lIGJhc2VcclxuXHQgKi9cclxuXHRhc3luYyByZXZlcnRWaWV3KCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcclxuXHRcdGlmICghc2V0dGluZ3MucmV2ZXJ0VmlldyB8fCAhdGhpcy5sYXN0VmlldyB8fCBzZXR0aW5ncy5vcGVuVmlld01vZGUgPT09ICdkZWZhdWx0Jykge1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgdmlldyA9IHRoaXMubGFzdFZpZXcuZGVyZWYoKTtcclxuXHRcdGlmICghdmlldykge1xyXG5cdFx0XHR0aGlzLmxhc3RWaWV3ID0gdW5kZWZpbmVkO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc3QgaG9tZUJhc2VTZXR0aW5ncyA9IHRoaXMucGx1Z2luLmdldEhvbWVCYXNlU2V0dGluZ3MoKTtcclxuXHRcdGNvbnN0IHJlc29sdmVkUGF0aCA9IGF3YWl0IGNvbXB1dGVIb21lQmFzZVBhdGgoXHJcblx0XHRcdGhvbWVCYXNlU2V0dGluZ3MudHlwZSxcclxuXHRcdFx0aG9tZUJhc2VTZXR0aW5ncy52YWx1ZSxcclxuXHRcdFx0dGhpcy5wbHVnaW5cclxuXHRcdCk7XHJcblxyXG5cdFx0aWYgKCFyZXNvbHZlZFBhdGgpIHtcclxuXHRcdFx0dGhpcy5sYXN0VmlldyA9IHVuZGVmaW5lZDtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIHdlJ3JlIHN0aWxsIG9uIHRoZSBob21lIGJhc2UgZmlsZVxyXG5cdFx0Y29uc3QgY3VycmVudEZpbGUgPSB2aWV3LmZpbGU7XHJcblx0XHRpZiAoY3VycmVudEZpbGUgJiYgZXF1YWxzQ2FzZWxlc3ModHJpbUZpbGUoY3VycmVudEZpbGUpLCByZXNvbHZlZFBhdGgpKSB7XHJcblx0XHRcdHJldHVybjsgLy8gU3RpbGwgb24gaG9tZSBiYXNlLCBkb24ndCByZXZlcnRcclxuXHRcdH1cclxuXHJcblx0XHQvLyBSZXZlcnQgdG8gZGVmYXVsdCB2aWV3XHJcblx0XHRjb25zdCBzdGF0ZSA9IHZpZXcuZ2V0U3RhdGUoKTtcclxuXHRcdCBcclxuXHRcdGNvbnN0IGNvbmZpZyA9ICh0aGlzLmFwcC52YXVsdCBhcyB1bmtub3duIGFzIHsgY29uZmlnPzogeyBkZWZhdWx0Vmlld01vZGU/OiBzdHJpbmc7IGxpdmVQcmV2aWV3PzogYm9vbGVhbiB9IH0pLmNvbmZpZztcclxuXHRcdGNvbnN0IG1vZGUgPSBjb25maWc/LmRlZmF1bHRWaWV3TW9kZSB8fCAnc291cmNlJztcclxuXHRcdGNvbnN0IHNvdXJjZSA9IGNvbmZpZz8ubGl2ZVByZXZpZXcgIT09IHVuZGVmaW5lZCA/ICFjb25maWcubGl2ZVByZXZpZXcgOiBmYWxzZTtcclxuXHJcblx0XHRpZiAoXHJcblx0XHRcdHZpZXcubGVhZi5nZXRWaWV3U3RhdGUoKS50eXBlID09PSAnbWFya2Rvd24nICYmXHJcblx0XHRcdChtb2RlICE9PSBzdGF0ZS5tb2RlIHx8IHNvdXJjZSAhPT0gc3RhdGUuc291cmNlKVxyXG5cdFx0KSB7XHJcblx0XHRcdHN0YXRlLm1vZGUgPSBtb2RlO1xyXG5cdFx0XHRzdGF0ZS5zb3VyY2UgPSBzb3VyY2U7XHJcblx0XHRcdGF3YWl0IHZpZXcubGVhZi5zZXRWaWV3U3RhdGUoeyB0eXBlOiAnbWFya2Rvd24nLCBzdGF0ZSwgYWN0aXZlOiB0cnVlIH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMubGFzdFZpZXcgPSB1bmRlZmluZWQ7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSdW4gdGhlIGNvbmZpZ3VyZWQgY29tbWFuZCBhZnRlciBvcGVuaW5nXHJcblx0ICovXHJcblx0cHJpdmF0ZSBydW5Db21tYW5kT25PcGVuKCk6IHZvaWQge1xyXG5cdFx0Y29uc3QgY29tbWFuZElkID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuY29tbWFuZE9uT3BlbjtcclxuXHRcdGlmIChjb21tYW5kSWQpIHtcclxuXHRcdFx0Ly8gU21hbGwgZGVsYXkgdG8gZW5zdXJlIHRoZSB2aWV3IGlzIHJlYWR5XHJcblx0XHRcdHNldFRpbWVvdXQoKCkgPT4ge1xyXG5cdFx0XHRcdGV4ZWN1dGVDb21tYW5kKHRoaXMuYXBwLCBjb21tYW5kSWQpO1xyXG5cdFx0XHR9LCAxMDApO1xyXG5cdFx0fVxyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogRmluZCBhbiBleGlzdGluZyBsZWFmIHRoYXQgaGFzIHRoZSBob21lIGJhc2UgZmlsZSBvcGVuXHJcblx0ICovXHJcblx0ZmluZEV4aXN0aW5nSG9tZUJhc2VMZWFmKGZpbGU/OiBURmlsZSk6IFdvcmtzcGFjZUxlYWYgfCBudWxsIHtcclxuXHRcdGlmICghZmlsZSkgcmV0dXJuIG51bGw7XHJcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSBmaWxlLnBhdGg7XHJcblxyXG5cdFx0Y29uc3QgbGVhdmVzID0gTEVBRl9UWVBFUy5mbGF0TWFwKHR5cGUgPT4gXHJcblx0XHRcdHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWF2ZXNPZlR5cGUodHlwZSlcclxuXHRcdCk7XHJcblxyXG5cdFx0Zm9yIChjb25zdCBsZWFmIG9mIGxlYXZlcykge1xyXG5cdFx0XHRpZiAobGVhZkhhc0ZpbGUobGVhZiwgaG9tZUJhc2VQYXRoKSkge1xyXG5cdFx0XHRcdHJldHVybiBsZWFmO1xyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0cmV0dXJuIG51bGw7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGaW5kIHRoZSBnaG9zdCB0YWIgKHRoZSBvbmUgb3BlbmVkIHZpYSBzdGlja3kgaWNvbilcclxuXHQgKiBHaG9zdCB0YWIgaXMgaWRlbnRpZmllZCBieSBiZWluZyBwaW5uZWQgYW5kIGhhdmluZyB0aGUgaG9tZSBiYXNlIGZpbGVcclxuXHQgKiBPbmx5IHNlYXJjaGVzIGluIHRoZSBjdXJyZW50IHdpbmRvdyAoZ2V0TGVhdmVzT2ZUeXBlIGlzIHdpbmRvdy1zY29wZWQpXHJcblx0ICogXHJcblx0ICogTm90ZTogSWYgdGhlIGdob3N0IHRhYiBpcyBtb3ZlZCB0byBhbm90aGVyIHdpbmRvdywgdGhpcyB3aWxsIHJldHVybiBudWxsLFxyXG5cdCAqIGFuZCBhIG5ldyBnaG9zdCB0YWIgd2lsbCBiZSBjcmVhdGVkIGluIHRoZSBjdXJyZW50IHdpbmRvdyB3aGVuIG5lZWRlZC5cclxuXHQgKiBUaGlzIGlzIHRoZSBkZXNpcmVkIGJlaGF2aW9yIC0gZWFjaCB3aW5kb3cgY2FuIGhhdmUgaXRzIG93biBnaG9zdCB0YWIuXHJcblx0ICogXHJcblx0ICogRm9yIHJhbmRvbSB0eXBlcywgd2UgZG9uJ3QgbG9vayBmb3IgcGlubmVkIHRhYnMgKHRoZXkncmUgbm90IHBpbm5lZCkuXHJcblx0ICovXHJcblx0ZmluZEdob3N0VGFiKGZpbGU/OiBURmlsZSwgaXNSYW5kb206IGJvb2xlYW4gPSBmYWxzZSk6IFdvcmtzcGFjZUxlYWYgfCBudWxsIHtcclxuXHRcdGlmICghZmlsZSkge1xyXG5cdFx0XHRjb25zb2xlLmRlYnVnKCdbSG9tZSBCYXNlXSBmaW5kR2hvc3RUYWI6IE5vIGZpbGUgcHJvdmlkZWQnKTtcclxuXHRcdFx0cmV0dXJuIG51bGw7XHJcblx0XHR9XHJcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSBmaWxlLnBhdGg7XHJcblxyXG5cdFx0Ly8gVXNlIGl0ZXJhdGVBbGxMZWF2ZXMgaW5zdGVhZCBvZiBnZXRMZWF2ZXNPZlR5cGUgdG8gZmluZCB0YWJzIGV2ZW4gd2hlbiBoaWRkZW4gKHplbiBtb2RlLCBldGMuKVxyXG5cdFx0Ly8gZ2V0TGVhdmVzT2ZUeXBlIG1pZ2h0IG5vdCB3b3JrIHByb3Blcmx5IHdoZW4gdGFicyBhcmUgaGlkZGVuXHJcblx0XHRjb25zdCBsZWF2ZXM6IFdvcmtzcGFjZUxlYWZbXSA9IFtdO1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0Y29uc3Qgdmlld1R5cGUgPSBsZWFmLnZpZXc/LmdldFZpZXdUeXBlKCk7XHJcblx0XHRcdGlmICh2aWV3VHlwZSAmJiAoTEVBRl9UWVBFUyBhcyByZWFkb25seSBzdHJpbmdbXSkuaW5jbHVkZXModmlld1R5cGUpKSB7XHJcblx0XHRcdFx0bGVhdmVzLnB1c2gobGVhZik7XHJcblx0XHRcdH1cclxuXHRcdH0pO1xyXG5cclxuXHRcdGNvbnNvbGUuZGVidWcoJ1tIb21lIEJhc2VdIGZpbmRHaG9zdFRhYjonLCB7XHJcblx0XHRcdGhvbWVCYXNlUGF0aDogaG9tZUJhc2VQYXRoLFxyXG5cdFx0XHR0b3RhbExlYXZlczogbGVhdmVzLmxlbmd0aCxcclxuXHRcdFx0aXNSYW5kb206IGlzUmFuZG9tXHJcblx0XHR9KTtcclxuXHJcblx0XHRmb3IgKGNvbnN0IGxlYWYgb2YgbGVhdmVzKSB7XHJcblx0XHRcdGlmIChsZWFmSGFzRmlsZShsZWFmLCBob21lQmFzZVBhdGgpKSB7XHJcblx0XHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcclxuXHRcdFx0XHRjb25zdCBpc1Bpbm5lZCA9IHZpZXdTdGF0ZS5waW5uZWQgPT09IHRydWU7XHJcblx0XHRcdFx0Ly8gR2hvc3QgdGFiIGlzIHBpbm5lZCAodW5sZXNzIGl0J3MgcmFuZG9tKVxyXG5cdFx0XHRcdGlmIChpc1JhbmRvbSB8fCBpc1Bpbm5lZCkge1xyXG5cdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gZmluZEdob3N0VGFiOiBGb3VuZCBnaG9zdCB0YWI6Jywge1xyXG5cdFx0XHRcdFx0XHRsZWFmOiBsZWFmLFxyXG5cdFx0XHRcdFx0XHRpc1Bpbm5lZDogaXNQaW5uZWQsXHJcblx0XHRcdFx0XHRcdGlzUmFuZG9tOiBpc1JhbmRvbSxcclxuXHRcdFx0XHRcdFx0dmlld1R5cGU6IGxlYWYudmlldz8uZ2V0Vmlld1R5cGUoKVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0XHRyZXR1cm4gbGVhZjtcclxuXHRcdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gZmluZEdob3N0VGFiOiBGb3VuZCBob21lIGJhc2UgdGFiIGJ1dCBub3QgcGlubmVkOicsIHtcclxuXHRcdFx0XHRcdFx0aXNQaW5uZWQ6IGlzUGlubmVkLFxyXG5cdFx0XHRcdFx0XHR2aWV3U3RhdGU6IHZpZXdTdGF0ZVxyXG5cdFx0XHRcdFx0fSk7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9XHJcblx0XHR9XHJcblxyXG5cdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gZmluZEdob3N0VGFiOiBObyBnaG9zdCB0YWIgZm91bmQnKTtcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogT3BlbiBob21lIGJhc2UgaW4gZ2hvc3QgdGFiIChmb3Igc3RpY2t5IGljb24pXHJcblx0ICogR2hvc3QgdGFiIGlzIHBpbm5lZCBhbmQgaGlkZGVuIChpZiBzZXR0aW5nIGVuYWJsZWQpXHJcblx0ICogT25seSBvbmUgZ2hvc3QgdGFiIHNob3VsZCBleGlzdCBhdCBhIHRpbWVcclxuXHQgKiBXb3JrcyBmb3IgZmlsZS1iYXNlZCB0eXBlcyBhbmQgR3JhcGggdmlld1xyXG5cdCAqIE5vdGU6IFJhbmRvbSB0eXBlcyBkb24ndCBwaW4gKHNpbmNlIGZpbGUgY2hhbmdlcyBlYWNoIHRpbWUpXHJcblx0ICogTm90ZTogV29ya3NwYWNlIGFuZCBOb25lIGRvbid0IHdvcmsgKHdvcmtzcGFjZSBjaGFuZ2VzIGxheW91dCwgTm9uZSBkb2Vzbid0IG9wZW4gYW55dGhpbmcpXHJcblx0ICovXHJcblx0YXN5bmMgb3BlbkhvbWVCYXNlSW5HaG9zdFRhYihvcHRpb25zOiB7XHJcblx0XHRydW5Db21tYW5kPzogYm9vbGVhbjtcclxuXHR9ID0ge30pOiBQcm9taXNlPGJvb2xlYW4+IHtcclxuXHRcdGNvbnN0IHsgcnVuQ29tbWFuZCA9IHRydWUgfSA9IG9wdGlvbnM7XHJcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cdFx0XHJcblx0XHQvLyBXb3Jrc3BhY2UgYW5kIE5vbmUgZG9uJ3Qgd29yayB3aXRoIGdob3N0IHRhYlxyXG5cdFx0aWYgKGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLldvcmtzcGFjZSB8fCBcclxuXHRcdCAgICBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5Ob25lKSB7XHJcblx0XHRcdC8vIEZvciB0aGVzZSB0eXBlcywganVzdCB1c2Ugbm9ybWFsIG9wZW5cclxuXHRcdFx0cmV0dXJuIHRoaXMub3BlbkhvbWVCYXNlV2l0aE1vZGUoJ3JldGFpbicsIHJ1bkNvbW1hbmQpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEdyYXBoIHZpZXc6IGRvbid0IHVzZSBnaG9zdCB0YWIgKGZpbmRpbmcgaXQgaXMgdW5yZWxpYWJsZSlcclxuXHRcdC8vIEp1c3Qgb3BlbiBpdCBub3JtYWxseSBsaWtlIHJhbmRvbSBmaWxlc1xyXG5cdFx0aWYgKGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLkdyYXBoKSB7XHJcblx0XHRcdHJldHVybiB0aGlzLm9wZW5HcmFwaCgpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFJhbmRvbSB0eXBlcyBhbmQgcGVyaW9kaWMgbm90ZXM6IGRvbid0IHBpbiAoZmlsZSBjaGFuZ2VzIGVhY2ggdGltZSlcclxuXHRcdC8vIEJ1dCBzdGlsbCBhbGxvdyBtZXJnaW5nIHdpdGggZXhpc3RpbmcgdGFicyBpZiBzdGlja3kgaWNvbiBpcyBlbmFibGVkXHJcblx0XHRjb25zdCBpc1JhbmRvbSA9IGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLlJhbmRvbSB8fCBcclxuXHRcdCAgICAgICAgICAgICAgICAgaG9tZUJhc2VTZXR0aW5ncy50eXBlID09PSBIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLkRhaWx5Tm90ZSB8fFxyXG5cdFx0ICAgICAgICAgICAgICAgICBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5XZWVrbHlOb3RlIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLk1vbnRobHlOb3RlIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgIGhvbWVCYXNlU2V0dGluZ3MudHlwZSA9PT0gSG9tZUJhc2VUeXBlLlllYXJseU5vdGU7XHJcblxyXG5cdFx0Ly8gQ2hlY2sgaWYgc2V0dGluZ3MgbW9kYWwgaXMgb3BlblxyXG5cdFx0aWYgKHRoaXMuaXNTZXR0aW5nc01vZGFsT3BlbigpKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBSZXNvbHZlIHRoZSBhY3R1YWwgZmlsZSBwYXRoIGJhc2VkIG9uIHR5cGVcclxuXHRcdGNvbnN0IHJlc29sdmVkUGF0aCA9IGF3YWl0IGNvbXB1dGVIb21lQmFzZVBhdGgoXHJcblx0XHRcdGhvbWVCYXNlU2V0dGluZ3MudHlwZSxcclxuXHRcdFx0aG9tZUJhc2VTZXR0aW5ncy52YWx1ZSxcclxuXHRcdFx0dGhpcy5wbHVnaW5cclxuXHRcdCk7XHJcblx0XHRcclxuXHRcdGlmICghcmVzb2x2ZWRQYXRoKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBHZXQgdGhlIGhvbWUgYmFzZSBmaWxlIC0gdXNlIG1ldGFkYXRhQ2FjaGUgZm9yIGJldHRlciBwYXRoIHJlc29sdXRpb24gKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG5cdFx0Ly8gVGhpcyBpcyBlc3BlY2lhbGx5IGltcG9ydGFudCBmb3IgcGVyaW9kaWMgbm90ZXMgd2hpY2ggbWF5IGhhdmUgYmVlbiBqdXN0IGNyZWF0ZWRcclxuXHRcdGxldCBmaWxlID0gdGhpcy5hcHAubWV0YWRhdGFDYWNoZS5nZXRGaXJzdExpbmtwYXRoRGVzdChyZXNvbHZlZFBhdGgsICcvJyk7XHJcblx0XHRcclxuXHRcdC8vIElmIG5vdCBmb3VuZCwgdHJ5IGdldEZpbGVCeVBhdGggYXMgZmFsbGJhY2tcclxuXHRcdGlmICghZmlsZSkge1xyXG5cdFx0XHRmaWxlID0gZ2V0RmlsZUJ5UGF0aCh0aGlzLmFwcCwgcmVzb2x2ZWRQYXRoKTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gRm9yIHBlcmlvZGljIG5vdGVzLCB0aGUgcGF0aCBtaWdodCBiZSB0cmltbWVkIChubyBleHRlbnNpb24pXHJcblx0XHQvLyBUcnkgd2l0aCAubWQgZXh0ZW5zaW9uIGlmIHN0aWxsIG5vdCBmb3VuZFxyXG5cdFx0aWYgKCFmaWxlICYmICFyZXNvbHZlZFBhdGguZW5kc1dpdGgoJy5tZCcpICYmICFyZXNvbHZlZFBhdGguZW5kc1dpdGgoJy5jYW52YXMnKSAmJiAhcmVzb2x2ZWRQYXRoLmVuZHNXaXRoKCcuYmFzZScpKSB7XHJcblx0XHRcdGNvbnN0IHVudHJpbW1lZFBhdGggPSBgJHtyZXNvbHZlZFBhdGh9Lm1kYDtcclxuXHRcdFx0ZmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5hcHAsIHVudHJpbW1lZFBhdGgpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZiAoIWZpbGUpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGlmIGdob3N0IHRhYiBhbHJlYWR5IGV4aXN0c1xyXG5cdFx0Y29uc3QgZ2hvc3RUYWIgPSB0aGlzLmZpbmRHaG9zdFRhYihmaWxlLCBpc1JhbmRvbSk7XHJcblx0XHRcclxuXHRcdGNvbnNvbGUuZGVidWcoJ1tIb21lIEJhc2VdIG9wZW5Ib21lQmFzZUluR2hvc3RUYWI6Jywge1xyXG5cdFx0XHRmaWxlOiBmaWxlLnBhdGgsXHJcblx0XHRcdGdob3N0VGFiRm91bmQ6ICEhZ2hvc3RUYWIsXHJcblx0XHRcdGlzUmFuZG9tOiBpc1JhbmRvbSxcclxuXHRcdFx0emVuTW9kZTogZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QuY29udGFpbnMoJ3plbm1vZGUtYWN0aXZlJylcclxuXHRcdH0pO1xyXG5cdFx0XHJcblx0XHRpZiAoZ2hvc3RUYWIpIHtcclxuXHRcdFx0Ly8gR2hvc3QgdGFiIGV4aXN0cyAtIGp1c3QganVtcCB0byBpdCwgZG9uJ3QgY2xvc2Ugb3RoZXIgdGFic1xyXG5cdFx0XHQvLyBVc2VyIGNhbiBoYXZlIG11bHRpcGxlIGhvbWUgYmFzZSB0YWJzIG9wZW4sIGJ1dCBjbGlja2luZyBzdGlja3kgaWNvbiBqdW1wcyB0byB0aGUgXCJvY2N1cGllZFwiIG9uZVxyXG5cdFx0XHRjb25zdCBzaG91bGRGb2N1cyA9ICF0aGlzLmlzU2V0dGluZ3NNb2RhbE9wZW4oKTtcclxuXHRcdFx0dGhpcy5hcHAud29ya3NwYWNlLnNldEFjdGl2ZUxlYWYoZ2hvc3RUYWIsIHsgZm9jdXM6IHNob3VsZEZvY3VzIH0pO1xyXG5cdFx0XHRhd2FpdCB0aGlzLmNvbmZpZ3VyZVZpZXcoZ2hvc3RUYWIsIGZpbGUpO1xyXG5cdFx0XHRcclxuXHRcdFx0aWYgKHJ1bkNvbW1hbmQpIHtcclxuXHRcdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdFx0fVxyXG5cdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdH1cclxuXHJcblx0XHQvLyBHaG9zdCB0YWIgZG9lc24ndCBleGlzdCAtIGNyZWF0ZSBpdFxyXG5cdFx0Ly8gRG9uJ3QgY2xvc2UgZXhpc3RpbmcgdGFicyAtIHVzZXIgY2FuIGhhdmUgbXVsdGlwbGUgaG9tZSBiYXNlIHRhYnNcclxuXHRcdC8vIFRoZSBmaXJzdCBvbmUgd2UgY3JlYXRlIHdpbGwgXCJvY2N1cHlcIiB0aGUgZ2hvc3QgdGFiIHNsb3QgKGJlIHBpbm5lZCBhbmQgaGlkZGVuKVxyXG5cclxuXHRcdC8vIENyZWF0ZSBuZXcgZ2hvc3QgdGFiXHJcblx0XHRjb25zdCBuZXdHaG9zdFRhYiA9IHRoaXMuYXBwLndvcmtzcGFjZS5nZXRMZWFmKCd0YWInKTtcclxuXHRcdGF3YWl0IG5ld0dob3N0VGFiLm9wZW5GaWxlKGZpbGUpO1xyXG5cdFx0XHJcblx0XHQvLyBQaW4gdGhlIGdob3N0IHRhYiAodW5sZXNzIGl0J3MgcmFuZG9tIC0gZmlsZSBjaGFuZ2VzIGVhY2ggdGltZSlcclxuXHRcdGlmICghaXNSYW5kb20pIHtcclxuXHRcdFx0bmV3R2hvc3RUYWIuc2V0UGlubmVkKHRydWUpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBNYXJrIHRoZSB0YWIgaGVhZGVyIGltbWVkaWF0ZWx5IGFmdGVyIHBpbm5pbmcgKGZvciBhdXRvLWhpZGUgdGFiIGNvdW50aW5nKVxyXG5cdFx0Ly8gVXNlIGEgc21hbGwgZGVsYXkgdG8gZW5zdXJlIHRoZSB0YWIgaGVhZGVyIGV4aXN0c1xyXG5cdFx0c2V0VGltZW91dCgoKSA9PiB7XHJcblx0XHRcdHRoaXMucGx1Z2luLnN0aWNreVRhYlNlcnZpY2UudXBkYXRlVGFiSGVhZGVycygpO1xyXG5cdFx0fSwgNTApO1xyXG5cdFx0XHJcblx0XHQvLyBGb2N1cyBpdFxyXG5cdFx0Y29uc3Qgc2hvdWxkRm9jdXMgPSAhdGhpcy5pc1NldHRpbmdzTW9kYWxPcGVuKCk7XHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2Uuc2V0QWN0aXZlTGVhZihuZXdHaG9zdFRhYiwgeyBmb2N1czogc2hvdWxkRm9jdXMgfSk7XHJcblx0XHRcclxuXHRcdC8vIENvbmZpZ3VyZSB0aGUgdmlld1xyXG5cdFx0YXdhaXQgdGhpcy5jb25maWd1cmVWaWV3KG5ld0dob3N0VGFiLCBmaWxlKTtcclxuXHJcblx0XHQvLyBSdW4gY29tbWFuZCBpZiBjb25maWd1cmVkXHJcblx0XHRpZiAocnVuQ29tbWFuZCkge1xyXG5cdFx0XHR0aGlzLnJ1bkNvbW1hbmRPbk9wZW4oKTtcclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZpbmQgYW4gZW1wdHkgbGVhZlxyXG5cdCAqL1xyXG5cdHByaXZhdGUgZmluZEVtcHR5TGVhZigpOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCB7XHJcblx0XHRjb25zdCBsZWF2ZXMgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGVhdmVzT2ZUeXBlKCdlbXB0eScpO1xyXG5cdFx0cmV0dXJuIGxlYXZlc1swXSB8fCBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogR2V0IHRoZSBob21lIGJhc2UgZmlsZVxyXG5cdCAqL1xyXG5cdGdldEhvbWVCYXNlRmlsZSgpOiBURmlsZSB8IG51bGwge1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcclxuXHRcdGlmICghc2V0dGluZ3MuaG9tZUJhc2VQYXRoKSB7XHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIGdldEZpbGVCeVBhdGgodGhpcy5hcHAsIHNldHRpbmdzLmhvbWVCYXNlUGF0aCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBGYXN0IGRldGFjaCBhbGwgbGVhdmVzIHVzaW5nIGNoYW5nZUxheW91dCAobGlrZSBob21lcGFnZSBwbHVnaW4pXHJcblx0ICogVGhpcyBpcyBtdWNoIGZhc3RlciB0aGFuIGl0ZXJhdGluZyBhbmQgZGV0YWNoaW5nIGxlYXZlcyBpbmRpdmlkdWFsbHlcclxuXHQgKi9cclxuXHRhc3luYyBkZXRhY2hBbGxMZWF2ZXMoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHRjb25zdCBsYXlvdXQgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0TGF5b3V0KCk7XHJcblx0XHRsYXlvdXQubWFpbiA9IHtcclxuXHRcdFx0XCJpZFwiOiBcIjUzMjQzNzMwMTU3MjZiYThcIixcclxuXHRcdFx0XCJ0eXBlXCI6IFwic3BsaXRcIixcclxuXHRcdFx0XCJjaGlsZHJlblwiOiBbeyBcclxuXHRcdFx0XHRcImlkXCI6IFwiNDUwOTcyNGY4YmY4NGRhN1wiLFxyXG5cdFx0XHRcdFwidHlwZVwiOiBcInRhYnNcIixcclxuXHRcdFx0XHRcImNoaWxkcmVuXCI6IFt7XHJcblx0XHRcdFx0XHRcImlkXCI6IFwiZTdhN2IzMDNjNjE3ODZkY1wiLFxyXG5cdFx0XHRcdFx0XCJ0eXBlXCI6IFwibGVhZlwiLFxyXG5cdFx0XHRcdFx0XCJzdGF0ZVwiOiB7XCJ0eXBlXCI6IFwiZW1wdHlcIiwgXCJzdGF0ZVwiOiB7fSwgXCJpY29uXCI6IFwibHVjaWRlLWZpbGVcIiwgXCJ0aXRsZVwiOiBcIk5ldyB0YWJcIn1cclxuXHRcdFx0XHR9XVxyXG5cdFx0XHR9XSxcclxuXHRcdFx0XCJkaXJlY3Rpb25cIjogXCJ2ZXJ0aWNhbFwiXHJcblx0XHR9O1xyXG5cdFx0bGF5b3V0LmFjdGl2ZSA9IFwiZTdhN2IzMDNjNjE3ODZkY1wiO1xyXG5cdFx0YXdhaXQgdGhpcy5hcHAud29ya3NwYWNlLmNoYW5nZUxheW91dChsYXlvdXQpO1xyXG5cdFx0XHJcblx0XHRpZiAoUGxhdGZvcm0uaXNNb2JpbGUpIHtcclxuXHRcdFx0IFxyXG5cdFx0XHQodGhpcy5hcHAud29ya3NwYWNlLnJpZ2h0U3BsaXQgYXMgeyB1cGRhdGVJbmZvPzogKCkgPT4gdm9pZCB9KT8udXBkYXRlSW5mbz8uKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDbG9zZSBhbGwgbGVhdmVzIGluIHRoZSBtYWluIHdvcmtzcGFjZSBleGNlcHQgdGhlIHNwZWNpZmllZCBvbmVcclxuXHQgKiBTaW1wbGlmaWVkIGFwcHJvYWNoOiBpdGVyYXRlIGFsbCBsZWF2ZXMgYW5kIGNsb3NlIHRob3NlIGluIG1haW4gd29ya3NwYWNlXHJcblx0ICovXHJcblx0YXN5bmMgY2xvc2VBbGxMZWF2ZXNFeGNlcHQoZXhjZXB0TGVhZjogV29ya3NwYWNlTGVhZiB8IG51bGwpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdC8vIFVzZSBpdGVyYXRlQWxsTGVhdmVzIHRvIGdldCBBTEwgbGVhdmVzXHJcblx0XHRjb25zdCBsZWF2ZXNUb0Nsb3NlOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcclxuXHRcdFxyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0Ly8gU2tpcCB0aGUgZXhjZXB0aW9uIGxlYWZcclxuXHRcdFx0aWYgKGxlYWYgPT09IGV4Y2VwdExlYWYpIHtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIFRyeSB0byBkZXRlcm1pbmUgaWYgdGhpcyBpcyBhIG1haW4gd29ya3NwYWNlIGxlYWZcclxuXHRcdFx0Ly8gR2V0IHRoZSB2aWV3J3MgY29udGFpbmVyIGVsZW1lbnRcclxuXHRcdFx0Y29uc3QgdmlldyA9IGxlYWYudmlldztcclxuXHRcdFx0bGV0IGNvbnRhaW5lcjogSFRNTEVsZW1lbnQgfCBudWxsID0gbnVsbDtcclxuXHRcdFx0XHJcblx0XHRcdGlmICh2aWV3KSB7XHJcblx0XHRcdFx0Y29uc3Qgdmlld0FueSA9IHZpZXcgYXMgdW5rbm93biBhcyB7IGNvbnRhaW5lckVsPzogSFRNTEVsZW1lbnQgfTtcclxuXHRcdFx0XHRjb250YWluZXIgPSB2aWV3QW55LmNvbnRhaW5lckVsIHx8IG51bGw7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIElmIG5vIGNvbnRhaW5lciBmcm9tIHZpZXcsIHRyeSBsZWFmJ3MgY29udGFpbmVyRWxcclxuXHRcdFx0aWYgKCFjb250YWluZXIpIHtcclxuXHRcdFx0XHRjb25zdCBsZWFmQW55ID0gbGVhZiBhcyB1bmtub3duIGFzIHsgY29udGFpbmVyRWw/OiBIVE1MRWxlbWVudCB9O1xyXG5cdFx0XHRcdGNvbnRhaW5lciA9IGxlYWZBbnkuY29udGFpbmVyRWwgfHwgbnVsbDtcclxuXHRcdFx0fVxyXG5cdFx0XHRcclxuXHRcdFx0aWYgKGNvbnRhaW5lcikge1xyXG5cdFx0XHRcdC8vIENoZWNrIGlmIGl0J3MgaW4gdGhlIG1haW4gd29ya3NwYWNlIChyb290LCBub3Qgc2lkZWJhcilcclxuXHRcdFx0XHRjb25zdCByb290V29ya3NwYWNlID0gY29udGFpbmVyLmNsb3Nlc3QoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXZlcnRpY2FsLm1vZC1yb290Jyk7XHJcblx0XHRcdFx0Y29uc3QgbGVmdFNpZGViYXIgPSBjb250YWluZXIuY2xvc2VzdCgnLndvcmtzcGFjZS1zcGxpdC5tb2QtbGVmdC1zcGxpdCcpO1xyXG5cdFx0XHRcdGNvbnN0IHJpZ2h0U2lkZWJhciA9IGNvbnRhaW5lci5jbG9zZXN0KCcud29ya3NwYWNlLXNwbGl0Lm1vZC1yaWdodC1zcGxpdCcpO1xyXG5cdFx0XHRcdFxyXG5cdFx0XHRcdGlmIChyb290V29ya3NwYWNlICYmICFsZWZ0U2lkZWJhciAmJiAhcmlnaHRTaWRlYmFyKSB7XHJcblx0XHRcdFx0XHRsZWF2ZXNUb0Nsb3NlLnB1c2gobGVhZik7XHJcblx0XHRcdFx0fVxyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdC8vIElmIHdlIGNhbid0IGZpbmQgY29udGFpbmVyLCBzdGlsbCB0cnkgdG8gY2xvc2UgaXQgaWYgaXQncyBpbiBtYWluIHdvcmtzcGFjZVxyXG5cdFx0XHRcdC8vIFRoaXMgaGFuZGxlcyBlZGdlIGNhc2VzIHdoZXJlIGNvbnRhaW5lciBkZXRlY3Rpb24gZmFpbHNcclxuXHRcdFx0XHQvLyBPbmx5IGNsb3NlIGlmIHdlJ3JlIGNsb3NpbmcgZXZlcnl0aGluZyAoZXhjZXB0TGVhZiBpcyBudWxsKVxyXG5cdFx0XHRcdGlmIChleGNlcHRMZWFmID09PSBudWxsKSB7XHJcblx0XHRcdFx0XHQvLyBUcnkgdG8gZ2V0IGxlYWYncyB2aWV3IHN0YXRlIHRvIGNoZWNrIGlmIGl0J3MgYSBtYWluIHdvcmtzcGFjZSB0YWJcclxuXHRcdFx0XHRcdHRyeSB7XHJcblx0XHRcdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRcdFx0XHRcdC8vIElmIGl0IGhhcyBhIHZpZXcgc3RhdGUsIGl0J3MgbGlrZWx5IGEgbWFpbiB3b3Jrc3BhY2UgdGFiXHJcblx0XHRcdFx0XHRcdGlmICh2aWV3U3RhdGUpIHtcclxuXHRcdFx0XHRcdFx0XHRsZWF2ZXNUb0Nsb3NlLnB1c2gobGVhZik7XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdFx0XHQvLyBJZiB3ZSBjYW4ndCBnZXQgdmlldyBzdGF0ZSwgc2tpcCBpdFxyXG5cdFx0XHRcdFx0fVxyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdFxyXG5cdFx0Ly8gQ2xvc2UgYWxsIGlkZW50aWZpZWQgbGVhdmVzXHJcblx0XHRmb3IgKGNvbnN0IGxlYWYgb2YgbGVhdmVzVG9DbG9zZSkge1xyXG5cdFx0XHR2b2lkIGxlYWYuZGV0YWNoKCk7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIFdhaXQgZm9yIGRldGFjaG1lbnRzIHRvIGNvbXBsZXRlXHJcblx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgMjAwKSk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiB0aGUgZm9jdXNlZCB0YWIgaXMgdGhlIGhvbWUgYmFzZVxyXG5cdCAqL1xyXG5cdGlzRm9jdXNlZE9uSG9tZUJhc2UoKTogYm9vbGVhbiB7XHJcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRcdGlmICghYWN0aXZlRmlsZSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdGNvbnN0IGhvbWVCYXNlUGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmhvbWVCYXNlUGF0aDtcclxuXHRcdGlmICghaG9tZUJhc2VQYXRoKSByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0Ly8gR2V0IHRoZSBob21lIGJhc2UgZmlsZSBmb3IgYWNjdXJhdGUgY29tcGFyaXNvblxyXG5cdFx0Y29uc3QgaG9tZUJhc2VGaWxlID0gZ2V0RmlsZUJ5UGF0aCh0aGlzLmFwcCwgaG9tZUJhc2VQYXRoKTtcclxuXHRcdGlmICghaG9tZUJhc2VGaWxlKSByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0cmV0dXJuIGFjdGl2ZUZpbGUucGF0aCA9PT0gaG9tZUJhc2VGaWxlLnBhdGg7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBDaGVjayBpZiBob21lIGJhc2UgZmlsZSBleGlzdHNcclxuXHQgKi9cclxuXHRob21lQmFzZUV4aXN0cygpOiBib29sZWFuIHtcclxuXHRcdGNvbnN0IHBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVBhdGg7XHJcblx0XHRpZiAoIXBhdGgpIHJldHVybiBmYWxzZTtcclxuXHRcdFxyXG5cdFx0cmV0dXJuIGdldEZpbGVCeVBhdGgodGhpcy5hcHAsIHBhdGgpICE9PSBudWxsO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgdGhlIHNldHRpbmdzIG1vZGFsIGlzIGN1cnJlbnRseSBvcGVuXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpc1NldHRpbmdzTW9kYWxPcGVuKCk6IGJvb2xlYW4ge1xyXG5cdFx0Ly8gQ2hlY2sgZm9yIHNldHRpbmdzIG1vZGFsIGJ5IGxvb2tpbmcgZm9yIHRoZSBtb2RhbCBjb250YWluZXJcclxuXHRcdC8vIFRyeSBtdWx0aXBsZSBzZWxlY3RvcnMgdG8gYmUgbW9yZSByb2J1c3RcclxuXHRcdGNvbnN0IHNldHRpbmdzTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGFpbmVyLm1vZC1zZXR0aW5ncycpIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLm1vZC1zZXR0aW5ncycpIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZlcnRpY2FsLXRhYi1jb250ZW50Jyk7XHJcblx0XHRcclxuXHRcdC8vIEFsc28gY2hlY2sgaWYgYW55IG1vZGFsIGlzIG9wZW4gYW5kIGNvbnRhaW5zIHNldHRpbmdzIGNvbnRlbnRcclxuXHRcdGlmICghc2V0dGluZ3NNb2RhbCkge1xyXG5cdFx0XHRjb25zdCBhbGxNb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWwtY29udGFpbmVyJyk7XHJcblx0XHRcdGZvciAoY29uc3QgbW9kYWwgb2YgQXJyYXkuZnJvbShhbGxNb2RhbHMpKSB7XHJcblx0XHRcdFx0aWYgKG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxyXG5cdFx0XHRcdCAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuc2V0dGluZ3MtY29udGVudCcpIHx8XHJcblx0XHRcdFx0ICAgIG1vZGFsLmNsYXNzTGlzdC5jb250YWlucygnbW9kLXNldHRpbmdzJykpIHtcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gc2V0dGluZ3NNb2RhbCAhPT0gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIFNldCB0aGUgYWN0aXZlIGZpbGUgYXMgaG9tZSBiYXNlXHJcblx0ICovXHJcblx0YXN5bmMgc2V0QWN0aXZlRmlsZUFzSG9tZUJhc2UoKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHRjb25zdCBhY3RpdmVGaWxlID0gdGhpcy5hcHAud29ya3NwYWNlLmdldEFjdGl2ZUZpbGUoKTtcclxuXHRcdGlmICghYWN0aXZlRmlsZSkgcmV0dXJuIGZhbHNlO1xyXG5cclxuXHRcdC8vIENoZWNrIGlmIHRoZSBmaWxlIHR5cGUgaXMgc3VwcG9ydGVkXHJcblx0XHRpZiAoIWlzU3VwcG9ydGVkRXh0ZW5zaW9uKGFjdGl2ZUZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkpKSB7XHJcblx0XHRcdHJldHVybiBmYWxzZTtcclxuXHRcdH1cclxuXHJcblx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVBhdGggPSBhY3RpdmVGaWxlLnBhdGg7XHJcblx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcclxuXHRcdHJldHVybiB0cnVlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgYWN0aXZlIGZpbGUgY2FuIGJlIHNldCBhcyBob21lIGJhc2VcclxuXHQgKi9cclxuXHRjYW5TZXRBY3RpdmVGaWxlQXNIb21lQmFzZSgpOiBib29sZWFuIHtcclxuXHRcdGNvbnN0IGFjdGl2ZUZpbGUgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlRmlsZSgpO1xyXG5cdFx0aWYgKCFhY3RpdmVGaWxlKSByZXR1cm4gZmFsc2U7XHJcblxyXG5cdFx0cmV0dXJuIGlzU3VwcG9ydGVkRXh0ZW5zaW9uKGFjdGl2ZUZpbGUuZXh0ZW5zaW9uLnRvTG93ZXJDYXNlKCkpO1xyXG5cdH1cclxufVxyXG4iLCAiLyoqXHJcbiAqIEhvbWUgQmFzZSBUeXBlIFJlc29sdXRpb24gVXRpbGl0aWVzXHJcbiAqIFJlc29sdmVzIGhvbWUgYmFzZSBwYXRocyBiYXNlZCBvbiB0eXBlIChGaWxlLCBXb3Jrc3BhY2UsIFJhbmRvbSwgZXRjLilcclxuICovXHJcblxyXG5pbXBvcnQgeyBBcHAsIFRGaWxlLCBURm9sZGVyIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgeyBIb21lQmFzZVR5cGUgfSBmcm9tICcuLi9zZXR0aW5ncyc7XHJcbmltcG9ydCB0eXBlIEhvbWVCYXNlUGx1Z2luIGZyb20gJy4uL21haW4nO1xyXG5pbXBvcnQge1xyXG5cdGNyZWF0ZURhaWx5Tm90ZSwgZ2V0RGFpbHlOb3RlLCBnZXRBbGxEYWlseU5vdGVzLFxyXG5cdGNyZWF0ZVdlZWtseU5vdGUsIGdldFdlZWtseU5vdGUsIGdldEFsbFdlZWtseU5vdGVzLFxyXG5cdGNyZWF0ZU1vbnRobHlOb3RlLCBnZXRNb250aGx5Tm90ZSwgZ2V0QWxsTW9udGhseU5vdGVzLFxyXG5cdGNyZWF0ZVllYXJseU5vdGUsIGdldFllYXJseU5vdGUsIGdldEFsbFllYXJseU5vdGVzLFxyXG59IGZyb20gJ29ic2lkaWFuLWRhaWx5LW5vdGVzLWludGVyZmFjZSc7XHJcblxyXG4vKipcclxuICogR2V0IGEgcmFuZG9tIGZpbGUgZnJvbSB0aGUgdmF1bHRcclxuICogQHBhcmFtIGFwcCBUaGUgT2JzaWRpYW4gYXBwIGluc3RhbmNlXHJcbiAqIEBwYXJhbSByb290IE9wdGlvbmFsIGZvbGRlciBwYXRoIE9SIGZpbGVuYW1lIHBhdHRlcm4gKGUuZy4sIFwiaW5kZXgubWRcIiB0byBmaW5kIGFsbCBmaWxlcyBuYW1lZCBpbmRleC5tZClcclxuICovXHJcbmZ1bmN0aW9uIHJhbmRvbUZpbGUoYXBwOiBBcHAsIHJvb3Q/OiBzdHJpbmcpOiBURmlsZSB8IG51bGwge1xyXG5cdGxldCBmaWxlczogVEZpbGVbXSA9IFtdO1xyXG5cdFxyXG5cdGlmIChyb290KSB7XHJcblx0XHQvLyBGaXJzdCB0cnkgYXMgYSBmb2xkZXIgcGF0aFxyXG5cdFx0Y29uc3QgcmVzb2x2ZWRSb290ID0gYXBwLnZhdWx0LmdldEZvbGRlckJ5UGF0aChyb290KTtcclxuXHRcdGlmIChyZXNvbHZlZFJvb3QpIHtcclxuXHRcdFx0Ly8gSXQncyBhIGZvbGRlciAtIGdldCBhbGwgZmlsZXMgaW4gaXRcclxuXHRcdFx0ZmlsZXMgPSBnZXRGaWxlc0luRm9sZGVyKHJlc29sdmVkUm9vdCk7XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBOb3QgYSBmb2xkZXIgLSB0cmVhdCBhcyBmaWxlbmFtZSBwYXR0ZXJuIChlLmcuLCBcImluZGV4Lm1kXCIpXHJcblx0XHRcdC8vIFNlYXJjaCBmb3IgYWxsIGZpbGVzIG1hdGNoaW5nIHRoaXMgbmFtZSBpbiB0aGUgdmF1bHRcclxuXHRcdFx0Y29uc3QgYWxsRmlsZXMgPSBhcHAudmF1bHQuZ2V0RmlsZXMoKTtcclxuXHRcdFx0Y29uc3QgcGF0dGVybiA9IHJvb3QudG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0ZmlsZXMgPSBhbGxGaWxlcy5maWx0ZXIoKGY6IFRGaWxlKSA9PiB7XHJcblx0XHRcdFx0Y29uc3QgZmlsZU5hbWUgPSBmLm5hbWUudG9Mb3dlckNhc2UoKTtcclxuXHRcdFx0XHRyZXR1cm4gZmlsZU5hbWUgPT09IHBhdHRlcm4gfHwgZmlsZU5hbWUgPT09IHBhdHRlcm4ucmVwbGFjZSgvXFwubWQkLywgJycpO1xyXG5cdFx0XHR9KTtcclxuXHRcdH1cclxuXHR9IGVsc2Uge1xyXG5cdFx0Ly8gTm8gcm9vdCBzcGVjaWZpZWQgLSBnZXQgYWxsIGZpbGVzXHJcblx0XHRmaWxlcyA9IGFwcC52YXVsdC5nZXRGaWxlcygpO1xyXG5cdH1cclxuXHJcblx0Ly8gRmlsdGVyIHRvIHN1cHBvcnRlZCBmaWxlIHR5cGVzXHJcblx0ZmlsZXMgPSBmaWxlcy5maWx0ZXIoKGY6IFRGaWxlKSA9PiBbJ21kJywgJ2NhbnZhcycsICdiYXNlJ10uaW5jbHVkZXMoZi5leHRlbnNpb24pKTtcclxuXHRcclxuXHRpZiAoZmlsZXMubGVuZ3RoKSB7XHJcblx0XHRjb25zdCBpbmRleCA9IE1hdGguZmxvb3IoTWF0aC5yYW5kb20oKSAqIGZpbGVzLmxlbmd0aCk7XHJcblx0XHRyZXR1cm4gZmlsZXNbaW5kZXhdIHx8IG51bGw7XHJcblx0fVxyXG5cclxuXHRyZXR1cm4gbnVsbDtcclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBhbGwgZmlsZXMgaW4gYSBmb2xkZXIgcmVjdXJzaXZlbHlcclxuICovXHJcbmZ1bmN0aW9uIGdldEZpbGVzSW5Gb2xkZXIoZm9sZGVyOiBURm9sZGVyKTogVEZpbGVbXSB7XHJcblx0bGV0IGZpbGVzOiBURmlsZVtdID0gW107XHJcblx0XHJcblx0Zm9yIChjb25zdCBpdGVtIG9mIGZvbGRlci5jaGlsZHJlbikge1xyXG5cdFx0aWYgKGl0ZW0gaW5zdGFuY2VvZiBURmlsZSkge1xyXG5cdFx0XHRmaWxlcy5wdXNoKGl0ZW0pO1xyXG5cdFx0fSBlbHNlIGlmIChpdGVtIGluc3RhbmNlb2YgVEZvbGRlcikge1xyXG5cdFx0XHRmaWxlcy5wdXNoKC4uLmdldEZpbGVzSW5Gb2xkZXIoaXRlbSkpO1xyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHRyZXR1cm4gZmlsZXM7XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBUcmltIGZpbGUgZXh0ZW5zaW9uIGZvciAubWQgZmlsZXMgKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG4gKi9cclxuZXhwb3J0IGZ1bmN0aW9uIHRyaW1GaWxlKGZpbGU6IFRGaWxlKTogc3RyaW5nIHtcclxuXHRpZiAoIWZpbGUpIHJldHVybiAnJztcclxuXHRyZXR1cm4gZmlsZS5leHRlbnNpb24gPT09ICdtZCcgPyBmaWxlLnBhdGguc2xpY2UoMCwgLTMpIDogZmlsZS5wYXRoO1xyXG59XHJcblxyXG5cclxuLyoqXHJcbiAqIFBlcmlvZGljIG5vdGUgaW5mbyAobGlrZSBob21lcGFnZSBwbHVnaW4pXHJcbiAqL1xyXG5pbnRlcmZhY2UgUGVyaW9kaWNJbmZvIHtcclxuXHRub3VuOiBzdHJpbmc7XHJcblx0YWRqZWN0aXZlOiBzdHJpbmc7XHJcblx0Y3JlYXRlOiAoZGF0ZTogbW9tZW50Lk1vbWVudCkgPT4gUHJvbWlzZTxURmlsZT47XHJcblx0Z2V0OiAoZGF0ZTogbW9tZW50Lk1vbWVudCwgYWxsOiBSZWNvcmQ8c3RyaW5nLCBURmlsZT4pID0+IFRGaWxlO1xyXG5cdGdldEFsbDogKCkgPT4gUmVjb3JkPHN0cmluZywgVEZpbGU+O1xyXG59XHJcblxyXG5jb25zdCBQRVJJT0RJQ19JTkZPOiBSZWNvcmQ8SG9tZUJhc2VUeXBlLCBQZXJpb2RpY0luZm8gfCBudWxsPiA9IHtcclxuXHRbSG9tZUJhc2VUeXBlLkRhaWx5Tm90ZV06IHtcclxuXHRcdG5vdW46ICdkYXknLFxyXG5cdFx0YWRqZWN0aXZlOiAnZGFpbHknLFxyXG5cdFx0Y3JlYXRlOiBjcmVhdGVEYWlseU5vdGUsXHJcblx0XHRnZXQ6IGdldERhaWx5Tm90ZSxcclxuXHRcdGdldEFsbDogZ2V0QWxsRGFpbHlOb3RlcyxcclxuXHR9LFxyXG5cdFtIb21lQmFzZVR5cGUuV2Vla2x5Tm90ZV06IHtcclxuXHRcdG5vdW46ICd3ZWVrJyxcclxuXHRcdGFkamVjdGl2ZTogJ3dlZWtseScsXHJcblx0XHRjcmVhdGU6IGNyZWF0ZVdlZWtseU5vdGUsXHJcblx0XHRnZXQ6IGdldFdlZWtseU5vdGUsXHJcblx0XHRnZXRBbGw6IGdldEFsbFdlZWtseU5vdGVzLFxyXG5cdH0sXHJcblx0W0hvbWVCYXNlVHlwZS5Nb250aGx5Tm90ZV06IHtcclxuXHRcdG5vdW46ICdtb250aCcsXHJcblx0XHRhZGplY3RpdmU6ICdtb250aGx5JyxcclxuXHRcdGNyZWF0ZTogY3JlYXRlTW9udGhseU5vdGUsXHJcblx0XHRnZXQ6IGdldE1vbnRobHlOb3RlLFxyXG5cdFx0Z2V0QWxsOiBnZXRBbGxNb250aGx5Tm90ZXMsXHJcblx0fSxcclxuXHRbSG9tZUJhc2VUeXBlLlllYXJseU5vdGVdOiB7XHJcblx0XHRub3VuOiAneWVhcicsXHJcblx0XHRhZGplY3RpdmU6ICd5ZWFybHknLFxyXG5cdFx0Y3JlYXRlOiBjcmVhdGVZZWFybHlOb3RlLFxyXG5cdFx0Z2V0OiBnZXRZZWFybHlOb3RlLFxyXG5cdFx0Z2V0QWxsOiBnZXRBbGxZZWFybHlOb3RlcyxcclxuXHR9LFxyXG5cdFtIb21lQmFzZVR5cGUuRmlsZV06IG51bGwsXHJcblx0W0hvbWVCYXNlVHlwZS5SYW5kb21dOiBudWxsLFxyXG5cdFtIb21lQmFzZVR5cGUuUmFuZG9tRm9sZGVyXTogbnVsbCxcclxuXHRbSG9tZUJhc2VUeXBlLldvcmtzcGFjZV06IG51bGwsXHJcblx0W0hvbWVCYXNlVHlwZS5HcmFwaF06IG51bGwsXHJcblx0W0hvbWVCYXNlVHlwZS5Ob25lXTogbnVsbCxcclxuXHRbSG9tZUJhc2VUeXBlLkpvdXJuYWxdOiBudWxsLFxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEdldCBwZXJpb2RpYyBub3RlIHBhdGggKERhaWx5LCBXZWVrbHksIE1vbnRobHksIFllYXJseSlcclxuICogQmFzZWQgb24gaG9tZXBhZ2UgcGx1Z2luIGltcGxlbWVudGF0aW9uXHJcbiAqL1xyXG5hc3luYyBmdW5jdGlvbiBnZXRQZXJpb2RpY05vdGUoa2luZDogSG9tZUJhc2VUeXBlLCBwbHVnaW46IEhvbWVCYXNlUGx1Z2luKTogUHJvbWlzZTxzdHJpbmcgfCBudWxsPiB7XHJcblx0aWYgKCF3aW5kb3cubW9tZW50KSB7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblx0XHJcblx0Y29uc3QgaW5mbyA9IFBFUklPRElDX0lORk9ba2luZF07XHJcblx0aWYgKCFpbmZvKSB7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblx0XHJcblx0Ly8gR2V0IHRoZSBjdXJyZW50IGRhdGUgZm9yIHRoZSBwZXJpb2QgKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG5cdGNvbnN0IGRhdGUgPSB3aW5kb3cubW9tZW50KCkuc3RhcnRPZihpbmZvLm5vdW4gYXMgbW9tZW50LnVuaXRPZlRpbWUuU3RhcnRPZik7XHJcblx0XHJcblx0Ly8gRm9yIGRhaWx5IG5vdGVzLCB0cnkgY29yZSBkYWlseSBub3RlcyBwbHVnaW4gZmlyc3QgKGxpa2UgaG9tZXBhZ2UgcGx1Z2luKVxyXG5cdGlmIChraW5kID09PSBIb21lQmFzZVR5cGUuRGFpbHlOb3RlICYmIHBsdWdpbi5hcHAuaW50ZXJuYWxQbHVnaW5zPy5wbHVnaW5zPy5bJ2RhaWx5LW5vdGVzJ10/LmVuYWJsZWQpIHtcclxuXHRcdGNvbnN0IGRhaWx5Tm90ZXMgPSBwbHVnaW4uYXBwLmludGVybmFsUGx1Z2lucy5wbHVnaW5zWydkYWlseS1ub3RlcyddLmluc3RhbmNlO1xyXG5cdFx0aWYgKGRhaWx5Tm90ZXM/LmdldERhaWx5Tm90ZVBhdGgpIHtcclxuXHRcdFx0Y29uc3QgdG9kYXkgPSB3aW5kb3cubW9tZW50KCk7XHJcblx0XHRcdGNvbnN0IHBhdGggPSBkYWlseU5vdGVzLmdldERhaWx5Tm90ZVBhdGgodG9kYXkpO1xyXG5cdFx0XHRpZiAocGF0aCkge1xyXG5cdFx0XHRcdHJldHVybiBwYXRoLnJlcGxhY2UoL1xcLm1kJC8sICcnKTtcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdH1cclxuXHRcclxuXHQvLyBVc2UgcGVyaW9kaWMgbm90ZXMgcGx1Z2luIChsaWtlIGhvbWVwYWdlIHBsdWdpbilcclxuXHRjb25zdCBwZXJpb2RpY05vdGVzUGx1Z2luID0gcGx1Z2luLmFwcC5wbHVnaW5zPy5wbHVnaW5zPy5bJ3BlcmlvZGljLW5vdGVzJ10gYXMge1xyXG5cdFx0Z2V0UGVyaW9kaWNOb3RlPzogKG5vdW46ICdkYXknIHwgJ3dlZWsnIHwgJ21vbnRoJyB8ICd5ZWFyJywgZGF0ZTogbW9tZW50Lk1vbWVudCkgPT4gVEZpbGUgfCBudWxsO1xyXG5cdFx0Y3JlYXRlUGVyaW9kaWNOb3RlPzogKG5vdW46ICdkYXknIHwgJ3dlZWsnIHwgJ21vbnRoJyB8ICd5ZWFyJywgZGF0ZTogbW9tZW50Lk1vbWVudCkgPT4gUHJvbWlzZTxURmlsZT47XHJcblx0XHRjYWNoZT86IHtcclxuXHRcdFx0aW5pdGlhbGl6ZT86ICgpID0+IHZvaWQ7XHJcblx0XHR9O1xyXG5cdFx0bWFuaWZlc3Q/OiB7XHJcblx0XHRcdHZlcnNpb24/OiBzdHJpbmc7XHJcblx0XHR9O1xyXG5cdH0gfCB1bmRlZmluZWQ7XHJcblx0XHJcblx0aWYgKCFwZXJpb2RpY05vdGVzUGx1Z2luKSB7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcblx0XHJcblx0dHJ5IHtcclxuXHRcdC8vIENoZWNrIGlmIGxlZ2FjeSBwZXJpb2RpYyBub3RlcyAodmVyc2lvbiBzdGFydHMgd2l0aCBcIjBcIikgLSBleGFjdGx5IGxpa2UgaG9tZXBhZ2UgcGx1Z2luXHJcblx0XHRjb25zdCBpc0xlZ2FjeSA9IChwZXJpb2RpY05vdGVzUGx1Z2luLm1hbmlmZXN0Py52ZXJzaW9uIHx8ICcwJykuc3RhcnRzV2l0aCgnMCcpO1xyXG5cdFx0XHJcblx0XHRsZXQgbm90ZTogVEZpbGUgfCBudWxsID0gbnVsbDtcclxuXHRcdFxyXG5cdFx0aWYgKGlzTGVnYWN5KSB7XHJcblx0XHRcdC8vIExlZ2FjeSBwZXJpb2RpYyBub3RlcyAtIHVzZSBvYnNpZGlhbi1kYWlseS1ub3Rlcy1pbnRlcmZhY2UgKGV4YWN0bHkgbGlrZSBob21lcGFnZSBwbHVnaW4pXHJcblx0XHRcdGNvbnN0IGFsbCA9IGluZm8uZ2V0QWxsKCk7XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoIU9iamVjdC5rZXlzKGFsbCkubGVuZ3RoKSB7XHJcblx0XHRcdFx0bm90ZSA9IGF3YWl0IGluZm8uY3JlYXRlKGRhdGUpO1xyXG5cdFx0XHR9IGVsc2Uge1xyXG5cdFx0XHRcdG5vdGUgPSBpbmZvLmdldChkYXRlLCBhbGwpIHx8IGF3YWl0IGluZm8uY3JlYXRlKGRhdGUpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoIW5vdGUpIHtcclxuXHRcdFx0XHRub3RlID0gaW5mby5nZXQoZGF0ZSwgYWxsKTtcclxuXHRcdFx0fVxyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gTmV3IHBlcmlvZGljIG5vdGVzIC0gZXhhY3RseSBsaWtlIGhvbWVwYWdlIHBsdWdpblxyXG5cdFx0XHRpZiAocGVyaW9kaWNOb3Rlc1BsdWdpbi5jYWNoZT8uaW5pdGlhbGl6ZSkge1xyXG5cdFx0XHRcdHBlcmlvZGljTm90ZXNQbHVnaW4uY2FjaGUuaW5pdGlhbGl6ZSgpO1xyXG5cdFx0XHR9XHJcblx0XHRcdFxyXG5cdFx0XHRub3RlID0gKFxyXG5cdFx0XHRcdHBlcmlvZGljTm90ZXNQbHVnaW4uZ2V0UGVyaW9kaWNOb3RlPy4oaW5mby5ub3VuIGFzICdkYXknIHwgJ3dlZWsnIHwgJ21vbnRoJyB8ICd5ZWFyJywgZGF0ZSkgfHxcclxuXHRcdFx0XHRhd2FpdCBwZXJpb2RpY05vdGVzUGx1Z2luLmNyZWF0ZVBlcmlvZGljTm90ZT8uKGluZm8ubm91biBhcyAnZGF5JyB8ICd3ZWVrJyB8ICdtb250aCcgfCAneWVhcicsIGRhdGUpXHJcblx0XHRcdCkgfHwgbnVsbDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKG5vdGUpIHtcclxuXHRcdFx0cmV0dXJuIHRyaW1GaWxlKG5vdGUpO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9IGNhdGNoIHtcclxuXHRcdHJldHVybiBudWxsO1xyXG5cdH1cclxufVxyXG5cclxuLyoqXHJcbiAqIEdldCBqb3VybmFsIG5vdGUgcGF0aFxyXG4gKi9cclxuYXN5bmMgZnVuY3Rpb24gZ2V0Sm91cm5hbE5vdGUoam91cm5hbE5hbWU6IHN0cmluZywgcGx1Z2luOiBIb21lQmFzZVBsdWdpbik6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG5cdCBcclxuXHRjb25zdCBqb3VybmFscyA9IHBsdWdpbi5hcHAucGx1Z2lucz8ucGx1Z2lucz8uWydqb3VybmFscyddO1xyXG5cdGlmICgham91cm5hbHMpIHJldHVybiBudWxsO1xyXG5cdFxyXG5cdHRyeSB7XHJcblx0XHQvLyBBY2Nlc3NpbmcgaW50ZXJuYWwgcGx1Z2luIEFQSSAtIHN0cnVjdHVyZSBub3QgZnVsbHkgdHlwZWRcclxuXHRcdHR5cGUgSm91cm5hbEVudHJ5ID0ge1xyXG5cdFx0XHRuYW1lPzogc3RyaW5nO1xyXG5cdFx0XHRjb25maWc/OiB7XHJcblx0XHRcdFx0dmFsdWU/OiB7XHJcblx0XHRcdFx0XHRhdXRvQ3JlYXRlPzogYm9vbGVhbjtcclxuXHRcdFx0XHR9O1xyXG5cdFx0XHR9O1xyXG5cdFx0XHRhdXRvQ3JlYXRlPzogKCkgPT4gUHJvbWlzZTx2b2lkPjtcclxuXHRcdFx0Z2V0PzogKGRhdGU6IG1vbWVudC5Nb21lbnQpID0+IFRGaWxlIHwgbnVsbDtcclxuXHRcdFx0Z2V0Tm90ZVBhdGg/OiAoZmlsZTogVEZpbGUpID0+IHN0cmluZztcclxuXHRcdH07XHJcblx0XHRjb25zdCBqb3VybmFsID0gKGpvdXJuYWxzLmpvdXJuYWxzIGFzIEpvdXJuYWxFbnRyeVtdIHwgdW5kZWZpbmVkKT8uZmluZCgoaikgPT4gai5uYW1lID09PSBqb3VybmFsTmFtZSk7XHJcblx0XHRpZiAoIWpvdXJuYWwpIHJldHVybiBudWxsO1xyXG5cdFx0XHJcblx0XHQvLyBUcmlnZ2VyIGF1dG8tY3JlYXRlIGlmIG5lZWRlZFxyXG5cdFx0IFxyXG5cdFx0am91cm5hbHMucmVwcm9jZXNzTm90ZXM/LigpO1xyXG5cdFx0IFxyXG5cdFx0Y29uc3Qgb3JpZ0F1dG9DcmVhdGUgPSBqb3VybmFsLmNvbmZpZz8udmFsdWU/LmF1dG9DcmVhdGU7XHJcblx0XHQgXHJcblx0XHRpZiAoam91cm5hbC5jb25maWc/LnZhbHVlKSB7XHJcblx0XHRcdCBcclxuXHRcdFx0am91cm5hbC5jb25maWcudmFsdWUuYXV0b0NyZWF0ZSA9IHRydWU7XHJcblx0XHR9XHJcblx0XHQgXHJcblx0XHRhd2FpdCBqb3VybmFsLmF1dG9DcmVhdGU/LigpO1xyXG5cdFx0IFxyXG5cdFx0aWYgKGpvdXJuYWwuY29uZmlnPy52YWx1ZSkge1xyXG5cdFx0XHQgXHJcblx0XHRcdGpvdXJuYWwuY29uZmlnLnZhbHVlLmF1dG9DcmVhdGUgPSBvcmlnQXV0b0NyZWF0ZTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYgKCF3aW5kb3cubW9tZW50KSByZXR1cm4gbnVsbDtcclxuXHRcdCBcclxuXHRcdGNvbnN0IHRvZGF5ID0gd2luZG93Lm1vbWVudCgpLmxvY2FsZSgnY3VzdG9tLWpvdXJuYWwtbG9jYWxlJykuc3RhcnRPZignZGF5Jyk7XHJcblx0XHQgXHJcblx0XHRjb25zdCBub3RlID0gam91cm5hbC5nZXQ/Lih0b2RheSk7XHJcblx0XHRpZiAoIW5vdGUpIHJldHVybiBudWxsO1xyXG5cdFx0XHJcblx0XHQgXHJcblx0XHRjb25zdCBwYXRoID0gam91cm5hbC5nZXROb3RlUGF0aD8uKG5vdGUpO1xyXG5cdFx0IFxyXG5cdFx0cmV0dXJuIHBhdGggPyBwYXRoLnJlcGxhY2UoL1xcLm1kJC8sICcnKSA6IG51bGw7XHJcblx0fSBjYXRjaCB7XHJcblx0XHRyZXR1cm4gbnVsbDtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDb21wdXRlIHRoZSBhY3R1YWwgZmlsZSBwYXRoIGJhc2VkIG9uIGhvbWUgYmFzZSB0eXBlXHJcbiAqL1xyXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY29tcHV0ZUhvbWVCYXNlUGF0aChcclxuXHR0eXBlOiBIb21lQmFzZVR5cGUsXHJcblx0dmFsdWU6IHN0cmluZyxcclxuXHRwbHVnaW46IEhvbWVCYXNlUGx1Z2luXHJcbik6IFByb21pc2U8c3RyaW5nIHwgbnVsbD4ge1xyXG5cdHN3aXRjaCAodHlwZSkge1xyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuRmlsZTpcclxuXHRcdFx0cmV0dXJuIHZhbHVlIHx8IG51bGw7XHJcblx0XHRcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLlJhbmRvbToge1xyXG5cdFx0XHRjb25zdCBmaWxlID0gcmFuZG9tRmlsZShwbHVnaW4uYXBwKTtcclxuXHRcdFx0cmV0dXJuIGZpbGUgPyB0cmltRmlsZShmaWxlKSA6IG51bGw7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLlJhbmRvbUZvbGRlcjoge1xyXG5cdFx0XHRjb25zdCBmaWxlID0gcmFuZG9tRmlsZShwbHVnaW4uYXBwLCB2YWx1ZSk7XHJcblx0XHRcdHJldHVybiBmaWxlID8gdHJpbUZpbGUoZmlsZSkgOiBudWxsO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5EYWlseU5vdGU6XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5XZWVrbHlOb3RlOlxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuTW9udGhseU5vdGU6XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5ZZWFybHlOb3RlOlxyXG5cdFx0XHRyZXR1cm4gYXdhaXQgZ2V0UGVyaW9kaWNOb3RlKHR5cGUsIHBsdWdpbik7XHJcblx0XHRcclxuXHRcdGNhc2UgSG9tZUJhc2VUeXBlLkpvdXJuYWw6XHJcblx0XHRcdHJldHVybiBhd2FpdCBnZXRKb3VybmFsTm90ZSh2YWx1ZSwgcGx1Z2luKTtcclxuXHRcdFxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuV29ya3NwYWNlOlxyXG5cdFx0Y2FzZSBIb21lQmFzZVR5cGUuR3JhcGg6XHJcblx0XHRjYXNlIEhvbWVCYXNlVHlwZS5Ob25lOlxyXG5cdFx0XHQvLyBUaGVzZSBkb24ndCByZXNvbHZlIHRvIGEgZmlsZSBwYXRoXHJcblx0XHRcdHJldHVybiBudWxsO1xyXG5cdFx0XHJcblx0XHRkZWZhdWx0OlxyXG5cdFx0XHRyZXR1cm4gdmFsdWUgfHwgbnVsbDtcclxuXHR9XHJcbn1cclxuXHJcbi8qKlxyXG4gKiBDaGVjayBpZiBhIGhvbWUgYmFzZSB0eXBlIHJlcXVpcmVzIGEgZmlsZSB0byBiZSBvcGVuZWRcclxuICovXHJcbmV4cG9ydCBmdW5jdGlvbiByZXF1aXJlc0ZpbGUodHlwZTogSG9tZUJhc2VUeXBlKTogYm9vbGVhbiB7XHJcblx0cmV0dXJuIHR5cGUgIT09IEhvbWVCYXNlVHlwZS5Xb3Jrc3BhY2UgJiYgXHJcblx0ICAgICAgIHR5cGUgIT09IEhvbWVCYXNlVHlwZS5HcmFwaCAmJiBcclxuXHQgICAgICAgdHlwZSAhPT0gSG9tZUJhc2VUeXBlLk5vbmU7XHJcbn1cclxuXHJcbiIsICIvKipcclxuICogTmV3IFRhYiBTZXJ2aWNlXHJcbiAqIEhhbmRsZXMgc3RhcnR1cCBkZXRlY3Rpb24gYW5kIG5ldyB0YWIgcmVwbGFjZW1lbnRcclxuICogSW5zcGlyZWQgYnkgb2JzaWRpYW4taG9tZXBhZ2UgYW5kIG5ldy10YWItZGVmYXVsdC1wYWdlXHJcbiAqL1xyXG5cclxuaW1wb3J0IHsgQXBwLCBXb3Jrc3BhY2VMZWFmLCBWaWV3LCBURmlsZSB9IGZyb20gJ29ic2lkaWFuJztcclxuaW1wb3J0IHR5cGUgSG9tZUJhc2VQbHVnaW4gZnJvbSAnLi4vbWFpbic7XHJcbmltcG9ydCB7IEhvbWVCYXNlVHlwZSB9IGZyb20gJy4uL3NldHRpbmdzJztcclxuXHJcbmV4cG9ydCBjbGFzcyBOZXdUYWJTZXJ2aWNlIHtcclxuXHRwcml2YXRlIGFwcDogQXBwO1xyXG5cdHByaXZhdGUgcGx1Z2luOiBIb21lQmFzZVBsdWdpbjtcclxuXHRwcml2YXRlIGV4aXN0aW5nTGVhdmVzOiBXZWFrU2V0PFdvcmtzcGFjZUxlYWY+ID0gbmV3IFdlYWtTZXQoKTtcclxuXHRwcml2YXRlIGlzU3RhcnR1cDogYm9vbGVhbiA9IHRydWU7XHJcblx0cHJpdmF0ZSBzdGFydHVwQ29tcGxldGVkOiBib29sZWFuID0gZmFsc2U7XHJcblxyXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogSG9tZUJhc2VQbHVnaW4pIHtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdFx0dGhpcy5hcHAgPSBwbHVnaW4uYXBwO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVHJhY2sgYWxsIGV4aXN0aW5nIGxlYXZlcyAoZm9yIG5ldyB0YWIgZGV0ZWN0aW9uKVxyXG5cdCAqIFRoaXMgbXVzdCBiZSBjYWxsZWQgZXZlbiB3aGVuIHN0YXJ0dXAgaXMgaGFuZGxlZCBlbHNld2hlcmVcclxuXHQgKi9cclxuXHR0cmFja0V4aXN0aW5nTGVhdmVzKCk6IHZvaWQge1xyXG5cdFx0dGhpcy5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcclxuXHRcdFx0dGhpcy5leGlzdGluZ0xlYXZlcy5hZGQobGVhZik7XHJcblx0XHR9KTtcclxuXHRcdC8vIE1hcmsgc3RhcnR1cCBhcyBjb21wbGV0ZWQgc28gbGF5b3V0IGNoYW5nZSBoYW5kbGVyIHdvcmtzXHJcblx0XHR0aGlzLnN0YXJ0dXBDb21wbGV0ZWQgPSB0cnVlO1xyXG5cdFx0dGhpcy5pc1N0YXJ0dXAgPSBmYWxzZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEluaXRpYWxpemUgdGhlIHNlcnZpY2UgLSBjYWxsZWQgd2hlbiBsYXlvdXQgaXMgcmVhZHlcclxuXHQgKi9cclxuXHRpbml0aWFsaXplKCk6IHZvaWQge1xyXG5cdFx0Ly8gVHJhY2sgYWxsIGV4aXN0aW5nIGxlYXZlc1xyXG5cdFx0dGhpcy50cmFja0V4aXN0aW5nTGVhdmVzKCk7XHJcblxyXG5cdFx0Ly8gSGFuZGxlIHN0YXJ0dXBcclxuXHRcdHZvaWQgdGhpcy5oYW5kbGVTdGFydHVwKCk7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGUgYXBwIHN0YXJ0dXAgLSBvcGVuIGhvbWUgYmFzZSBpZiBuZWVkZWRcclxuXHQgKiBPbmx5IGNhbGxlZCBvbiBhY3R1YWwgYXBwIHN0YXJ0dXAsIG5vdCBwbHVnaW4gcmVsb2Fkc1xyXG5cdCAqL1xyXG5cdHByaXZhdGUgXHRhc3luYyBoYW5kbGVTdGFydHVwKCk6IFByb21pc2U8dm9pZD4ge1xyXG5cdFx0Y29uc3Qgc2V0dGluZ3MgPSB0aGlzLnBsdWdpbi5zZXR0aW5ncztcclxuXHJcblx0XHQvLyBDaGVjayBpZiB3ZSBzaG91bGQgc2tpcCAob3Blbk9uU3RhcnR1cCBpcyBmYWxzZSwgb3Igbm8gaG9tZSBiYXNlIGNvbmZpZ3VyZWQpXHJcblx0XHRjb25zdCBob21lQmFzZVNldHRpbmdzID0gdGhpcy5wbHVnaW4uZ2V0SG9tZUJhc2VTZXR0aW5ncygpO1xyXG5cdFx0aWYgKCFzZXR0aW5ncy5vcGVuT25TdGFydHVwIHx8ICghaG9tZUJhc2VTZXR0aW5ncy52YWx1ZSAmJiBob21lQmFzZVNldHRpbmdzLnR5cGUgPT09IEhvbWVCYXNlVHlwZS5GaWxlKSkge1xyXG5cdFx0XHR0aGlzLnN0YXJ0dXBDb21wbGV0ZWQgPSB0cnVlO1xyXG5cdFx0XHR0aGlzLmlzU3RhcnR1cCA9IGZhbHNlO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gQ2hlY2sgZm9yIFVSTCBwYXJhbXMgKGxpa2Ugb2JzaWRpYW46Ly9vcGVuIGxpbmtzKSAtIGlmIHByZXNlbnQsIHNraXAgZXZlcnl0aGluZ1xyXG5cdFx0aWYgKGF3YWl0IHRoaXMuaGFzVXJsUGFyYW1zKCkpIHtcclxuXHRcdFx0dGhpcy5zdGFydHVwQ29tcGxldGVkID0gdHJ1ZTtcclxuXHRcdFx0dGhpcy5pc1N0YXJ0dXAgPSBmYWxzZTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIFdhaXQgYSBiaXQgZm9yIE9ic2lkaWFuIHRvIGZpbmlzaCByZXN0b3JpbmcgdGhlIHdvcmtzcGFjZVxyXG5cdFx0Ly8gVGhpcyBlbnN1cmVzIGFsbCB0YWJzIGFyZSBsb2FkZWQgYmVmb3JlIHdlIHRyeSB0byBjbG9zZSB0aGVtXHJcblx0XHQvLyBOZWVkIGxvbmdlciBkZWxheSB0byBlbnN1cmUgd29ya3NwYWNlIGlzIGZ1bGx5IHJlc3RvcmVkXHJcblx0XHRhd2FpdCBuZXcgUHJvbWlzZShyZXNvbHZlID0+IHNldFRpbWVvdXQocmVzb2x2ZSwgNTAwKSk7XHJcblxyXG5cdFx0Ly8gSWYga2VlcEV4aXN0aW5nVGFicyBpcyBmYWxzZSwgY2xvc2UgQUxMIHRhYnMgZmlyc3QsIHRoZW4gb3BlbiBob21lIGJhc2VcclxuXHRcdC8vIFRoaXMgc2hvdWxkIE9OTFkgaGFwcGVuIG9uIHN0YXJ0dXAsIG5vdCB3aGVuIG1hbnVhbGx5IG9wZW5pbmdcclxuXHRcdC8vIFdlIGNsb3NlIGV2ZXJ5dGhpbmcgZmlyc3QsIHRoZW4gb3BlbiBmcmVzaCAtIGRvbid0IHRyeSB0byBmaW5kIHRhYnMgdG8ga2VlcFxyXG5cdFx0Ly8gRXhjZXB0aW9uOiBJZiBoaWRlUmVsZWFzZU5vdGVzIGlzIE9GRiwgcHJlc2VydmUgcmVsZWFzZSBub3RlcyB0YWJcclxuXHRcdGlmICghc2V0dGluZ3Mua2VlcEV4aXN0aW5nVGFicykge1xyXG5cdFx0XHQvLyBJZiBoaWRlUmVsZWFzZU5vdGVzIGlzIE9GRiwgd2Ugc2hvdWxkIHByZXNlcnZlIHJlbGVhc2Ugbm90ZXMgdGFiXHJcblx0XHRcdGxldCBleGNlcHRMZWFmOiBXb3Jrc3BhY2VMZWFmIHwgbnVsbCA9IG51bGw7XHJcblx0XHRcdGlmICghc2V0dGluZ3MuaGlkZVJlbGVhc2VOb3Rlcykge1xyXG5cdFx0XHRcdC8vIFRyeSB0byBmaW5kIHJlbGVhc2Ugbm90ZXMgdGFiXHJcblx0XHRcdFx0Y29uc3QgYWxsTGVhdmVzID0gdGhpcy5hcHAud29ya3NwYWNlLmdldExlYXZlc09mVHlwZSgnbWFya2Rvd24nKTtcclxuXHRcdFx0XHRmb3IgKGNvbnN0IGxlYWYgb2YgYWxsTGVhdmVzKSB7XHJcblx0XHRcdFx0XHRjb25zdCB2aWV3ID0gbGVhZi52aWV3O1xyXG5cdFx0XHRcdFx0IFxyXG5cdFx0XHRcdFx0Y29uc3QgbWFya2Rvd25WaWV3ID0gdmlldyBhcyB1bmtub3duIGFzIHsgZmlsZT86IFRGaWxlOyBjb250YWluZXJFbD86IEhUTUxFbGVtZW50IH07XHJcblx0XHRcdFx0XHRpZiAobWFya2Rvd25WaWV3LmZpbGUpIHtcclxuXHRcdFx0XHRcdFx0Y29uc3QgZmlsZSA9IG1hcmtkb3duVmlldy5maWxlO1xyXG5cdFx0XHRcdFx0Ly8gUmVsZWFzZSBub3RlcyBhcmUgdHlwaWNhbGx5IGluIGNvbmZpZyBmb2xkZXIgb3IgaGF2ZSBzcGVjaWZpYyBuYW1pbmdcclxuXHRcdFx0XHRcdC8vIENoZWNrIGlmIGl0J3MgYSByZWxlYXNlIG5vdGVzIHRhYiBieSBsb29raW5nIGF0IHRoZSBmaWxlIHBhdGhcclxuXHRcdFx0XHRcdGNvbnN0IGNvbmZpZ0RpciA9IHRoaXMuYXBwLnZhdWx0LmNvbmZpZ0RpcjtcclxuXHRcdFx0XHRcdGlmIChmaWxlLnBhdGguaW5jbHVkZXMoJ3JlbGVhc2UnKSB8fCBmaWxlLnBhdGguaW5jbHVkZXMoY29uZmlnRGlyKSkge1xyXG5cdFx0XHRcdFx0XHRcdC8vIENoZWNrIGlmIGl0J3MgYWN0dWFsbHkgYSByZWxlYXNlIG5vdGVzIHZpZXdcclxuXHRcdFx0XHRcdFx0XHRjb25zdCBjb250YWluZXIgPSBtYXJrZG93blZpZXcuY29udGFpbmVyRWw7XHJcblx0XHRcdFx0XHRcdFx0aWYgKGNvbnRhaW5lciAmJiBjb250YWluZXIucXVlcnlTZWxlY3RvcignLnJlbGVhc2Utbm90ZXMnKSkge1xyXG5cdFx0XHRcdFx0XHRcdFx0ZXhjZXB0TGVhZiA9IGxlYWY7XHJcblx0XHRcdFx0XHRcdFx0XHRicmVhaztcclxuXHRcdFx0XHRcdFx0XHR9XHJcblx0XHRcdFx0XHRcdH1cclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdC8vIENsb3NlIEFMTCB0YWJzIC0gZG9uJ3QgdHJ5IHRvIGtlZXAgYW55LCBqdXN0IGNsb3NlIGV2ZXJ5dGhpbmcgKGV4Y2VwdCByZWxlYXNlIG5vdGVzIGlmIGFwcGxpY2FibGUpXHJcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmhvbWVTZXJ2aWNlLmNsb3NlQWxsTGVhdmVzRXhjZXB0KGV4Y2VwdExlYWYpO1xyXG5cdFx0XHQvLyBXYWl0IGxvbmdlciB0byBlbnN1cmUgYWxsIGRldGFjaG1lbnRzIGFyZSBwcm9jZXNzZWRcclxuXHRcdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDIwMCkpO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIE9uIHN0YXJ0dXAsIHVzZSBnaG9zdCB0YWIgaWYgc3RpY2t5IGljb24gaXMgZW5hYmxlZCwgb3RoZXJ3aXNlIHVzZSBub3JtYWwgb3BlbkhvbWVCYXNlXHJcblx0XHRpZiAoc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKSB7XHJcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmhvbWVTZXJ2aWNlLm9wZW5Ib21lQmFzZUluR2hvc3RUYWIoe1xyXG5cdFx0XHRcdHJ1bkNvbW1hbmQ6IHRydWUsXHJcblx0XHRcdH0pO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Ly8gQWx3YXlzIGNhbGwgb3BlbkhvbWVCYXNlIC0gaXQgd2lsbCBvcGVuIGhvbWUgYmFzZSBpZiBub3QgYWxyZWFkeSBvcGVuXHJcblx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLmhvbWVTZXJ2aWNlLm9wZW5Ib21lQmFzZSh7XHJcblx0XHRcdFx0cmVwbGFjZUFjdGl2ZUxlYWY6IGZhbHNlLFxyXG5cdFx0XHRcdHJ1bkNvbW1hbmQ6IHRydWUsXHJcblx0XHRcdH0pO1xyXG5cdFx0fVxyXG5cclxuXHRcdHRoaXMuc3RhcnR1cENvbXBsZXRlZCA9IHRydWU7XHJcblx0XHR0aGlzLmlzU3RhcnR1cCA9IGZhbHNlO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgdGhlIHNldHRpbmdzIG1vZGFsIGlzIGN1cnJlbnRseSBvcGVuXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpc1NldHRpbmdzTW9kYWxPcGVuKCk6IGJvb2xlYW4ge1xyXG5cdFx0Ly8gQ2hlY2sgZm9yIHNldHRpbmdzIG1vZGFsIGJ5IGxvb2tpbmcgZm9yIHRoZSBtb2RhbCBjb250YWluZXJcclxuXHRcdC8vIFRyeSBtdWx0aXBsZSBzZWxlY3RvcnMgdG8gYmUgbW9yZSByb2J1c3RcclxuXHRcdGNvbnN0IHNldHRpbmdzTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcubW9kYWwtY29udGFpbmVyLm1vZC1zZXR0aW5ncycpIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZGFsLm1vZC1zZXR0aW5ncycpIHx8XHJcblx0XHQgICAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnZlcnRpY2FsLXRhYi1jb250ZW50Jyk7XHJcblx0XHRcclxuXHRcdC8vIEFsc28gY2hlY2sgaWYgYW55IG1vZGFsIGlzIG9wZW4gYW5kIGNvbnRhaW5zIHNldHRpbmdzIGNvbnRlbnRcclxuXHRcdGlmICghc2V0dGluZ3NNb2RhbCkge1xyXG5cdFx0XHRjb25zdCBhbGxNb2RhbHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcubW9kYWwtY29udGFpbmVyJyk7XHJcblx0XHRcdGZvciAoY29uc3QgbW9kYWwgb2YgQXJyYXkuZnJvbShhbGxNb2RhbHMpKSB7XHJcblx0XHRcdFx0aWYgKG1vZGFsLnF1ZXJ5U2VsZWN0b3IoJy52ZXJ0aWNhbC10YWItY29udGVudCcpIHx8IFxyXG5cdFx0XHRcdCAgICBtb2RhbC5xdWVyeVNlbGVjdG9yKCcuc2V0dGluZ3MtY29udGVudCcpIHx8XHJcblx0XHRcdFx0ICAgIG1vZGFsLmNsYXNzTGlzdC5jb250YWlucygnbW9kLXNldHRpbmdzJykpIHtcclxuXHRcdFx0XHRcdHJldHVybiB0cnVlO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gc2V0dGluZ3NNb2RhbCAhPT0gbnVsbDtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGZvciBVUkwgcGFyYW1ldGVycyB0aGF0IGluZGljYXRlIE9ic2lkaWFuIHdhcyBvcGVuZWQgdmlhIGEgbGlua1xyXG5cdCAqIEJhc2VkIG9uIG9ic2lkaWFuLWhvbWVwYWdlIGltcGxlbWVudGF0aW9uXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyBoYXNVcmxQYXJhbXMoKTogUHJvbWlzZTxib29sZWFuPiB7XHJcblx0XHQvLyBDaGVjayBmb3IgbW9iaWxlIFVSTCBwYXJhbXMgKENhcGFjaXRvciBBUEkpXHJcblx0XHRjb25zdCB3aW5kb3dBbnkgPSB3aW5kb3cgYXMgdW5rbm93biBhcyBSZWNvcmQ8c3RyaW5nLCB1bmtub3duPjtcclxuXHRcdFxyXG5cdFx0Y29uc3QgY2FwYWNpdG9yID0gd2luZG93QW55LkNhcGFjaXRvciBhcyB7IFBsdWdpbnM/OiB7IEFwcD86IHsgZ2V0TGF1bmNoVXJsOiAoKSA9PiBQcm9taXNlPHsgdXJsPzogc3RyaW5nIH0gfCBudWxsPiB9IH0gfSB8IHVuZGVmaW5lZDtcclxuXHRcdGlmIChjYXBhY2l0b3I/LlBsdWdpbnM/LkFwcCkge1xyXG5cdFx0XHR0cnkge1xyXG5cdFx0XHRcdGNvbnN0IGxhdW5jaFVybCA9IGF3YWl0IGNhcGFjaXRvci5QbHVnaW5zLkFwcC5nZXRMYXVuY2hVcmwoKTtcclxuXHRcdFx0XHRpZiAobGF1bmNoVXJsPy51cmwpIHtcclxuXHRcdFx0XHRcdGNvbnN0IHVybCA9IG5ldyBVUkwobGF1bmNoVXJsLnVybCk7XHJcblx0XHRcdFx0XHRjb25zdCBwYXJhbXMgPSBBcnJheS5mcm9tKHVybC5zZWFyY2hQYXJhbXMua2V5cygpKTtcclxuXHRcdFx0XHRcdGNvbnN0IGFjdGlvbiA9IHVybC5ob3N0bmFtZTtcclxuXHRcdFx0XHRcdFxyXG5cdFx0XHRcdFx0aWYgKFsnb3BlbicsICdhZHZhbmNlZC11cmknXS5pbmNsdWRlcyhhY3Rpb24pICYmXHJcblx0XHRcdFx0XHRcdFsnZmlsZScsICdmaWxlcGF0aCcsICd3b3Jrc3BhY2UnXS5zb21lKGUgPT4gcGFyYW1zLmluY2x1ZGVzKGUpKSkge1xyXG5cdFx0XHRcdFx0XHRyZXR1cm4gdHJ1ZTtcclxuXHRcdFx0XHRcdH1cclxuXHRcdFx0XHR9XHJcblx0XHRcdH0gY2F0Y2gge1xyXG5cdFx0XHRcdC8vIElnbm9yZSBlcnJvcnNcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGZvciBkZXNrdG9wIFVSTCBwYXJhbXNcclxuXHRcdGNvbnN0IG9ic0FjdCA9IHdpbmRvd0FueS5PQlNfQUNUIGFzIHsgYWN0aW9uPzogc3RyaW5nIH0gfCB1bmRlZmluZWQ7XHJcblx0XHRpZiAob2JzQWN0KSB7XHJcblx0XHRcdGNvbnN0IHBhcmFtcyA9IE9iamVjdC5rZXlzKG9ic0FjdCk7XHJcblx0XHRcdGNvbnN0IGFjdGlvbiA9IG9ic0FjdC5hY3Rpb247XHJcblx0XHRcdFxyXG5cdFx0XHRpZiAoYWN0aW9uICYmIFsnb3BlbicsICdhZHZhbmNlZC11cmknXS5pbmNsdWRlcyhhY3Rpb24pICYmXHJcblx0XHRcdFx0WydmaWxlJywgJ2ZpbGVwYXRoJywgJ3dvcmtzcGFjZSddLnNvbWUoZSA9PiBwYXJhbXMuaW5jbHVkZXMoZSkpKSB7XHJcblx0XHRcdFx0cmV0dXJuIHRydWU7XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHRyZXR1cm4gZmFsc2U7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBIYW5kbGUgbGF5b3V0IGNoYW5nZSBldmVudCAtIGNoZWNrIGZvciBuZXcgZW1wdHkgdGFic1xyXG5cdCAqIEJhc2VkIG9uIG5ldy10YWItZGVmYXVsdC1wYWdlIGltcGxlbWVudGF0aW9uXHJcblx0ICovXHJcblx0aGFuZGxlTGF5b3V0Q2hhbmdlKCk6IHZvaWQge1xyXG5cdFx0Ly8gU2tpcCBkdXJpbmcgc3RhcnR1cFxyXG5cdFx0aWYgKHRoaXMuaXNTdGFydHVwIHx8ICF0aGlzLnN0YXJ0dXBDb21wbGV0ZWQpIHtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIENoZWNrIGFsbCBsZWF2ZXMgZm9yIG5ldyBlbXB0eSBvbmVzXHJcblx0XHR0aGlzLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xyXG5cdFx0XHQvLyBTa2lwIGlmIHdlJ3ZlIGFscmVhZHkgc2VlbiB0aGlzIGxlYWZcclxuXHRcdFx0aWYgKHRoaXMuZXhpc3RpbmdMZWF2ZXMuaGFzKGxlYWYpKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBNYXJrIGFzIHNlZW4gQkVGT1JFIGNoZWNraW5nIGlmIGl0J3MgZW1wdHlcclxuXHRcdFx0Ly8gVGhpcyBwcmV2ZW50cyBwcm9jZXNzaW5nIHRoZSBzYW1lIGxlYWYgbXVsdGlwbGUgdGltZXNcclxuXHRcdFx0dGhpcy5leGlzdGluZ0xlYXZlcy5hZGQobGVhZik7XHJcblxyXG5cdFx0XHQvLyBDaGVjayBpZiB0aGlzIGlzIGFuIGVtcHR5IHRhYlxyXG5cdFx0XHRpZiAoIXRoaXMuaXNFbXB0eVRhYihsZWFmKSkge1xyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gQ2hlY2sgaWYgdGhpcyBpcyB0aGUgb25seSB0YWIgKGFsbCB0YWJzIHdlcmUgY2xvc2VkKVxyXG5cdFx0XHRjb25zdCBpc09ubHlUYWIgPSB0aGlzLmlzT25seVRhYihsZWFmKTtcclxuXHJcblx0XHRcdC8vIEhhbmRsZSBcIk9wZW4gd2hlbiBhbGwgdGFicyBhcmUgY2xvc2VkXCIgLSB3b3JrcyBpbmRlcGVuZGVudGx5IG9mIHJlcGxhY2VOZXdUYWJcclxuXHRcdFx0aWYgKGlzT25seVRhYiAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuV2hlbkFsbFRhYnNDbG9zZWQgPT09IHRydWUpIHtcclxuXHRcdFx0XHQvLyBPcGVuIGhvbWUgYmFzZSB3aGVuIGFsbCB0YWJzIGFyZSBjbG9zZWRcclxuXHRcdFx0XHR2b2lkIHRoaXMucmVwbGFjZUVtcHR5VGFiKGxlYWYsIHRydWUpOyAvLyBQYXNzIHRydWUgdG8gaW5kaWNhdGUgdGhpcyBpcyBmb3IgXCJhbGwgdGFicyBjbG9zZWRcIlxyXG5cdFx0XHRcdHJldHVybjtcclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gSGFuZGxlIFwiUmVwbGFjZSBuZXcgdGFic1wiIC0gb25seSBpZiBlbmFibGVkXHJcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTmV3VGFiICE9PSB0cnVlKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBEb3VibGUtY2hlY2sgcmVwbGFjZU5ld1RhYiBpcyBzdGlsbCB0cnVlIChpbiBjYXNlIGl0IGNoYW5nZWQgZHVyaW5nIHByb2Nlc3NpbmcpXHJcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTmV3VGFiICE9PSB0cnVlKSB7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblxyXG5cdFx0XHQvLyBIYW5kbGUgYmFzZWQgb24gbW9kZVxyXG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MubmV3VGFiTW9kZSA9PT0gJ29ubHktd2hlbi1lbXB0eScpIHtcclxuXHRcdFx0XHQvLyBPbmx5IHJlcGxhY2UgaWYgdGhpcyBpcyB0aGUgb25seSB0YWJcclxuXHRcdFx0XHRpZiAoIWlzT25seVRhYikge1xyXG5cdFx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0fVxyXG5cclxuXHRcdFx0Ly8gUmVwbGFjZSB0aGUgZW1wdHkgdGFiIHdpdGggaG9tZSBiYXNlIChmb3IgbmV3IHRhYiByZXBsYWNlbWVudClcclxuXHRcdFx0dm9pZCB0aGlzLnJlcGxhY2VFbXB0eVRhYihsZWFmLCBmYWxzZSk7IC8vIFBhc3MgZmFsc2UgdG8gaW5kaWNhdGUgdGhpcyBpcyBmb3IgXCJuZXcgdGFiIHJlcGxhY2VtZW50XCJcclxuXHRcdH0pO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogQ2hlY2sgaWYgYSBsZWFmIGlzIGFuIGVtcHR5IHRhYlxyXG5cdCAqIElNUE9SVEFOVDogT25seSByZXR1cm5zIHRydWUgaWYgdGhlIGxlYWYgaXMgdHJ1bHkgZW1wdHkgKG5vIGZpbGUgb3BlbmVkKVxyXG5cdCAqIElmIGEgZmlsZSBpcyBhbHJlYWR5IG9wZW5lZCBpbiB0aGUgbGVhZiwgaXQncyBub3QgZW1wdHkgYW5kIHNob3VsZCBOT1QgYmUgcmVwbGFjZWRcclxuXHQgKi9cclxuXHRwcml2YXRlIGlzRW1wdHlUYWIobGVhZjogV29ya3NwYWNlTGVhZik6IGJvb2xlYW4ge1xyXG5cdFx0aWYgKCFsZWFmLnZpZXcpIHJldHVybiB0cnVlO1xyXG5cdFx0XHJcblx0XHQvLyBDaGVjayBpZiB2aWV3IHR5cGUgaXMgZW1wdHlcclxuXHRcdGlmIChsZWFmLnZpZXcuZ2V0Vmlld1R5cGUoKSAhPT0gJ2VtcHR5Jykge1xyXG5cdFx0XHRyZXR1cm4gZmFsc2U7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIERvdWJsZS1jaGVjazogaWYgdGhlIHZpZXcgaGFzIGEgc3RhdGUgd2l0aCBhIGZpbGUsIGl0J3Mgbm90IGVtcHR5XHJcblx0XHQvLyBUaGlzIHByZXZlbnRzIHJlcGxhY2luZyB0YWJzIHRoYXQgd2VyZSBqdXN0IG9wZW5lZCB3aXRoIGZpbGVzIGZyb20gZXhwbG9yZXJcclxuXHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XHJcblx0XHRpZiAodmlld1N0YXRlICYmICh2aWV3U3RhdGUgYXMgeyBmaWxlPzogc3RyaW5nIH0pLmZpbGUpIHtcclxuXHRcdFx0cmV0dXJuIGZhbHNlO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRyZXR1cm4gdHJ1ZTtcclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIENoZWNrIGlmIHRoaXMgaXMgdGhlIG9ubHkgdGFiIGluIHRoZSBtYWluIHdvcmtzcGFjZVxyXG5cdCAqIE9ubHkgY291bnRzIHJvb3QgbGVhdmVzIChtYWluIHdvcmtzcGFjZSB0YWJzKSwgbm90IHNpZGViYXIgdGFic1xyXG5cdCAqIEJhc2VkIG9uIG9ic2lkaWFuLWRpc2FibGUtdGFicyBwYXR0ZXJuIHVzaW5nIGl0ZXJhdGVSb290TGVhdmVzXHJcblx0ICovXHJcblx0cHJpdmF0ZSBpc09ubHlUYWIobGVhZjogV29ya3NwYWNlTGVhZik6IGJvb2xlYW4ge1xyXG5cdFx0bGV0IHRhYkNvdW50ID0gMDtcclxuXHRcdHRoaXMuYXBwLndvcmtzcGFjZS5pdGVyYXRlUm9vdExlYXZlcygobCkgPT4ge1xyXG5cdFx0XHR0YWJDb3VudCsrO1xyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdGNvbnN0IHJlc3VsdCA9IHRhYkNvdW50ID09PSAxO1xyXG5cdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gaXNPbmx5VGFiOicsIHtcclxuXHRcdFx0bGVhZjogbGVhZixcclxuXHRcdFx0dGFiQ291bnQ6IHRhYkNvdW50LFxyXG5cdFx0XHRpc09ubHlUYWI6IHJlc3VsdFxyXG5cdFx0fSk7XHJcblx0XHRcclxuXHRcdHJldHVybiByZXN1bHQ7XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBSZXBsYWNlIGFuIGVtcHR5IHRhYiB3aXRoIHRoZSBob21lIGJhc2Ugb3IgbmV3IHRhYiBmaWxlXHJcblx0ICogQHBhcmFtIGxlYWYgVGhlIGxlYWYgdG8gcmVwbGFjZVxyXG5cdCAqIEBwYXJhbSBpc0FsbFRhYnNDbG9zZWQgV2hldGhlciB0aGlzIGlzIHRyaWdnZXJlZCBieSBcImFsbCB0YWJzIGNsb3NlZFwiICh0cnVlKSBvciBcIm5ldyB0YWIgcmVwbGFjZW1lbnRcIiAoZmFsc2UpXHJcblx0ICovXHJcblx0cHJpdmF0ZSBhc3luYyByZXBsYWNlRW1wdHlUYWIobGVhZjogV29ya3NwYWNlTGVhZiwgaXNBbGxUYWJzQ2xvc2VkOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPHZvaWQ+IHtcclxuXHRcdC8vIElmIHRoaXMgaXMgZm9yIG5ldyB0YWIgcmVwbGFjZW1lbnQgKG5vdCBhbGwgdGFicyBjbG9zZWQpLCBjaGVjayByZXBsYWNlTmV3VGFiXHJcblx0XHRpZiAoIWlzQWxsVGFic0Nsb3NlZCkge1xyXG5cdFx0XHQvLyBDUklUSUNBTDogQ2hlY2sgcmVwbGFjZU5ld1RhYiBvbmUgbW9yZSB0aW1lIGJlZm9yZSBhY3R1YWxseSByZXBsYWNpbmdcclxuXHRcdFx0Ly8gVGhpcyBwcmV2ZW50cyByYWNlIGNvbmRpdGlvbnMgd2hlcmUgdGhlIHNldHRpbmcgY2hhbmdlZCBiZXR3ZWVuIGNoZWNrc1xyXG5cdFx0XHRpZiAodGhpcy5wbHVnaW4uc2V0dGluZ3MucmVwbGFjZU5ld1RhYiAhPT0gdHJ1ZSkge1xyXG5cdFx0XHRcdGNvbnNvbGUuZGVidWcoJ1tIb21lIEJhc2VdIHJlcGxhY2VFbXB0eVRhYjogcmVwbGFjZU5ld1RhYiBpcyBub3QgdHJ1ZSwgYWJvcnRpbmcnKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBTbWFsbCBkZWxheSB0byBoYW5kbGUgcmFjZSBjb25kaXRpb25zIHdpdGggb3RoZXIgcGx1Z2luc1xyXG5cdFx0YXdhaXQgbmV3IFByb21pc2UocmVzb2x2ZSA9PiBzZXRUaW1lb3V0KHJlc29sdmUsIDUwKSk7XHJcblxyXG5cdFx0Ly8gSWYgdGhpcyBpcyBmb3IgbmV3IHRhYiByZXBsYWNlbWVudCwgY2hlY2sgYWdhaW4gYWZ0ZXIgZGVsYXlcclxuXHRcdGlmICghaXNBbGxUYWJzQ2xvc2VkKSB7XHJcblx0XHRcdC8vIEZpbmFsIGNoZWNrIGFmdGVyIGRlbGF5IC0gc2V0dGluZyBtaWdodCBoYXZlIGNoYW5nZWRcclxuXHRcdFx0aWYgKHRoaXMucGx1Z2luLnNldHRpbmdzLnJlcGxhY2VOZXdUYWIgIT09IHRydWUpIHtcclxuXHRcdFx0XHRjb25zb2xlLmRlYnVnKCdbSG9tZSBCYXNlXSByZXBsYWNlRW1wdHlUYWI6IHJlcGxhY2VOZXdUYWIgY2hhbmdlZCBkdXJpbmcgZGVsYXksIGFib3J0aW5nJyk7XHJcblx0XHRcdFx0cmV0dXJuO1xyXG5cdFx0XHR9XHJcblx0XHR9IGVsc2Uge1xyXG5cdFx0XHQvLyBJZiB0aGlzIGlzIGZvciBhbGwgdGFicyBjbG9zZWQsIGNoZWNrIHRoYXQgc2V0dGluZyBpbnN0ZWFkXHJcblx0XHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5vcGVuV2hlbkFsbFRhYnNDbG9zZWQgIT09IHRydWUpIHtcclxuXHRcdFx0XHRjb25zb2xlLmRlYnVnKCdbSG9tZSBCYXNlXSByZXBsYWNlRW1wdHlUYWI6IG9wZW5XaGVuQWxsVGFic0Nsb3NlZCBjaGFuZ2VkIGR1cmluZyBkZWxheSwgYWJvcnRpbmcnKTtcclxuXHRcdFx0XHRyZXR1cm47XHJcblx0XHRcdH1cclxuXHRcdH1cclxuXHJcblx0XHQvLyBEb3VibGUtY2hlY2sgdGhlIHRhYiBpcyBzdGlsbCBlbXB0eVxyXG5cdFx0aWYgKCF0aGlzLmlzRW1wdHlUYWIobGVhZikpIHtcclxuXHRcdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gcmVwbGFjZUVtcHR5VGFiOiBUYWIgaXMgbm8gbG9uZ2VyIGVtcHR5LCBza2lwcGluZycpO1xyXG5cdFx0XHRyZXR1cm47XHJcblx0XHR9XHJcblxyXG5cdFx0Ly8gSWYgdGhpcyBpcyBmb3IgXCJhbGwgdGFicyBjbG9zZWRcIiwgdXNlIGhvbWUgYmFzZSBzZXR0aW5nc1xyXG5cdFx0Ly8gT3RoZXJ3aXNlLCB1c2UgbmV3IHRhYiBzZXR0aW5ncyAoZm9yIFwicmVwbGFjZSBuZXcgdGFic1wiIGZlYXR1cmUpXHJcblx0XHRjb25zdCBzZXR0aW5ncyA9IGlzQWxsVGFic0Nsb3NlZCBcclxuXHRcdFx0PyB0aGlzLnBsdWdpbi5nZXRIb21lQmFzZVNldHRpbmdzKClcclxuXHRcdFx0OiB0aGlzLnBsdWdpbi5nZXROZXdUYWJTZXR0aW5ncygpO1xyXG5cdFx0XHJcblx0XHRjb25zb2xlLmRlYnVnKCdbSG9tZSBCYXNlXSByZXBsYWNlRW1wdHlUYWI6Jywge1xyXG5cdFx0XHRsZWFmOiBsZWFmLFxyXG5cdFx0XHRpc0FsbFRhYnNDbG9zZWQ6IGlzQWxsVGFic0Nsb3NlZCxcclxuXHRcdFx0c2V0dGluZ3M6IHNldHRpbmdzLFxyXG5cdFx0XHRyZXBsYWNlTmV3VGFiOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTmV3VGFiLFxyXG5cdFx0XHRuZXdUYWJNb2RlOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5uZXdUYWJNb2RlLFxyXG5cdFx0XHR1c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiOiB0aGlzLnBsdWdpbi5zZXR0aW5ncy51c2VEaWZmZXJlbnRGaWxlRm9yTmV3VGFiXHJcblx0XHR9KTtcclxuXHRcdFxyXG5cdFx0Ly8gT3BlbiBmaWxlIGluIHRoaXMgbGVhZlxyXG5cdFx0Ly8gUGFzcyBpc05ld1RhYj10cnVlIHRvIHNraXAgcGlubmluZy9naG9zdCB0YWIgbG9naWMgLSBuZXcgdGFicyBzaG91bGQgd29yayBpbmRlcGVuZGVudGx5XHJcblx0XHRjb25zdCBzdWNjZXNzID0gYXdhaXQgdGhpcy5wbHVnaW4uaG9tZVNlcnZpY2Uub3BlbkluTGVhZldpdGhTZXR0aW5ncyhsZWFmLCBzZXR0aW5ncywgdHJ1ZSk7XHJcblx0XHRcclxuXHRcdGlmICghc3VjY2Vzcykge1xyXG5cdFx0XHRjb25zb2xlLndhcm4oJ1tIb21lIEJhc2VdIEZhaWxlZCB0byBvcGVuIGZpbGU6Jywgc2V0dGluZ3MpO1xyXG5cdFx0fSBlbHNlIHtcclxuXHRcdFx0Y29uc29sZS5kZWJ1ZygnW0hvbWUgQmFzZV0gcmVwbGFjZUVtcHR5VGFiOiBTdWNjZXNzZnVsbHkgb3BlbmVkIGZpbGUnKTtcclxuXHRcdH1cclxuXHR9XHJcblxyXG5cdC8qKlxyXG5cdCAqIEZvcmNlIGNoZWNrIGZvciBlbXB0eSB3b3Jrc3BhY2UgYW5kIG9wZW4gaG9tZSBiYXNlXHJcblx0ICovXHJcblx0YXN5bmMgb3BlbklmRW1wdHkoKTogUHJvbWlzZTx2b2lkPiB7XHJcblx0XHQvLyBDaGVjayBpZiB0aGVyZSdzIGFuIGVtcHR5IHZpZXdcclxuXHRcdGNvbnN0IGFjdGl2ZVZpZXcgPSB0aGlzLmFwcC53b3Jrc3BhY2UuZ2V0QWN0aXZlVmlld09mVHlwZShWaWV3KTtcclxuXHRcdGNvbnN0IGFjdGl2ZUxlYWYgPSBhY3RpdmVWaWV3Py5sZWFmO1xyXG5cclxuXHRcdGlmICghYWN0aXZlTGVhZikgcmV0dXJuO1xyXG5cclxuXHRcdC8vIENoZWNrIGlmIGl0J3MgZW1wdHkgYW5kIGlzIHRoZSBvbmx5IHRhYlxyXG5cdFx0aWYgKHRoaXMuaXNFbXB0eVRhYihhY3RpdmVMZWFmKSAmJiB0aGlzLmlzT25seVRhYihhY3RpdmVMZWFmKSkge1xyXG5cdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5vcGVuSW5MZWFmKGFjdGl2ZUxlYWYpO1xyXG5cdFx0fVxyXG5cdH1cclxufVxyXG4iLCAiLyoqXG4gKiBTdGlja3kgVGFiIFNlcnZpY2VcbiAqIE1hbmFnZXMgdGhlIHN0aWNreSBob21lIGljb24gaW4gdGhlIHRhYiBiYXJcbiAqL1xuXG5pbXBvcnQgeyBNZW51LCBQbGF0Zm9ybSwgc2V0SWNvbiwgV29ya3NwYWNlTGVhZiB9IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB0eXBlIEhvbWVCYXNlUGx1Z2luIGZyb20gJy4uL21haW4nO1xuaW1wb3J0IHsgZ2V0RmlsZUJ5UGF0aCwgbGVhZkhhc0ZpbGUgfSBmcm9tICcuLi91dGlscy9maWxlLXV0aWxzJztcbmltcG9ydCB7IEljb25QaWNrZXIgfSBmcm9tICcuLi91aS9pY29uLXBpY2tlcic7XG5cbi8qKlxuICogQ1NTIGNsYXNzIGZvciB0aGUgc3RpY2t5IGhvbWUgaWNvbiBjb250YWluZXJcbiAqL1xuY29uc3QgU1RJQ0tZX0lDT05fQ0xBU1MgPSAnaG9tZS1iYXNlLXN0aWNreS1pY29uJztcbmNvbnN0IFNUSUNLWV9JQ09OX0FDVElWRV9DTEFTUyA9ICdob21lLWJhc2Utc3RpY2t5LWljb24tYWN0aXZlJztcblxuLyoqXG4gKiBFeHRlbmRlZCBIVE1MRWxlbWVudCBpbnRlcmZhY2UgZm9yIHN0aWNreSBpY29uIHdpdGggY3VzdG9tIHByb3BlcnRpZXNcbiAqL1xuaW50ZXJmYWNlIFN0aWNreUljb25FbGVtZW50IGV4dGVuZHMgSFRNTEVsZW1lbnQge1xuXHRfY2hlY2tJbnRlcnZhbD86IFJldHVyblR5cGU8dHlwZW9mIHNldEludGVydmFsPjtcblx0X2NvbnRhaW5lck9ic2VydmVyPzogTXV0YXRpb25PYnNlcnZlcjtcbn1cblxuLyoqXG4gKiBFeHRlbmRlZCBIVE1MRWxlbWVudCBpbnRlcmZhY2UgZm9yIHRhYiBoZWFkZXIgd2l0aCBob21lIGJhc2UgcHJvcGVydGllc1xuICovXG5pbnRlcmZhY2UgVGFiSGVhZGVyRWxlbWVudCBleHRlbmRzIEhUTUxFbGVtZW50IHtcblx0X2hvbWVCYXNlUGFyZW50PzogSFRNTEVsZW1lbnQ7XG5cdF9ob21lQmFzZU5leHRTaWJsaW5nPzogTm9kZSB8IG51bGw7XG59XG5cbmV4cG9ydCBjbGFzcyBTdGlja3lUYWJTZXJ2aWNlIHtcblx0cHJpdmF0ZSBwbHVnaW46IEhvbWVCYXNlUGx1Z2luO1xuXHRwcml2YXRlIHN0aWNreUljb25FbDogU3RpY2t5SWNvbkVsZW1lbnQgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSBsYXlvdXRDaGFuZ2VIYW5kbGVyOiAoKCkgPT4gdm9pZCkgfCBudWxsID0gbnVsbDtcblx0cHJpdmF0ZSB0YWJIZWFkZXJVcGRhdGVUaW1lb3V0OiBSZXR1cm5UeXBlPHR5cGVvZiBzZXRUaW1lb3V0PiB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIHNpZGViYXJPYnNlcnZlcjogTXV0YXRpb25PYnNlcnZlciB8IG51bGwgPSBudWxsO1xuXHRwcml2YXRlIHRhYkhlYWRlck9ic2VydmVyOiBNdXRhdGlvbk9ic2VydmVyIHwgbnVsbCA9IG51bGw7XG5cblx0Y29uc3RydWN0b3IocGx1Z2luOiBIb21lQmFzZVBsdWdpbikge1xuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSB0aGUgc3RpY2t5IHRhYiBpY29uIGJhc2VkIG9uIHNldHRpbmdzXG5cdCAqL1xuXHR1cGRhdGUoKTogdm9pZCB7XG5cdFx0Ly8gT25seSBzaG93IG9uIGRlc2t0b3Bcblx0XHRpZiAoUGxhdGZvcm0uaXNNb2JpbGUpIHtcblx0XHRcdHRoaXMucmVtb3ZlKCk7XG5cdFx0XHR0aGlzLnVwZGF0ZVRhYkhlYWRlcnMoKTsgLy8gQ2xlYW4gdXAgdGFiIGhlYWRlcnNcblx0XHRcdHRoaXMudXBkYXRlV29ya3NwYWNlQ2xhc3MoZmFsc2UpO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcblx0XHRcdGlmICh0aGlzLnN0aWNreUljb25FbCkge1xuXHRcdFx0XHQvLyBJY29uIGFscmVhZHkgZXhpc3RzLCBqdXN0IHVwZGF0ZSB0aGUgaWNvblxuXHRcdFx0XHRjb25zdCBpY29uTmFtZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnN0aWNreUljb25OYW1lIHx8ICdob21lJztcblx0XHRcdFx0c2V0SWNvbih0aGlzLnN0aWNreUljb25FbCwgaWNvbk5hbWUpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0Ly8gSWNvbiBkb2Vzbid0IGV4aXN0LCBjcmVhdGUgaXRcblx0XHRcdFx0dGhpcy5jcmVhdGUoKTtcblx0XHRcdH1cblx0XHRcdHRoaXMudXBkYXRlV29ya3NwYWNlQ2xhc3ModHJ1ZSk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdHRoaXMucmVtb3ZlKCk7XG5cdFx0XHR0aGlzLnVwZGF0ZVRhYkhlYWRlcnMoKTsgLy8gQ2xlYW4gdXAgdGFiIGhlYWRlcnMgd2hlbiByZW1vdmluZyBpY29uXG5cdFx0XHR0aGlzLnVwZGF0ZVdvcmtzcGFjZUNsYXNzKGZhbHNlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQWRkL3JlbW92ZSBDU1MgY2xhc3Mgb24gd29ya3NwYWNlIHRvIGNvbmRpdGlvbmFsbHkgYXBwbHkgc3R5bGVzXG5cdCAqL1xuXHRwcml2YXRlIHVwZGF0ZVdvcmtzcGFjZUNsYXNzKGVuYWJsZWQ6IGJvb2xlYW4pOiB2b2lkIHtcblx0XHRjb25zdCBtYWluV29ya3NwYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1zcGxpdC5tb2QtdmVydGljYWwubW9kLXJvb3QnKTtcblx0XHRpZiAoIW1haW5Xb3Jrc3BhY2UpIHJldHVybjtcblxuXHRcdGlmIChlbmFibGVkKSB7XG5cdFx0XHRtYWluV29ya3NwYWNlLmNsYXNzTGlzdC5hZGQoJ2hvbWUtYmFzZS1zdGlja3ktaWNvbi1lbmFibGVkJyk7XG5cdFx0fSBlbHNlIHtcblx0XHRcdG1haW5Xb3Jrc3BhY2UuY2xhc3NMaXN0LnJlbW92ZSgnaG9tZS1iYXNlLXN0aWNreS1pY29uLWVuYWJsZWQnKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQ3JlYXRlIHRoZSBzdGlja3kgaG9tZSBpY29uXG5cdCAqL1xuXHRwcml2YXRlIGNyZWF0ZSgpOiB2b2lkIHtcblx0XHQvLyBSZW1vdmUgZXhpc3RpbmcgaWNvbiBmaXJzdFxuXHRcdHRoaXMucmVtb3ZlKCk7XG5cblx0XHQvLyBDcmVhdGUgdGhlIHN0aWNreSBpY29uIGVsZW1lbnQgb25jZVxuXHRcdHRoaXMuc3RpY2t5SWNvbkVsID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnZGl2Jyk7XG5cdFx0dGhpcy5zdGlja3lJY29uRWwuY2xhc3NOYW1lID0gYCR7U1RJQ0tZX0lDT05fQ0xBU1N9IGNsaWNrYWJsZS1pY29uYDtcblx0XHR0aGlzLnN0aWNreUljb25FbC5zZXRBdHRyaWJ1dGUoJ2FyaWEtbGFiZWwnLCAnT3BlbiBob21lIGJhc2UnKTtcblx0XHR0aGlzLnN0aWNreUljb25FbC5zZXRBdHRyaWJ1dGUoJ2RhdGEtdG9vbHRpcC1wb3NpdGlvbicsICdib3R0b20nKTtcblxuXHRcdC8vIEFkZCB0aGUgaWNvbiBmcm9tIHNldHRpbmdzIChkZWZhdWx0IHRvICdob21lJylcblx0XHRjb25zdCBpY29uTmFtZSA9IHRoaXMucGx1Z2luLnNldHRpbmdzLnN0aWNreUljb25OYW1lIHx8ICdob21lJztcblx0XHRzZXRJY29uKHRoaXMuc3RpY2t5SWNvbkVsLCBpY29uTmFtZSk7XG5cblx0XHQvLyBBZGQgY2xpY2sgaGFuZGxlclxuXHRcdHRoaXMuc3RpY2t5SWNvbkVsLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGUpID0+IHtcblx0XHRcdGUucHJldmVudERlZmF1bHQoKTtcblx0XHRcdGUuc3RvcFByb3BhZ2F0aW9uKCk7XG5cdFx0XHRcblx0XHRcdC8vIE9wZW4gaG9tZSBiYXNlIGluIGdob3N0IHRhYiAoYWx3YXlzIHVzZSBnaG9zdCB0YWIgZm9yIHN0aWNreSBpY29uKVxuXHRcdFx0dm9pZCB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5vcGVuSG9tZUJhc2VJbkdob3N0VGFiKHtcblx0XHRcdFx0cnVuQ29tbWFuZDogdHJ1ZSxcblx0XHRcdH0pLnRoZW4oKCkgPT4ge1xuXHRcdFx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgYWZ0ZXIgb3BlbmluZywgd2l0aCBhIHNsaWdodCBkZWxheSB0byBsZXQgYW5pbWF0aW9ucyBjb21wbGV0ZVxuXHRcdFx0XHRzZXRUaW1lb3V0KCgpID0+IHtcblx0XHRcdFx0XHR0aGlzLnVwZGF0ZVRhYkhlYWRlcnMoKTtcblx0XHRcdFx0fSwgMTUwKTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXG5cdFx0Ly8gQWRkIGNvbnRleHQgbWVudSBmb3IgY2hhbmdpbmcgaWNvbiBhbmQgY2xvc2luZyBob21lIGJhc2Vcblx0XHR0aGlzLnN0aWNreUljb25FbC5hZGRFdmVudExpc3RlbmVyKCdjb250ZXh0bWVudScsIChlKSA9PiB7XG5cdFx0XHRlLnByZXZlbnREZWZhdWx0KCk7XG5cdFx0XHRlLnN0b3BQcm9wYWdhdGlvbigpO1xuXHRcdFx0XG5cdFx0XHRjb25zdCBtZW51ID0gbmV3IE1lbnUoKTtcblx0XHRcdFxuXHRcdFx0Ly8gQWRkIENsb3NlIGhvbWUgYmFzZSBvcHRpb24gKGZpcnN0KVxuXHRcdFx0bWVudS5hZGRJdGVtKChpdGVtKSA9PiB7XG5cdFx0XHRcdGl0ZW1cblx0XHRcdFx0XHQuc2V0VGl0bGUoJ0Nsb3NlIGhvbWUgYmFzZScpXG5cdFx0XHRcdFx0LnNldEljb24oJ3gnKVxuXHRcdFx0XHRcdC5vbkNsaWNrKCgpID0+IHtcblx0XHRcdFx0XHRcdC8vIEFjdHVhbGx5IGNsb3NlIGl0IChpbmNsdWRpbmcgZ2hvc3QgdGFiIGlmIHN0aWNreSBpY29uIGlzIGVuYWJsZWQpXG5cdFx0XHRcdFx0XHQvLyBJZiBuZXcgdGFiIHJlcGxhY2VtZW50IGlzIGVuYWJsZWQsIGl0IHdpbGwgcmVvcGVuIHdoZW4geW91IGNyZWF0ZSBhIG5ldyB0YWJcblx0XHRcdFx0XHRcdHZvaWQgdGhpcy5jbG9zZUhvbWVCYXNlKHRydWUpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0XHRcblx0XHRcdC8vIEFkZCBDaGFuZ2UgaWNvbiBvcHRpb24gKHNlY29uZClcblx0XHRcdG1lbnUuYWRkSXRlbSgoaXRlbSkgPT4ge1xuXHRcdFx0XHRpdGVtXG5cdFx0XHRcdFx0LnNldFRpdGxlKCdDaGFuZ2UgaWNvbicpXG5cdFx0XHRcdFx0LnNldEljb24oJ2x1Y2lkZS1pbWFnZS1wbHVzJylcblx0XHRcdFx0XHQub25DbGljaygoKSA9PiB7XG5cdFx0XHRcdFx0XHRjb25zdCBwaWNrZXIgPSBuZXcgSWNvblBpY2tlcihcblx0XHRcdFx0XHRcdFx0dGhpcy5wbHVnaW4uYXBwLFxuXHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGlja3lJY29uTmFtZSxcblx0XHRcdFx0XHRcdFx0KGljb246IHN0cmluZyB8IG51bGwpID0+IHtcblx0XHRcdFx0XHRcdFx0XHR2b2lkIChhc3luYyAoKSA9PiB7XG5cdFx0XHRcdFx0XHRcdFx0XHR0aGlzLnBsdWdpbi5zZXR0aW5ncy5zdGlja3lJY29uTmFtZSA9IGljb247XG5cdFx0XHRcdFx0XHRcdFx0XHRhd2FpdCB0aGlzLnBsdWdpbi5zYXZlU2V0dGluZ3MoKTtcblx0XHRcdFx0XHRcdFx0XHRcdC8vIFVwZGF0ZSB0aGUgaWNvbiBkaXNwbGF5XG5cdFx0XHRcdFx0XHRcdFx0XHRpZiAodGhpcy5zdGlja3lJY29uRWwpIHtcblx0XHRcdFx0XHRcdFx0XHRcdFx0c2V0SWNvbih0aGlzLnN0aWNreUljb25FbCwgaWNvbiB8fCAnaG9tZScpO1xuXHRcdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHRcdH0pKCk7XG5cdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdCk7XG5cdFx0XHRcdFx0XHRwaWNrZXIub3BlbigpO1xuXHRcdFx0XHRcdH0pO1xuXHRcdFx0fSk7XG5cdFx0XHRtZW51LnNob3dBdE1vdXNlRXZlbnQoZSk7XG5cdFx0fSk7XG5cblx0XHQvLyBGdW5jdGlvbiB0byBlbnN1cmUgaWNvbiBpcyBpbiB0aGUgcmlnaHQgcGxhY2Vcblx0XHQvLyBJbnNlcnQgaXQgaW50byB0aGUgd29ya3NwYWNlLXRhYi1oZWFkZXItY29udGFpbmVyLWlubmVyIHNvIGl0J3MgcGFydCBvZiB0aGUgdGFiIGJhciBzdHJ1Y3R1cmVcblx0XHQvLyBUaGlzIG1ha2VzIGl0IGF1dG9tYXRpY2FsbHkgaGlkZSB3aGVuIHBsdWdpbnMvdGhlbWVzIGhpZGUgdGhlIHRhYiBiYXJcblx0XHRjb25zdCBlbnN1cmVJY29uSW5QbGFjZSA9ICgpID0+IHtcblx0XHRcdGlmICghdGhpcy5zdGlja3lJY29uRWwpIHJldHVybjtcblxuXHRcdFx0Y29uc3QgbWFpbldvcmtzcGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXZlcnRpY2FsLm1vZC1yb290Jyk7XG5cdFx0XHRpZiAoIW1haW5Xb3Jrc3BhY2UpIHJldHVybjtcblxuXHRcdFx0Ly8gRmluZCB0aGUgd29ya3NwYWNlLXRhYi1oZWFkZXItY29udGFpbmVyLWlubmVyIChpbnNpZGUgdGhlIHRhYiBjb250YWluZXIpXG5cdFx0XHRjb25zdCB0YWJIZWFkZXJDb250YWluZXJJbm5lciA9IG1haW5Xb3Jrc3BhY2UucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lcicpO1xuXHRcdFx0aWYgKCF0YWJIZWFkZXJDb250YWluZXJJbm5lcikgcmV0dXJuO1xuXG5cdFx0XHQvLyBSZW1vdmUgYW55IGR1cGxpY2F0ZSBpY29ucyBmaXJzdCAoaW4gY2FzZSBtdXRhdGlvbiBvYnNlcnZlciBvciBvdGhlciBjb2RlIGNyZWF0ZWQgdGhlbSlcblx0XHRcdGNvbnN0IGFsbEljb25zID0gdGFiSGVhZGVyQ29udGFpbmVySW5uZXIucXVlcnlTZWxlY3RvckFsbChgLiR7U1RJQ0tZX0lDT05fQ0xBU1N9YCk7XG5cdFx0XHRhbGxJY29ucy5mb3JFYWNoKChpY29uKSA9PiB7XG5cdFx0XHRcdGlmIChpY29uICE9PSB0aGlzLnN0aWNreUljb25FbCkge1xuXHRcdFx0XHRcdGljb24ucmVtb3ZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXG5cdFx0XHQvLyBDaGVjayBpZiBvdXIgaWNvbiBpcyBhbHJlYWR5IGluIHRoZSBjb250YWluZXJcblx0XHRcdGlmICh0YWJIZWFkZXJDb250YWluZXJJbm5lci5jb250YWlucyh0aGlzLnN0aWNreUljb25FbCkpIHtcblx0XHRcdFx0Ly8gQWxyZWFkeSBpbiBwbGFjZSwgbm90aGluZyB0byBkb1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdC8vIEljb24gaXMgbWlzc2luZyAtIHByZXBlbmQgaXQgdG8gdGhlIHRhYiBoZWFkZXIgY29udGFpbmVyIGlubmVyXG5cdFx0XHQvLyBUaGlzIG1ha2VzIGl0IHBhcnQgb2YgdGhlIHRhYiBiYXIgc3RydWN0dXJlLCBzbyBpdCBoaWRlcyBhdXRvbWF0aWNhbGx5IHdoZW4gdGFicyBhcmUgaGlkZGVuXG5cdFx0XHR0YWJIZWFkZXJDb250YWluZXJJbm5lci5pbnNlcnRCZWZvcmUodGhpcy5zdGlja3lJY29uRWwsIHRhYkhlYWRlckNvbnRhaW5lcklubmVyLmZpcnN0Q2hpbGQpO1xuXG5cdFx0XHQvLyBVcGRhdGUgYWN0aXZlIHN0YXRlIGFmdGVyIGluc2VydGlvblxuXHRcdFx0dGhpcy51cGRhdGVBY3RpdmVTdGF0ZSgpO1xuXHRcdFx0XG5cdFx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgd2hlbiBpY29uIGlzIGNyZWF0ZWRcblx0XHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpO1xuXHRcdFx0XG5cdFx0XHQvLyBFbnN1cmUgd29ya3NwYWNlIGNsYXNzIGlzIHNldFxuXHRcdFx0dGhpcy51cGRhdGVXb3Jrc3BhY2VDbGFzcyh0cnVlKTtcblx0XHRcdFxuXHRcdFx0Ly8gVXBkYXRlIGljb24gcG9zaXRpb24gYmFzZWQgb24gc2lkZWJhciBzdGF0ZVxuXHRcdFx0dGhpcy51cGRhdGVJY29uUG9zaXRpb25Gb3JTaWRlYmFyKCk7XG5cdFx0XHRcblx0XHRcdC8vIFdhdGNoIGZvciBzaWRlYmFyIGNvbGxhcHNlL2V4cGFuZCBjaGFuZ2VzXG5cdFx0XHR0aGlzLndhdGNoU2lkZWJhclN0YXRlKCk7XG5cdFx0fTtcblxuXHRcdC8vIFRyeSB0byBpbnNlcnQgaW1tZWRpYXRlbHlcblx0XHRlbnN1cmVJY29uSW5QbGFjZSgpO1xuXG5cdFx0Ly8gU2V0IHVwIGEgcmVsaWFibGUgY2hlY2sgdGhhdCBydW5zIHBlcmlvZGljYWxseSB0byBlbnN1cmUgaWNvbiBpcyBhbHdheXMgdGhlcmVcblx0XHQvLyBUaGlzIGlzIHNpbXBsZSBhbmQgcmVsaWFibGUgLSBqdXN0IGNoZWNrIGlmIGl0J3MgdGhlcmUsIGlmIG5vdCwgcHV0IGl0IGJhY2tcblx0XHRjb25zdCBjaGVja0ludGVydmFsID0gc2V0SW50ZXJ2YWwoKCkgPT4ge1xuXHRcdFx0aWYgKCF0aGlzLnN0aWNreUljb25FbCB8fCAhdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uKSB7XG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwoY2hlY2tJbnRlcnZhbCk7XG5cdFx0XHRcdHJldHVybjtcblx0XHRcdH1cblx0XHRcdGVuc3VyZUljb25JblBsYWNlKCk7XG5cdFx0fSwgMTAwKTsgLy8gQ2hlY2sgZXZlcnkgMTAwbXMgLSBtb3JlIGZyZXF1ZW50IHRvIGNhdGNoIGNvbnRhaW5lciByZWNyZWF0aW9uIGltbWVkaWF0ZWx5XG5cblx0XHQvLyBTdG9yZSBpbnRlcnZhbCBzbyB3ZSBjYW4gY2xlYXIgaXQgbGF0ZXJcblx0XHR0aGlzLnN0aWNreUljb25FbC5fY2hlY2tJbnRlcnZhbCA9IGNoZWNrSW50ZXJ2YWw7XG5cblx0XHQvLyBBbHNvIGNoZWNrIG9uIGxheW91dCBjaGFuZ2VzIC0gYnV0IGRvIGl0IGltbWVkaWF0ZWx5LCBubyBkZWxheVxuXHRcdGlmICghdGhpcy5sYXlvdXRDaGFuZ2VIYW5kbGVyKSB7XG5cdFx0XHR0aGlzLmxheW91dENoYW5nZUhhbmRsZXIgPSAoKSA9PiB7XG5cdFx0XHRcdGlmICh0aGlzLnN0aWNreUljb25FbCAmJiB0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcblx0XHRcdFx0XHQvLyBDaGVjayBpbW1lZGlhdGVseSAtIGRvbid0IHdhaXQgZm9yIGxheW91dCB0byBzZXR0bGVcblx0XHRcdFx0XHQvLyBUaGlzIHByZXZlbnRzIGZsaWNrZXJpbmcgd2hlbiB0YWJzIGNsb3NlXG5cdFx0XHRcdFx0ZW5zdXJlSWNvbkluUGxhY2UoKTtcblx0XHRcdFx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgb24gbGF5b3V0IGNoYW5nZVxuXHRcdFx0XHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpO1xuXHRcdFx0XHR9XG5cdFx0XHR9O1xuXG5cdFx0XHR0aGlzLnBsdWdpbi5yZWdpc3RlckV2ZW50KFxuXHRcdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLm9uKCdsYXlvdXQtY2hhbmdlJywgdGhpcy5sYXlvdXRDaGFuZ2VIYW5kbGVyKVxuXHRcdFx0KTtcblx0XHR9XG5cblx0XHQvLyBBbHNvIHdhdGNoIGZvciB3aGVuIHdvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lciBpcyBhZGRlZCBiYWNrIChhZnRlciBhbGwgdGFicyBjbG9zZWQpXG5cdFx0Ly8gVXNlIGEgTXV0YXRpb25PYnNlcnZlciBvbiB0aGUgd29ya3NwYWNlIHNwbGl0IHRvIGNhdGNoIGNvbnRhaW5lciByZWNyZWF0aW9uXG5cdFx0Y29uc3QgbWFpbldvcmtzcGFjZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2Utc3BsaXQubW9kLXZlcnRpY2FsLm1vZC1yb290Jyk7XG5cdFx0aWYgKG1haW5Xb3Jrc3BhY2UpIHtcblx0XHRcdGNvbnN0IGNvbnRhaW5lck9ic2VydmVyID0gbmV3IE11dGF0aW9uT2JzZXJ2ZXIoKCkgPT4ge1xuXHRcdFx0XHRpZiAoIXRoaXMuc3RpY2t5SWNvbkVsIHx8ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHJldHVybjtcblx0XHRcdFx0XG5cdFx0XHRcdC8vIENoZWNrIGlmIHRhYiBoZWFkZXIgY29udGFpbmVyIGlubmVyIGV4aXN0cyBhbmQgaWNvbiBpcyBtaXNzaW5nXG5cdFx0XHRcdGNvbnN0IHRhYkhlYWRlckNvbnRhaW5lcklubmVyID0gbWFpbldvcmtzcGFjZS5xdWVyeVNlbGVjdG9yKCcud29ya3NwYWNlLXRhYi1oZWFkZXItY29udGFpbmVyLWlubmVyJyk7XG5cdFx0XHRcdGlmICh0YWJIZWFkZXJDb250YWluZXJJbm5lcikge1xuXHRcdFx0XHRcdC8vIFJlbW92ZSBhbnkgZHVwbGljYXRlIGljb25zIGZpcnN0XG5cdFx0XHRcdFx0Y29uc3QgYWxsSWNvbnMgPSB0YWJIZWFkZXJDb250YWluZXJJbm5lci5xdWVyeVNlbGVjdG9yQWxsKGAuJHtTVElDS1lfSUNPTl9DTEFTU31gKTtcblx0XHRcdFx0XHRhbGxJY29ucy5mb3JFYWNoKChpY29uKSA9PiB7XG5cdFx0XHRcdFx0XHRpZiAoaWNvbiAhPT0gdGhpcy5zdGlja3lJY29uRWwpIHtcblx0XHRcdFx0XHRcdFx0aWNvbi5yZW1vdmUoKTtcblx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHR9KTtcblxuXHRcdFx0XHRcdC8vIE9ubHkgcmUtaW5zZXJ0IGlmIG91ciBpY29uIGlzIG5vdCBhbHJlYWR5IGluIHRoZSBjb250YWluZXJcblx0XHRcdFx0XHRpZiAoIXRhYkhlYWRlckNvbnRhaW5lcklubmVyLmNvbnRhaW5zKHRoaXMuc3RpY2t5SWNvbkVsKSkge1xuXHRcdFx0XHRcdFx0Ly8gQ29udGFpbmVyIGV4aXN0cyBidXQgaWNvbiBpcyBtaXNzaW5nIC0gcmUtaW5zZXJ0IGltbWVkaWF0ZWx5XG5cdFx0XHRcdFx0XHR0YWJIZWFkZXJDb250YWluZXJJbm5lci5pbnNlcnRCZWZvcmUodGhpcy5zdGlja3lJY29uRWwsIHRhYkhlYWRlckNvbnRhaW5lcklubmVyLmZpcnN0Q2hpbGQpO1xuXHRcdFx0XHRcdFx0dGhpcy51cGRhdGVBY3RpdmVTdGF0ZSgpO1xuXHRcdFx0XHRcdH1cblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cblx0XHRcdGNvbnRhaW5lck9ic2VydmVyLm9ic2VydmUobWFpbldvcmtzcGFjZSwge1xuXHRcdFx0XHRjaGlsZExpc3Q6IHRydWUsXG5cdFx0XHRcdHN1YnRyZWU6IHRydWUsIC8vIFdhdGNoIHN1YnRyZWUgdG8gY2F0Y2ggdGFiIGNvbnRhaW5lciByZWNyZWF0aW9uXG5cdFx0XHR9KTtcblxuXHRcdFx0Ly8gU3RvcmUgb2JzZXJ2ZXIgc28gd2UgY2FuIGNsZWFuIGl0IHVwXG5cdFx0XHR0aGlzLnN0aWNreUljb25FbC5fY29udGFpbmVyT2JzZXJ2ZXIgPSBjb250YWluZXJPYnNlcnZlcjtcblx0XHR9XG5cblx0XHQvLyBTZXQgdXAgTXV0YXRpb25PYnNlcnZlciB0byB3YXRjaCBmb3IgbmV3IHRhYiBoZWFkZXJzIGFuZCByZW1vdmUgZ2hvc3QgdGFicyBpbW1lZGlhdGVseVxuXHRcdHRoaXMuc2V0dXBUYWJIZWFkZXJPYnNlcnZlcigpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFNldCB1cCBNdXRhdGlvbk9ic2VydmVyIHRvIHdhdGNoIGZvciB0YWIgaGVhZGVyIGNoYW5nZXMgYW5kIHJlbW92ZSBnaG9zdCB0YWJzIGltbWVkaWF0ZWx5XG5cdCAqIFRoaXMgcHJldmVudHMgdGhlIGZsYXNoIHdoZW4gdGFicyBhcmUgb3BlbmVkL2Nsb3NlZFxuXHQgKi9cblx0cHJpdmF0ZSBzZXR1cFRhYkhlYWRlck9ic2VydmVyKCk6IHZvaWQge1xuXHRcdGlmICh0aGlzLnRhYkhlYWRlck9ic2VydmVyKSB7XG5cdFx0XHRyZXR1cm47IC8vIEFscmVhZHkgc2V0IHVwXG5cdFx0fVxuXG5cdFx0Ly8gRmluZCBhbGwgdGFiIGhlYWRlciBjb250YWluZXJzXG5cdFx0Y29uc3QgdGFiQ29udGFpbmVycyA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy53b3Jrc3BhY2UtdGFiLWhlYWRlci1jb250YWluZXItaW5uZXInKTtcblx0XHRcblx0XHRpZiAodGFiQ29udGFpbmVycy5sZW5ndGggPT09IDApIHtcblx0XHRcdC8vIFRyeSBhZ2FpbiBhZnRlciBhIHNob3J0IGRlbGF5IGlmIGNvbnRhaW5lcnMgZG9uJ3QgZXhpc3QgeWV0XG5cdFx0XHRzZXRUaW1lb3V0KCgpID0+IHRoaXMuc2V0dXBUYWJIZWFkZXJPYnNlcnZlcigpLCAxMDApO1xuXHRcdFx0cmV0dXJuO1xuXHRcdH1cblxuXHRcdHRoaXMudGFiSGVhZGVyT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigobXV0YXRpb25zKSA9PiB7XG5cdFx0XHQvLyBPbmx5IHByb2Nlc3MgaWYgc2V0dGluZ3MgYXJlIGVuYWJsZWRcblx0XHRcdGlmICghdGhpcy5wbHVnaW4uc2V0dGluZ3Muc2hvd1N0aWNreUhvbWVJY29uIHx8ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5oaWRlSG9tZVRhYkhlYWRlcikge1xuXHRcdFx0XHRyZXR1cm47XG5cdFx0XHR9XG5cblx0XHRcdGNvbnN0IGhvbWVCYXNlUGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmhvbWVCYXNlUGF0aDtcblx0XHRcdGlmICghaG9tZUJhc2VQYXRoKSByZXR1cm47XG5cblx0XHRcdC8vIENoZWNrIGlmIGFueSBuZXcgdGFiIGhlYWRlcnMgd2VyZSBhZGRlZFxuXHRcdFx0bGV0IGhhc05ld0hlYWRlcnMgPSBmYWxzZTtcblx0XHRcdGZvciAoY29uc3QgbXV0YXRpb24gb2YgbXV0YXRpb25zKSB7XG5cdFx0XHRcdGlmIChtdXRhdGlvbi50eXBlID09PSAnY2hpbGRMaXN0JyAmJiBtdXRhdGlvbi5hZGRlZE5vZGVzLmxlbmd0aCA+IDApIHtcblx0XHRcdFx0XHRmb3IgKGNvbnN0IG5vZGUgb2YgQXJyYXkuZnJvbShtdXRhdGlvbi5hZGRlZE5vZGVzKSkge1xuXHRcdFx0XHRcdFx0aWYgKG5vZGUgaW5zdGFuY2VvZiBIVE1MRWxlbWVudCAmJiBub2RlLmNsYXNzTGlzdC5jb250YWlucygnd29ya3NwYWNlLXRhYi1oZWFkZXInKSkge1xuXHRcdFx0XHRcdFx0XHRoYXNOZXdIZWFkZXJzID0gdHJ1ZTtcblx0XHRcdFx0XHRcdFx0YnJlYWs7XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9XG5cdFx0XHRcdGlmIChoYXNOZXdIZWFkZXJzKSBicmVhaztcblx0XHRcdH1cblxuXHRcdFx0aWYgKGhhc05ld0hlYWRlcnMpIHtcblx0XHRcdFx0Ly8gSW1tZWRpYXRlbHkgcmVtb3ZlIGFueSBnaG9zdCB0YWIgaGVhZGVycyB0aGF0IGFwcGVhcmVkXG5cdFx0XHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xuXHRcdFx0XHRcdGNvbnN0IGlzSG9tZUJhc2UgPSBsZWFmSGFzRmlsZShsZWFmLCBob21lQmFzZVBhdGgpO1xuXHRcdFx0XHRcdGlmICghaXNIb21lQmFzZSkgcmV0dXJuO1xuXHRcdFx0XHRcdFxuXHRcdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XG5cdFx0XHRcdFx0Y29uc3QgaXNHaG9zdFRhYiA9IHZpZXdTdGF0ZS5waW5uZWQgPT09IHRydWUgJiYgaXNIb21lQmFzZTtcblx0XHRcdFx0XHRcblx0XHRcdFx0XHRpZiAoaXNHaG9zdFRhYikge1xuXHRcdFx0XHRcdFx0Y29uc3QgdGFiSGVhZGVyID0gdGhpcy5nZXRUYWJIZWFkZXJGb3JMZWFmKGxlYWYpO1xuXHRcdFx0XHRcdFx0aWYgKHRhYkhlYWRlciAmJiB0YWJIZWFkZXIucGFyZW50RWxlbWVudCkge1xuXHRcdFx0XHRcdFx0XHRjb25zdCBwYXJlbnQgPSB0YWJIZWFkZXIucGFyZW50RWxlbWVudDtcblx0XHRcdFx0XHRcdFx0aWYgKHBhcmVudCAmJiBwYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd3b3Jrc3BhY2UtdGFiLWhlYWRlci1jb250YWluZXItaW5uZXInKSkge1xuXHRcdFx0XHRcdFx0XHRcdGNvbnN0IHRhYkhlYWRlckV4dGVuZGVkID0gdGFiSGVhZGVyIGFzIFRhYkhlYWRlckVsZW1lbnQ7XG5cdFx0XHRcdFx0XHRcdFx0Ly8gT25seSByZW1vdmUgaWYgbm90IGFscmVhZHkgcmVtb3ZlZFxuXHRcdFx0XHRcdFx0XHRcdGlmIChwYXJlbnQuY29udGFpbnModGFiSGVhZGVyKSkge1xuXHRcdFx0XHRcdFx0XHRcdFx0dGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50ID0gcGFyZW50O1xuXHRcdFx0XHRcdFx0XHRcdFx0dGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlTmV4dFNpYmxpbmcgPSB0YWJIZWFkZXIubmV4dFNpYmxpbmc7XG5cdFx0XHRcdFx0XHRcdFx0XHR0YWJIZWFkZXIucmVtb3ZlKCk7XG5cdFx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0XHR9XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9KTtcblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIE9ic2VydmUgYWxsIHRhYiBoZWFkZXIgY29udGFpbmVyc1xuXHRcdHRhYkNvbnRhaW5lcnMuZm9yRWFjaCgoY29udGFpbmVyKSA9PiB7XG5cdFx0XHR0aGlzLnRhYkhlYWRlck9ic2VydmVyPy5vYnNlcnZlKGNvbnRhaW5lciwge1xuXHRcdFx0XHRjaGlsZExpc3Q6IHRydWUsXG5cdFx0XHRcdHN1YnRyZWU6IGZhbHNlXG5cdFx0XHR9KTtcblx0XHR9KTtcblxuXHRcdC8vIEFsc28gd2F0Y2ggZm9yIG5ldyBjb250YWluZXJzIGJlaW5nIGFkZGVkXG5cdFx0Y29uc3Qgd29ya3NwYWNlT2JzZXJ2ZXIgPSBuZXcgTXV0YXRpb25PYnNlcnZlcigoKSA9PiB7XG5cdFx0XHRjb25zdCBuZXdDb250YWluZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLndvcmtzcGFjZS10YWItaGVhZGVyLWNvbnRhaW5lci1pbm5lcicpO1xuXHRcdFx0bmV3Q29udGFpbmVycy5mb3JFYWNoKChjb250YWluZXIpID0+IHtcblx0XHRcdFx0aWYgKHRoaXMudGFiSGVhZGVyT2JzZXJ2ZXIpIHtcblx0XHRcdFx0XHQvLyBSZS1vYnNlcnZlIHRvIGNhdGNoIG5ldyBjb250YWluZXJzXG5cdFx0XHRcdFx0dGhpcy50YWJIZWFkZXJPYnNlcnZlci5vYnNlcnZlKGNvbnRhaW5lciwge1xuXHRcdFx0XHRcdFx0Y2hpbGRMaXN0OiB0cnVlLFxuXHRcdFx0XHRcdFx0c3VidHJlZTogZmFsc2Vcblx0XHRcdFx0XHR9KTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0fSk7XG5cblx0XHRjb25zdCBtYWluV29ya3NwYWNlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1zcGxpdC5tb2QtdmVydGljYWwubW9kLXJvb3QnKTtcblx0XHRpZiAobWFpbldvcmtzcGFjZSkge1xuXHRcdFx0d29ya3NwYWNlT2JzZXJ2ZXIub2JzZXJ2ZShtYWluV29ya3NwYWNlLCB7XG5cdFx0XHRcdGNoaWxkTGlzdDogdHJ1ZSxcblx0XHRcdFx0c3VidHJlZTogdHJ1ZVxuXHRcdFx0fSk7XG5cdFx0fVxuXHR9XG5cblx0LyoqXG5cdCAqIFJlbW92ZSB0aGUgc3RpY2t5IGhvbWUgaWNvblxuXHQgKi9cblx0cmVtb3ZlKCk6IHZvaWQge1xuXHRcdC8vIENsZWFyIGFueSBwZW5kaW5nIHRhYiBoZWFkZXIgdXBkYXRlc1xuXHRcdGlmICh0aGlzLnRhYkhlYWRlclVwZGF0ZVRpbWVvdXQpIHtcblx0XHRcdGNsZWFyVGltZW91dCh0aGlzLnRhYkhlYWRlclVwZGF0ZVRpbWVvdXQpO1xuXHRcdFx0dGhpcy50YWJIZWFkZXJVcGRhdGVUaW1lb3V0ID0gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBDbGVhciBhbnkgY2hlY2sgaW50ZXJ2YWxzXG5cdFx0aWYgKHRoaXMuc3RpY2t5SWNvbkVsICYmIHRoaXMuc3RpY2t5SWNvbkVsLl9jaGVja0ludGVydmFsKSB7XG5cdFx0XHRjbGVhckludGVydmFsKHRoaXMuc3RpY2t5SWNvbkVsLl9jaGVja0ludGVydmFsKTtcblx0XHR9XG5cblx0XHQvLyBEaXNjb25uZWN0IGNvbnRhaW5lciBvYnNlcnZlclxuXHRcdGlmICh0aGlzLnN0aWNreUljb25FbCAmJiB0aGlzLnN0aWNreUljb25FbC5fY29udGFpbmVyT2JzZXJ2ZXIpIHtcblx0XHRcdHRoaXMuc3RpY2t5SWNvbkVsLl9jb250YWluZXJPYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0fVxuXG5cdFx0Ly8gRGlzY29ubmVjdCBzaWRlYmFyIG9ic2VydmVyXG5cdFx0aWYgKHRoaXMuc2lkZWJhck9ic2VydmVyKSB7XG5cdFx0XHR0aGlzLnNpZGViYXJPYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0XHR0aGlzLnNpZGViYXJPYnNlcnZlciA9IG51bGw7XG5cdFx0fVxuXG5cdFx0Ly8gRGlzY29ubmVjdCB0YWIgaGVhZGVyIG9ic2VydmVyXG5cdFx0aWYgKHRoaXMudGFiSGVhZGVyT2JzZXJ2ZXIpIHtcblx0XHRcdHRoaXMudGFiSGVhZGVyT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXHRcdFx0dGhpcy50YWJIZWFkZXJPYnNlcnZlciA9IG51bGw7XG5cdFx0fVxuXG5cdFx0aWYgKHRoaXMuc3RpY2t5SWNvbkVsKSB7XG5cdFx0XHQvLyBPbmx5IHJlbW92ZSBpZiBpdCdzIGFjdHVhbGx5IGluIHRoZSBET01cblx0XHRcdGlmICh0aGlzLnN0aWNreUljb25FbC5wYXJlbnRFbGVtZW50KSB7XG5cdFx0XHRcdHRoaXMuc3RpY2t5SWNvbkVsLnJlbW92ZSgpO1xuXHRcdFx0fVxuXHRcdFx0dGhpcy5zdGlja3lJY29uRWwgPSBudWxsO1xuXHRcdH1cblxuXHRcdC8vIEFsc28gY2xlYW4gdXAgYW55IG9ycGhhbmVkIGljb25zXG5cdFx0ZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLiR7U1RJQ0tZX0lDT05fQ0xBU1N9YCkuZm9yRWFjaChlbCA9PiB7XG5cdFx0XHRjb25zdCBzdGlja3lFbCA9IGVsIGFzIFN0aWNreUljb25FbGVtZW50O1xuXHRcdFx0aWYgKHN0aWNreUVsLl9jaGVja0ludGVydmFsKSB7XG5cdFx0XHRcdGNsZWFySW50ZXJ2YWwoc3RpY2t5RWwuX2NoZWNrSW50ZXJ2YWwpO1xuXHRcdFx0fVxuXHRcdFx0aWYgKHN0aWNreUVsLl9jb250YWluZXJPYnNlcnZlcikge1xuXHRcdFx0XHRzdGlja3lFbC5fY29udGFpbmVyT2JzZXJ2ZXIuZGlzY29ubmVjdCgpO1xuXHRcdFx0fVxuXHRcdFx0ZWwucmVtb3ZlKCk7XG5cdFx0fSk7XG5cdH1cblxuXHQvKipcblx0ICogVXBkYXRlIHRoZSBhY3RpdmUgc3RhdGUgb2YgdGhlIHN0aWNreSBpY29uXG5cdCAqL1xuXHR1cGRhdGVBY3RpdmVTdGF0ZSgpOiB2b2lkIHtcblx0XHRpZiAoIXRoaXMuc3RpY2t5SWNvbkVsKSByZXR1cm47XG5cblx0XHRjb25zdCBpc0FjdGl2ZSA9IHRoaXMucGx1Z2luLmhvbWVTZXJ2aWNlLmlzRm9jdXNlZE9uSG9tZUJhc2UoKTtcblx0XHRcblx0XHRpZiAoaXNBY3RpdmUpIHtcblx0XHRcdHRoaXMuc3RpY2t5SWNvbkVsLmNsYXNzTGlzdC5hZGQoU1RJQ0tZX0lDT05fQUNUSVZFX0NMQVNTKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0dGhpcy5zdGlja3lJY29uRWwuY2xhc3NMaXN0LnJlbW92ZShTVElDS1lfSUNPTl9BQ1RJVkVfQ0xBU1MpO1xuXHRcdH1cblxuXHRcdC8vIEFsc28gdXBkYXRlIHRhYiBoZWFkZXJzIHdoZW4gYWN0aXZlIHN0YXRlIGNoYW5nZXMgKGRlYm91bmNlZClcblx0XHR0aGlzLnVwZGF0ZVRhYkhlYWRlcnMoKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBDaGVjayBpZiB0aGUgbGVmdCBzaWRlYmFyIGlzIGNvbGxhcHNlZFxuXHQgKiBCYXNlZCBvbiBvYnNpZGlhbi1veHlnZW4tc2V0dGluZ3MgaW1wbGVtZW50YXRpb25cblx0ICovXG5cdHByaXZhdGUgaXNMZWZ0U2lkZWJhckNvbGxhcHNlZCgpOiBib29sZWFuIHtcblx0XHQvLyBVc2UgdGhlIGNvcnJlY3Qgc2VsZWN0b3IgZm9yIGxlZnQgc2lkZWJhclxuXHRcdGNvbnN0IGxlZnRTaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1zcGxpdC5tb2QtbGVmdC1zcGxpdCcpIHx8IFxuXHRcdCAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZC1sZWZ0LXNwbGl0Jyk7XG5cdFx0XG5cdFx0aWYgKCFsZWZ0U2lkZWJhcikgcmV0dXJuIGZhbHNlO1xuXHRcdFxuXHRcdC8vIENoZWNrIGZvciB0aGUgaXMtc2lkZWRvY2stY29sbGFwc2VkIGNsYXNzIC0gdGhpcyBpcyB0aGUgbW9zdCByZWxpYWJsZSBpbmRpY2F0b3Jcblx0XHRyZXR1cm4gbGVmdFNpZGViYXIuY2xhc3NMaXN0LmNvbnRhaW5zKCdpcy1zaWRlZG9jay1jb2xsYXBzZWQnKTtcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgaWNvbiBwb3NpdGlvbiBiYXNlZCBvbiBzaWRlYmFyIHN0YXRlXG5cdCAqIE5vdGU6IFdpdGggaW5saW5lIHBvc2l0aW9uaW5nLCBpY29uIGZsb3dzIG5hdHVyYWxseSB3aXRoIHRhYnMsIHNvIG5vIHNwZWNpYWwgcG9zaXRpb25pbmcgbmVlZGVkXG5cdCAqL1xuXHR1cGRhdGVJY29uUG9zaXRpb25Gb3JTaWRlYmFyKCk6IHZvaWQge1xuXHRcdC8vIEljb24gbm93IGZsb3dzIG5hdHVyYWxseSB3aXRoIHRhYnMsIG5vIHNwZWNpYWwgcG9zaXRpb25pbmcgbmVlZGVkXG5cdFx0Ly8gVGhpcyBtZXRob2QgaXMga2VwdCBmb3IgcG90ZW50aWFsIGZ1dHVyZSB1c2UgYnV0IGN1cnJlbnRseSBkb2VzIG5vdGhpbmdcblx0fVxuXG5cdC8qKlxuXHQgKiBVcGRhdGUgaWNvbiB2aXNpYmlsaXR5IGJhc2VkIG9uIHRhYiBiYXIgdmlzaWJpbGl0eVxuXHQgKiBSRU1PVkVEOiBKYXZhU2NyaXB0LWJhc2VkIHZpc2liaWxpdHkgY2hlY2tpbmcgd2FzIGNhdXNpbmcgaXNzdWVzXG5cdCAqIE5vdyByZWxpZXMgZW50aXJlbHkgb24gQ1NTIHdoaWNoIGlzIG1vcmUgcmVsaWFibGVcblx0ICovXG5cdHVwZGF0ZUljb25WaXNpYmlsaXR5KCk6IHZvaWQge1xuXHRcdC8vIERvIG5vdGhpbmcgLSBsZXQgQ1NTIGhhbmRsZSBhbGwgdmlzaWJpbGl0eVxuXHRcdC8vIFRoZSBpY29uIGlzIGluc2lkZSB0aGUgdGFiIGNvbnRhaW5lciwgc28gaXQgd2lsbCBoaWRlIGF1dG9tYXRpY2FsbHlcblx0XHQvLyB3aGVuIHRoZSBjb250YWluZXIgaXMgaGlkZGVuIGJ5IGFueSB0aGVtZS9wbHVnaW5cblx0fVxuXG5cdC8qKlxuXHQgKiBXYXRjaCBmb3Igc2lkZWJhciBzdGF0ZSBjaGFuZ2VzIGFuZCB1cGRhdGUgaWNvbiBwb3NpdGlvblxuXHQgKiBCYXNlZCBvbiBvYnNpZGlhbi1veHlnZW4tc2V0dGluZ3MgaW1wbGVtZW50YXRpb25cblx0ICovXG5cdHByaXZhdGUgd2F0Y2hTaWRlYmFyU3RhdGUoKTogdm9pZCB7XG5cdFx0aWYgKHRoaXMuc2lkZWJhck9ic2VydmVyKSB7XG5cdFx0XHR0aGlzLnNpZGViYXJPYnNlcnZlci5kaXNjb25uZWN0KCk7XG5cdFx0fVxuXHRcdFxuXHRcdGNvbnN0IGxlZnRTaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLndvcmtzcGFjZS1zcGxpdC5tb2QtbGVmdC1zcGxpdCcpIHx8IFxuXHRcdCAgICAgICAgICAgICAgICAgICAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLm1vZC1sZWZ0LXNwbGl0Jyk7XG5cdFx0XG5cdFx0aWYgKCFsZWZ0U2lkZWJhcikgcmV0dXJuO1xuXHRcdFxuXHRcdC8vIFdhdGNoIGZvciBjbGFzcyBjaGFuZ2VzIG9uIHRoZSBzaWRlYmFyIGVsZW1lbnRcblx0XHR0aGlzLnNpZGViYXJPYnNlcnZlciA9IG5ldyBNdXRhdGlvbk9ic2VydmVyKChtdXRhdGlvbnMpID0+IHtcblx0XHRcdGxldCBzaG91bGRVcGRhdGUgPSBmYWxzZTtcblx0XHRcdG11dGF0aW9ucy5mb3JFYWNoKChtdXRhdGlvbikgPT4ge1xuXHRcdFx0XHRpZiAobXV0YXRpb24udHlwZSA9PT0gJ2F0dHJpYnV0ZXMnICYmIG11dGF0aW9uLmF0dHJpYnV0ZU5hbWUgPT09ICdjbGFzcycpIHtcblx0XHRcdFx0XHRzaG91bGRVcGRhdGUgPSB0cnVlO1xuXHRcdFx0XHR9XG5cdFx0XHR9KTtcblx0XHRcdGlmIChzaG91bGRVcGRhdGUpIHtcblx0XHRcdFx0dGhpcy51cGRhdGVJY29uUG9zaXRpb25Gb3JTaWRlYmFyKCk7XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0dGhpcy5zaWRlYmFyT2JzZXJ2ZXIub2JzZXJ2ZShsZWZ0U2lkZWJhciwge1xuXHRcdFx0YXR0cmlidXRlczogdHJ1ZSxcblx0XHRcdGF0dHJpYnV0ZUZpbHRlcjogWydjbGFzcyddLFxuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIFdhdGNoIGZvciB0YWIgYmFyIHZpc2liaWxpdHkgY2hhbmdlcyAoT3h5Z2VuIHRoZW1lIGF1dG8taGlkZSwgZm9jdXMgbW9kZSwgZXRjLilcblx0ICogUkVNT1ZFRDogTm8gbG9uZ2VyIG5lZWRlZCAtIENTUyBoYW5kbGVzIGFsbCB2aXNpYmlsaXR5IGF1dG9tYXRpY2FsbHlcblx0ICovXG5cdHByaXZhdGUgd2F0Y2hUYWJCYXJWaXNpYmlsaXR5KCk6IHZvaWQge1xuXHRcdC8vIERvIG5vdGhpbmcgLSBDU1MgaGFuZGxlcyBhbGwgdmlzaWJpbGl0eVxuXHRcdC8vIFRoZSBpY29uIGlzIGluc2lkZSB0aGUgdGFiIGNvbnRhaW5lciwgc28gaXQgaGlkZXMgYXV0b21hdGljYWxseVxuXHR9XG5cblx0LyoqXG5cdCAqIFRvZ2dsZSB0aGUgc3RpY2t5IGljb24gdmlzaWJpbGl0eVxuXHQgKi9cblx0YXN5bmMgdG9nZ2xlKCk6IFByb21pc2U8dm9pZD4ge1xuXHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbiA9ICF0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb247XG5cdFx0YXdhaXQgdGhpcy5wbHVnaW4uc2F2ZVNldHRpbmdzKCk7XG5cdFx0dGhpcy51cGRhdGUoKTtcblx0XHQvLyBVcGRhdGUgdGFiIGhlYWRlcnMgd2hlbiB0b2dnbGluZyBzdGlja3kgaWNvblxuXHRcdHRoaXMudXBkYXRlVGFiSGVhZGVycygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIFVwZGF0ZSB0YWIgaGVhZGVycyB0byBoaWRlL3Nob3cgZ2hvc3QgdGFiXG5cdCAqIE9ubHkgd29ya3Mgd2hlbiBzdGlja3kgaWNvbiBpcyBlbmFibGVkXG5cdCAqIFJlbW92ZWQgZGVib3VuY2UgLSBtdXN0IGJlIGltbWVkaWF0ZSB0byBwcmV2ZW50IGZsYXNoXG5cdCAqL1xuXHR1cGRhdGVUYWJIZWFkZXJzKCk6IHZvaWQge1xuXHRcdC8vIENsZWFyIGFueSBwZW5kaW5nIHVwZGF0ZVxuXHRcdGlmICh0aGlzLnRhYkhlYWRlclVwZGF0ZVRpbWVvdXQpIHtcblx0XHRcdGNsZWFyVGltZW91dCh0aGlzLnRhYkhlYWRlclVwZGF0ZVRpbWVvdXQpO1xuXHRcdFx0dGhpcy50YWJIZWFkZXJVcGRhdGVUaW1lb3V0ID0gbnVsbDtcblx0XHR9XG5cblx0XHQvLyBFeGVjdXRlIGltbWVkaWF0ZWx5IC0gbm8gZGVib3VuY2UgdG8gcHJldmVudCBmbGFzaFxuXHRcdHRoaXMuX2RvVXBkYXRlVGFiSGVhZGVycygpO1xuXHR9XG5cblx0LyoqXG5cdCAqIEludGVybmFsIG1ldGhvZCB0aGF0IGFjdHVhbGx5IHVwZGF0ZXMgdGhlIHRhYiBoZWFkZXJzXG5cdCAqL1xuXHRwcml2YXRlIF9kb1VwZGF0ZVRhYkhlYWRlcnMoKTogdm9pZCB7XG5cdFx0Ly8gT25seSBoaWRlIGdob3N0IHRhYiBpZiBCT1RIIHN0aWNreSBpY29uIEFORCBoaWRlIHRhYiBoZWFkZXIgYXJlIGVuYWJsZWRcblx0XHRpZiAoIXRoaXMucGx1Z2luLnNldHRpbmdzLnNob3dTdGlja3lIb21lSWNvbiB8fCAhdGhpcy5wbHVnaW4uc2V0dGluZ3MuaGlkZUhvbWVUYWJIZWFkZXIpIHtcblx0XHRcdC8vIFJlbW92ZSBhbGwgaG9tZSBiYXNlIHRhYiBjbGFzc2VzIGlmIGVpdGhlciBzZXR0aW5nIGlzIGRpc2FibGVkXG5cdFx0XHRkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcuaXMtaG9tZS1iYXNlLXRhYicpLmZvckVhY2goZWwgPT4ge1xuXHRcdFx0XHRlbC5jbGFzc0xpc3QucmVtb3ZlKCdpcy1ob21lLWJhc2UtdGFiJyk7XG5cdFx0XHR9KTtcblx0XHRcdC8vIFJlc3RvcmUgYW55IHJlbW92ZWQgZ2hvc3QgdGFiIGhlYWRlcnNcblx0XHRcdGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoJy53b3Jrc3BhY2UtdGFiLWhlYWRlcicpLmZvckVhY2goKHRhYkhlYWRlcikgPT4ge1xuXHRcdFx0XHRjb25zdCB0YWJIZWFkZXJFeHRlbmRlZCA9IHRhYkhlYWRlciBhcyBUYWJIZWFkZXJFbGVtZW50O1xuXHRcdFx0XHRpZiAodGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50ICYmICF0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VQYXJlbnQuY29udGFpbnModGFiSGVhZGVyKSkge1xuXHRcdFx0XHRcdGNvbnN0IHBhcmVudCA9IHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudDtcblx0XHRcdFx0XHRjb25zdCBuZXh0U2libGluZyA9IHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZU5leHRTaWJsaW5nO1xuXHRcdFx0XHRcdGlmIChwYXJlbnQpIHtcblx0XHRcdFx0XHRcdGlmIChuZXh0U2libGluZyAmJiBuZXh0U2libGluZy5wYXJlbnRFbGVtZW50ID09PSBwYXJlbnQpIHtcblx0XHRcdFx0XHRcdFx0cGFyZW50Lmluc2VydEJlZm9yZSh0YWJIZWFkZXIsIG5leHRTaWJsaW5nKTtcblx0XHRcdFx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdFx0XHRcdHBhcmVudC5hcHBlbmRDaGlsZCh0YWJIZWFkZXIpO1xuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdH1cblx0XHRcdFx0XHRkZWxldGUgdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50O1xuXHRcdFx0XHRcdGRlbGV0ZSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VOZXh0U2libGluZztcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Y29uc3QgaG9tZUJhc2VQYXRoID0gdGhpcy5wbHVnaW4uc2V0dGluZ3MuaG9tZUJhc2VQYXRoO1xuXHRcdGlmICghaG9tZUJhc2VQYXRoKSB7XG5cdFx0XHRyZXR1cm47XG5cdFx0fVxuXG5cdFx0Ly8gQ1JJVElDQUw6IFJlbW92ZSBnaG9zdCB0YWIgaGVhZGVycyBTWU5DSFJPTk9VU0xZIGJlZm9yZSBhbnkgYW5pbWF0aW9uIGZyYW1lc1xuXHRcdC8vIFRoaXMgcHJldmVudHMgdGhlbSBmcm9tIGJyaWVmbHkgYXBwZWFyaW5nIHdoZW4gdGFicyBjaGFuZ2Vcblx0XHRjb25zdCBnaG9zdFRhYkhlYWRlcnNUb1JlbW92ZTogQXJyYXk8e3RhYkhlYWRlcjogSFRNTEVsZW1lbnQ7IGxlYWY6IFdvcmtzcGFjZUxlYWZ9PiA9IFtdO1xuXHRcdFxuXHRcdHRoaXMucGx1Z2luLmFwcC53b3Jrc3BhY2UuaXRlcmF0ZUFsbExlYXZlcygobGVhZikgPT4ge1xuXHRcdFx0Y29uc3QgaXNIb21lQmFzZSA9IGxlYWZIYXNGaWxlKGxlYWYsIGhvbWVCYXNlUGF0aCk7XG5cdFx0XHRpZiAoIWlzSG9tZUJhc2UpIHJldHVybjtcblx0XHRcdFxuXHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcblx0XHRcdGNvbnN0IGlzR2hvc3RUYWIgPSB2aWV3U3RhdGUucGlubmVkID09PSB0cnVlICYmIGlzSG9tZUJhc2U7XG5cdFx0XHRcblx0XHRcdGlmIChpc0dob3N0VGFiKSB7XG5cdFx0XHRcdGNvbnN0IHRhYkhlYWRlciA9IHRoaXMuZ2V0VGFiSGVhZGVyRm9yTGVhZihsZWFmKTtcblx0XHRcdFx0aWYgKHRhYkhlYWRlciAmJiB0YWJIZWFkZXIucGFyZW50RWxlbWVudCkge1xuXHRcdFx0XHRcdGdob3N0VGFiSGVhZGVyc1RvUmVtb3ZlLnB1c2goe3RhYkhlYWRlciwgbGVhZn0pO1xuXHRcdFx0XHR9XG5cdFx0XHR9XG5cdFx0fSk7XG5cdFx0XG5cdFx0Ly8gUmVtb3ZlIGFsbCBnaG9zdCB0YWIgaGVhZGVycyBzeW5jaHJvbm91c2x5IEJFRk9SRSBhbnkgcmVuZGVyaW5nXG5cdFx0Z2hvc3RUYWJIZWFkZXJzVG9SZW1vdmUuZm9yRWFjaCgoe3RhYkhlYWRlcn0pID0+IHtcblx0XHRcdGNvbnN0IHBhcmVudCA9IHRhYkhlYWRlci5wYXJlbnRFbGVtZW50O1xuXHRcdFx0aWYgKHBhcmVudCAmJiBwYXJlbnQuY2xhc3NMaXN0LmNvbnRhaW5zKCd3b3Jrc3BhY2UtdGFiLWhlYWRlci1jb250YWluZXItaW5uZXInKSkge1xuXHRcdFx0XHRjb25zdCB0YWJIZWFkZXJFeHRlbmRlZCA9IHRhYkhlYWRlciBhcyBUYWJIZWFkZXJFbGVtZW50O1xuXHRcdFx0XHQvLyBPbmx5IHJlbW92ZSBpZiBub3QgYWxyZWFkeSByZW1vdmVkXG5cdFx0XHRcdGlmIChwYXJlbnQuY29udGFpbnModGFiSGVhZGVyKSkge1xuXHRcdFx0XHRcdHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudCA9IHBhcmVudDtcblx0XHRcdFx0XHR0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VOZXh0U2libGluZyA9IHRhYkhlYWRlci5uZXh0U2libGluZztcblx0XHRcdFx0XHR0YWJIZWFkZXIucmVtb3ZlKCk7XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdC8vIE5vdyB1cGRhdGUgb3RoZXIgdGFiIGhlYWRlcnMgaW4gcmVxdWVzdEFuaW1hdGlvbkZyYW1lIChub24tY3JpdGljYWwpXG5cdFx0cmVxdWVzdEFuaW1hdGlvbkZyYW1lKCgpID0+IHtcblx0XHRcdC8vIFJlc3RvcmUgYW55IG5vbi1naG9zdCB0YWJzIHRoYXQgd2VyZSBpbmNvcnJlY3RseSByZW1vdmVkXG5cdFx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdFx0Y29uc3QgaXNIb21lQmFzZSA9IGxlYWZIYXNGaWxlKGxlYWYsIGhvbWVCYXNlUGF0aCk7XG5cdFx0XHRcdGNvbnN0IHZpZXdTdGF0ZSA9IGxlYWYuZ2V0Vmlld1N0YXRlKCk7XG5cdFx0XHRcdGNvbnN0IGlzR2hvc3RUYWIgPSB2aWV3U3RhdGUucGlubmVkID09PSB0cnVlICYmIGlzSG9tZUJhc2U7XG5cdFx0XHRcdFxuXHRcdFx0XHRjb25zdCB0YWJIZWFkZXIgPSB0aGlzLmdldFRhYkhlYWRlckZvckxlYWYobGVhZik7XG5cdFx0XHRcdGlmICh0YWJIZWFkZXIpIHtcblx0XHRcdFx0XHRjb25zdCB0YWJIZWFkZXJFeHRlbmRlZCA9IHRhYkhlYWRlciBhcyBUYWJIZWFkZXJFbGVtZW50O1xuXHRcdFx0XHRcdGNvbnN0IGlzUmVtb3ZlZCA9IHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudCAmJiAhdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50LmNvbnRhaW5zKHRhYkhlYWRlcik7XG5cdFx0XHRcdFx0XG5cdFx0XHRcdFx0aWYgKGlzSG9tZUJhc2UgJiYgIWlzR2hvc3RUYWIpIHtcblx0XHRcdFx0XHRcdC8vIERvbid0IGhpZGUgbm9ybWFsIHRhYnMgLSByZXN0b3JlIGlmIGl0IHdhcyByZW1vdmVkXG5cdFx0XHRcdFx0XHRpZiAoaXNSZW1vdmVkKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHBhcmVudCA9IHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudDtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbmV4dFNpYmxpbmcgPSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VOZXh0U2libGluZztcblx0XHRcdFx0XHRcdFx0aWYgKHBhcmVudCkge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChuZXh0U2libGluZyAmJiBuZXh0U2libGluZy5wYXJlbnRFbGVtZW50ID09PSBwYXJlbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHBhcmVudC5pbnNlcnRCZWZvcmUodGFiSGVhZGVyLCBuZXh0U2libGluZyk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdHBhcmVudC5hcHBlbmRDaGlsZCh0YWJIZWFkZXIpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRkZWxldGUgdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50O1xuXHRcdFx0XHRcdFx0XHRcdGRlbGV0ZSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VOZXh0U2libGluZztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dGFiSGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWhvbWUtYmFzZS10YWInKTtcblx0XHRcdFx0XHRcdHRhYkhlYWRlci5yZW1vdmVBdHRyaWJ1dGUoJ2RhdGEtaG9tZS1iYXNlLWdob3N0Jyk7XG5cdFx0XHRcdFx0XHR0YWJIZWFkZXIucmVtb3ZlQXR0cmlidXRlKCdhcmlhLWhpZGRlbicpO1xuXHRcdFx0XHRcdH0gZWxzZSBpZiAoIWlzSG9tZUJhc2UpIHtcblx0XHRcdFx0XHRcdC8vIE5vdCBob21lIGJhc2UgLSByZXN0b3JlIGlmIGl0IHdhcyByZW1vdmVkXG5cdFx0XHRcdFx0XHRpZiAoaXNSZW1vdmVkKSB7XG5cdFx0XHRcdFx0XHRcdGNvbnN0IHBhcmVudCA9IHRhYkhlYWRlckV4dGVuZGVkLl9ob21lQmFzZVBhcmVudDtcblx0XHRcdFx0XHRcdFx0Y29uc3QgbmV4dFNpYmxpbmcgPSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VOZXh0U2libGluZztcblx0XHRcdFx0XHRcdFx0aWYgKHBhcmVudCkge1xuXHRcdFx0XHRcdFx0XHRcdGlmIChuZXh0U2libGluZyAmJiBuZXh0U2libGluZy5wYXJlbnRFbGVtZW50ID09PSBwYXJlbnQpIHtcblx0XHRcdFx0XHRcdFx0XHRcdHBhcmVudC5pbnNlcnRCZWZvcmUodGFiSGVhZGVyLCBuZXh0U2libGluZyk7XG5cdFx0XHRcdFx0XHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0XHRcdFx0XHRcdHBhcmVudC5hcHBlbmRDaGlsZCh0YWJIZWFkZXIpO1xuXHRcdFx0XHRcdFx0XHRcdH1cblx0XHRcdFx0XHRcdFx0XHRkZWxldGUgdGFiSGVhZGVyRXh0ZW5kZWQuX2hvbWVCYXNlUGFyZW50O1xuXHRcdFx0XHRcdFx0XHRcdGRlbGV0ZSB0YWJIZWFkZXJFeHRlbmRlZC5faG9tZUJhc2VOZXh0U2libGluZztcblx0XHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0fVxuXHRcdFx0XHRcdFx0dGFiSGVhZGVyLmNsYXNzTGlzdC5yZW1vdmUoJ2lzLWhvbWUtYmFzZS10YWInKTtcblx0XHRcdFx0XHR9XG5cdFx0XHRcdH1cblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9XG5cblx0LyoqXG5cdCAqIEdldCB0aGUgdGFiIGhlYWRlciBlbGVtZW50IGZvciBhIGdpdmVuIGxlYWZcblx0ICovXG5cdHByaXZhdGUgZ2V0VGFiSGVhZGVyRm9yTGVhZihsZWFmOiBXb3Jrc3BhY2VMZWFmKTogSFRNTEVsZW1lbnQgfCBudWxsIHtcblx0XHQvLyBUcnkgdG8gZ2V0IGZyb20gbGVhZidzIGludGVybmFsIHByb3BlcnR5IGZpcnN0IChpZiBhdmFpbGFibGUpXG5cdFx0Y29uc3QgbGVhZkFueSA9IGxlYWYgYXMgdW5rbm93biBhcyB7IHRhYkhlYWRlckVsPzogSFRNTEVsZW1lbnQgfTtcblx0XHRpZiAobGVhZkFueS50YWJIZWFkZXJFbCkge1xuXHRcdFx0cmV0dXJuIGxlYWZBbnkudGFiSGVhZGVyRWw7XG5cdFx0fVxuXG5cdFx0Ly8gRmFsbGJhY2s6IGZpbmQgYnkgcXVlcnlpbmcgRE9NXG5cdFx0Y29uc3Qgdmlld1R5cGUgPSBsZWFmLnZpZXc/LmdldFZpZXdUeXBlKCk7XG5cdFx0aWYgKCF2aWV3VHlwZSkgcmV0dXJuIG51bGw7XG5cblx0XHQvLyBHZXQgdGhlIGFjdGl2ZSBsZWFmIHRvIGhlbHAgd2l0aCBtYXRjaGluZ1xuXHRcdGNvbnN0IGFjdGl2ZUxlYWYgPSB0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLmdldE1vc3RSZWNlbnRMZWFmKCk7XG5cdFx0Y29uc3QgaXNBY3RpdmUgPSBsZWFmID09PSBhY3RpdmVMZWFmO1xuXG5cdFx0Ly8gRmluZCBhbGwgdGFiIGhlYWRlcnMgd2l0aCBtYXRjaGluZyB2aWV3IHR5cGVcblx0XHRjb25zdCB0YWJIZWFkZXJzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChgLndvcmtzcGFjZS10YWItaGVhZGVyW2RhdGEtdHlwZT1cIiR7dmlld1R5cGV9XCJdYCk7XG5cdFx0XG5cdFx0Ly8gSWYgdGhpcyBpcyB0aGUgYWN0aXZlIGxlYWYsIHByZWZlciB0aGUgYWN0aXZlIHRhYiBoZWFkZXJcblx0XHRpZiAoaXNBY3RpdmUpIHtcblx0XHRcdGNvbnN0IGFjdGl2ZUhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2UtdGFiLWhlYWRlci5pcy1hY3RpdmUnKTtcblx0XHRcdGlmIChhY3RpdmVIZWFkZXIgJiYgYWN0aXZlSGVhZGVyLmdldEF0dHJpYnV0ZSgnZGF0YS10eXBlJykgPT09IHZpZXdUeXBlKSB7XG5cdFx0XHRcdHJldHVybiBhY3RpdmVIZWFkZXIgYXMgSFRNTEVsZW1lbnQ7XG5cdFx0XHR9XG5cdFx0fVxuXG5cdFx0Ly8gVHJ5IHRvIG1hdGNoIGJ5IGNoZWNraW5nIGlmIGhlYWRlcidzIGxlYWYgcHJvcGVydHkgbWF0Y2hlc1xuXHRcdGZvciAoY29uc3QgaGVhZGVyIG9mIEFycmF5LmZyb20odGFiSGVhZGVycykpIHtcblx0XHRcdGNvbnN0IGhlYWRlckVsID0gaGVhZGVyIGFzIEhUTUxFbGVtZW50O1xuXHRcdFx0Y29uc3QgaGVhZGVyRWxXaXRoTGVhZiA9IGhlYWRlckVsIGFzIHVua25vd24gYXMgeyBsZWFmPzogV29ya3NwYWNlTGVhZiB9O1xuXHRcdFx0Y29uc3QgaGVhZGVyTGVhZiA9IGhlYWRlckVsV2l0aExlYWYubGVhZjtcblx0XHRcdGlmIChoZWFkZXJMZWFmID09PSBsZWFmKSB7XG5cdFx0XHRcdHJldHVybiBoZWFkZXJFbDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHQvLyBJZiBvbmx5IG9uZSB0YWIgaGVhZGVyIG1hdGNoZXMgdGhlIHZpZXcgdHlwZSwgaXQncyBsaWtlbHkgdGhlIG9uZVxuXHRcdGlmICh0YWJIZWFkZXJzLmxlbmd0aCA9PT0gMSkge1xuXHRcdFx0cmV0dXJuIHRhYkhlYWRlcnNbMF0gYXMgSFRNTEVsZW1lbnQ7XG5cdFx0fVxuXG5cdFx0Ly8gTGFzdCByZXNvcnQ6IGlmIHRoaXMgaXMgYWN0aXZlIGFuZCB3ZSBmb3VuZCBhbiBhY3RpdmUgaGVhZGVyLCB1c2UgaXRcblx0XHRpZiAoaXNBY3RpdmUpIHtcblx0XHRcdGNvbnN0IGFjdGl2ZUhlYWRlciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy53b3Jrc3BhY2UtdGFiLWhlYWRlci5pcy1hY3RpdmUnKTtcblx0XHRcdGlmIChhY3RpdmVIZWFkZXIpIHtcblx0XHRcdFx0cmV0dXJuIGFjdGl2ZUhlYWRlciBhcyBIVE1MRWxlbWVudDtcblx0XHRcdH1cblx0XHR9XG5cblx0XHRyZXR1cm4gbnVsbDtcblx0fVxuXG5cdC8qKlxuXHQgKiBDbG9zZSB0aGUgaG9tZSBiYXNlIHRhYlxuXHQgKiBXaGVuIGNhbGxlZCBmcm9tIGNvbnRleHQgbWVudTogT25seSBjbG9zZXMgdGhlIGdob3N0IHRhYiAodGhlIFwib2NjdXBpZWRcIiBzbG90KVxuXHQgKiBPdGhlciBob21lIGJhc2UgdGFicyBhcmUgbGVmdCBhbG9uZVxuXHQgKi9cblx0YXN5bmMgY2xvc2VIb21lQmFzZShhY3R1YWxseUNsb3NlOiBib29sZWFuID0gZmFsc2UpOiBQcm9taXNlPHZvaWQ+IHtcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVBhdGg7XG5cdFx0aWYgKCFob21lQmFzZVBhdGgpIHJldHVybjtcblxuXHRcdGNvbnN0IHsgZ2V0RmlsZUJ5UGF0aCB9ID0gYXdhaXQgaW1wb3J0KCcuLi91dGlscy9maWxlLXV0aWxzJyk7XG5cdFx0Y29uc3QgaG9tZUJhc2VGaWxlID0gZ2V0RmlsZUJ5UGF0aCh0aGlzLnBsdWdpbi5hcHAsIGhvbWVCYXNlUGF0aCk7XG5cdFx0aWYgKCFob21lQmFzZUZpbGUpIHJldHVybjtcblxuXHRcdC8vIEZpbmQgdGhlIGdob3N0IHRhYiAodGhlIFwib2NjdXBpZWRcIiBzbG90IC0gcGlubmVkIGhvbWUgYmFzZSB0YWIpXG5cdFx0Y29uc3QgZ2hvc3RUYWJzOiBXb3Jrc3BhY2VMZWFmW10gPSBbXTtcblx0XHRcblx0XHR0aGlzLnBsdWdpbi5hcHAud29ya3NwYWNlLml0ZXJhdGVBbGxMZWF2ZXMoKGxlYWYpID0+IHtcblx0XHRcdGlmIChsZWFmSGFzRmlsZShsZWFmLCBob21lQmFzZVBhdGgpKSB7XG5cdFx0XHRcdHRyeSB7XG5cdFx0XHRcdFx0Y29uc3Qgdmlld1N0YXRlID0gbGVhZi5nZXRWaWV3U3RhdGUoKTtcblx0XHRcdFx0XHRpZiAodmlld1N0YXRlLnBpbm5lZCA9PT0gdHJ1ZSkge1xuXHRcdFx0XHRcdFx0Z2hvc3RUYWJzLnB1c2gobGVhZik7XG5cdFx0XHRcdFx0fVxuXHRcdFx0XHR9IGNhdGNoIHtcblx0XHRcdFx0XHQvLyBMZWFmIG1pZ2h0IGJlIGRldGFjaGVkLCBza2lwIGl0XG5cdFx0XHRcdH1cblx0XHRcdH1cblx0XHR9KTtcblxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5zaG93U3RpY2t5SG9tZUljb24pIHtcblx0XHRcdC8vIFN0aWNreSBpY29uIGVuYWJsZWQ6IG9ubHkgY2xvc2UgdGhlIGdob3N0IHRhYiAodGhlIG9jY3VwaWVkIHNsb3QpXG5cdFx0XHQvLyBPdGhlciBob21lIGJhc2UgdGFicyBhcmUgbGVmdCBhbG9uZVxuXHRcdFx0Zm9yIChjb25zdCBnaG9zdFRhYiBvZiBnaG9zdFRhYnMpIHtcblx0XHRcdFx0dm9pZCBnaG9zdFRhYi5kZXRhY2goKTtcblx0XHRcdH1cblx0XHR9IGVsc2Uge1xuXHRcdFx0Ly8gU3RpY2t5IGljb24gZGlzYWJsZWQ6IGNsb3NlIGFsbCBob21lIGJhc2UgdGFic1xuXHRcdFx0Y29uc3QgYWxsSG9tZUJhc2VMZWF2ZXM6IFdvcmtzcGFjZUxlYWZbXSA9IFtdO1xuXHRcdFx0dGhpcy5wbHVnaW4uYXBwLndvcmtzcGFjZS5pdGVyYXRlQWxsTGVhdmVzKChsZWFmOiBXb3Jrc3BhY2VMZWFmKSA9PiB7XG5cdFx0XHRcdGlmIChsZWFmSGFzRmlsZShsZWFmLCBob21lQmFzZVBhdGgpKSB7XG5cdFx0XHRcdFx0YWxsSG9tZUJhc2VMZWF2ZXMucHVzaChsZWFmKTtcblx0XHRcdFx0fVxuXHRcdFx0fSk7XG5cdFx0XHRmb3IgKGNvbnN0IGxlYWYgb2YgYWxsSG9tZUJhc2VMZWF2ZXMpIHtcblx0XHRcdFx0dm9pZCBsZWFmLmRldGFjaCgpO1xuXHRcdFx0fVxuXHRcdH1cblxuXHRcdC8vIFVwZGF0ZSB0YWIgaGVhZGVycyBhZnRlciBjbG9zaW5nXG5cdFx0dGhpcy51cGRhdGVUYWJIZWFkZXJzKCk7XG5cdH1cblxuXHQvKipcblx0ICogUGluIHRoZSBob21lIGJhc2UgdGFiXG5cdCAqL1xuXHRwaW5Ib21lQmFzZVRhYigpOiB2b2lkIHtcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVBhdGg7XG5cdFx0aWYgKCFob21lQmFzZVBhdGgpIHJldHVybjtcblxuXHRcdGNvbnN0IGhvbWVCYXNlRmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5wbHVnaW4uYXBwLCBob21lQmFzZVBhdGgpO1xuXHRcdGlmICghaG9tZUJhc2VGaWxlKSByZXR1cm47XG5cblx0XHRjb25zdCBob21lQmFzZUxlYWYgPSB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5maW5kRXhpc3RpbmdIb21lQmFzZUxlYWYoaG9tZUJhc2VGaWxlKTtcblx0XHRpZiAoaG9tZUJhc2VMZWFmKSB7XG5cdFx0XHRob21lQmFzZUxlYWYuc2V0UGlubmVkKHRydWUpO1xuXHRcdH1cblx0fVxuXG5cdC8qKlxuXHQgKiBVbnBpbiB0aGUgaG9tZSBiYXNlIHRhYlxuXHQgKi9cblx0dW5waW5Ib21lQmFzZVRhYigpOiB2b2lkIHtcblx0XHRjb25zdCBob21lQmFzZVBhdGggPSB0aGlzLnBsdWdpbi5zZXR0aW5ncy5ob21lQmFzZVBhdGg7XG5cdFx0aWYgKCFob21lQmFzZVBhdGgpIHJldHVybjtcblxuXHRcdGNvbnN0IGhvbWVCYXNlRmlsZSA9IGdldEZpbGVCeVBhdGgodGhpcy5wbHVnaW4uYXBwLCBob21lQmFzZVBhdGgpO1xuXHRcdGlmICghaG9tZUJhc2VGaWxlKSByZXR1cm47XG5cblx0XHRjb25zdCBob21lQmFzZUxlYWYgPSB0aGlzLnBsdWdpbi5ob21lU2VydmljZS5maW5kRXhpc3RpbmdIb21lQmFzZUxlYWYoaG9tZUJhc2VGaWxlKTtcblx0XHRpZiAoaG9tZUJhc2VMZWFmKSB7XG5cdFx0XHRob21lQmFzZUxlYWYuc2V0UGlubmVkKGZhbHNlKTtcblx0XHR9XG5cdH1cblxuXHQvKipcblx0ICogQ2hlY2sgaWYgdGhlIGhvbWUgYmFzZSB0YWIgaXMgcGlubmVkXG5cdCAqL1xuXHRpc0hvbWVCYXNlVGFiUGlubmVkKCk6IGJvb2xlYW4ge1xuXHRcdGNvbnN0IGhvbWVCYXNlUGF0aCA9IHRoaXMucGx1Z2luLnNldHRpbmdzLmhvbWVCYXNlUGF0aDtcblx0XHRpZiAoIWhvbWVCYXNlUGF0aCkgcmV0dXJuIGZhbHNlO1xuXG5cdFx0Y29uc3QgaG9tZUJhc2VGaWxlID0gZ2V0RmlsZUJ5UGF0aCh0aGlzLnBsdWdpbi5hcHAsIGhvbWVCYXNlUGF0aCk7XG5cdFx0aWYgKCFob21lQmFzZUZpbGUpIHJldHVybiBmYWxzZTtcblxuXHRcdGNvbnN0IGhvbWVCYXNlTGVhZiA9IHRoaXMucGx1Z2luLmhvbWVTZXJ2aWNlLmZpbmRFeGlzdGluZ0hvbWVCYXNlTGVhZihob21lQmFzZUZpbGUpO1xuXHRcdGlmICghaG9tZUJhc2VMZWFmKSByZXR1cm4gZmFsc2U7XG5cblx0XHRjb25zdCB2aWV3U3RhdGUgPSBob21lQmFzZUxlYWYuZ2V0Vmlld1N0YXRlKCk7XG5cdFx0cmV0dXJuIHZpZXdTdGF0ZS5waW5uZWQgPT09IHRydWU7XG5cdH1cbn1cbiIsICIvKipcclxuICogTW9iaWxlIEJ1dHRvbiBTZXJ2aWNlXHJcbiAqIE1hbmFnZXMgdGhlIG1vYmlsZSBuZXcgdGFiIGJ1dHRvbiByZXBsYWNlbWVudFxyXG4gKi9cclxuXHJcbmltcG9ydCB7IFBsYXRmb3JtIH0gZnJvbSAnb2JzaWRpYW4nO1xyXG5pbXBvcnQgdHlwZSBIb21lQmFzZVBsdWdpbiBmcm9tICcuLi9tYWluJztcclxuXHJcbi8qKlxyXG4gKiBDU1MgY2xhc3MgZm9yIHdoZW4gbW9iaWxlIGJ1dHRvbiBpcyByZXBsYWNlZFxyXG4gKi9cclxuY29uc3QgTU9CSUxFX0hPTUVfQ0xBU1MgPSAnaG9tZS1iYXNlLW1vYmlsZS1lbmFibGVkJztcclxuXHJcbmV4cG9ydCBjbGFzcyBNb2JpbGVCdXR0b25TZXJ2aWNlIHtcclxuXHRwcml2YXRlIHBsdWdpbjogSG9tZUJhc2VQbHVnaW47XHJcblxyXG5cdGNvbnN0cnVjdG9yKHBsdWdpbjogSG9tZUJhc2VQbHVnaW4pIHtcclxuXHRcdHRoaXMucGx1Z2luID0gcGx1Z2luO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogVXBkYXRlIHRoZSBtb2JpbGUgYnV0dG9uIGJhc2VkIG9uIHNldHRpbmdzXHJcblx0ICovXHJcblx0dXBkYXRlKCk6IHZvaWQge1xyXG5cdFx0Ly8gT25seSBhcHBseSBvbiBtb2JpbGVcclxuXHRcdGlmICghUGxhdGZvcm0uaXNNb2JpbGUpIHtcclxuXHRcdFx0dGhpcy5yZW1vdmUoKTtcclxuXHRcdFx0cmV0dXJuO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmICh0aGlzLnBsdWdpbi5zZXR0aW5ncy5yZXBsYWNlTW9iaWxlTmV3VGFiKSB7XHJcblx0XHRcdHRoaXMuYXBwbHkoKTtcclxuXHRcdH0gZWxzZSB7XHJcblx0XHRcdHRoaXMucmVtb3ZlKCk7XHJcblx0XHR9XHJcblx0fVxyXG5cclxuXHQvKipcclxuXHQgKiBBcHBseSB0aGUgbW9iaWxlIGJ1dHRvbiByZXBsYWNlbWVudFxyXG5cdCAqL1xyXG5cdHByaXZhdGUgYXBwbHkoKTogdm9pZCB7XHJcblx0XHRkb2N1bWVudC5ib2R5LmNsYXNzTGlzdC5hZGQoTU9CSUxFX0hPTUVfQ0xBU1MpO1xyXG5cdH1cclxuXHJcblx0LyoqXHJcblx0ICogUmVtb3ZlIHRoZSBtb2JpbGUgYnV0dG9uIHJlcGxhY2VtZW50XHJcblx0ICovXHJcblx0cmVtb3ZlKCk6IHZvaWQge1xyXG5cdFx0ZG9jdW1lbnQuYm9keS5jbGFzc0xpc3QucmVtb3ZlKE1PQklMRV9IT01FX0NMQVNTKTtcclxuXHR9XHJcbn1cclxuIl0sCiAgIm1hcHBpbmdzIjogIjs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQSw4QkFBQUE7QUFBQSxFQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQTtBQUFBO0FBMEJPLFNBQVMscUJBQXFCLFdBQW9EO0FBQ3hGLFNBQU9BLHNCQUFxQixTQUFTLFNBQStCO0FBQ3JFO0FBS08sU0FBUyxpQkFBaUIsTUFBc0I7QUFqQ3ZEO0FBa0NDLFFBQU0sUUFBUSxLQUFLLE1BQU0sR0FBRztBQUM1QixTQUFPLE1BQU0sU0FBUyxNQUFLLFdBQU0sTUFBTSxTQUFTLENBQUMsTUFBdEIsWUFBMkIsSUFBSSxZQUFZLElBQUk7QUFDM0U7QUFLTyxTQUFTLG1CQUFtQixNQUFxQjtBQUN2RCxRQUFNLE1BQU0sS0FBSyxVQUFVLFlBQVk7QUFDdkMsTUFBSSxxQkFBcUIsR0FBRyxHQUFHO0FBQzlCLFdBQU8sY0FBYyxHQUFHO0FBQUEsRUFDekI7QUFDQSxTQUFPO0FBQ1I7QUFLTyxTQUFTLGVBQWUsTUFBc0I7QUFDcEQsUUFBTSxNQUFNLEtBQUssVUFBVSxZQUFZO0FBQ3ZDLFNBQU8sUUFBUSxRQUFRLFFBQVE7QUFD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LE9BQU8sU0FBUztBQUNwRCxZQUFNLFNBQVMsT0FBTyxLQUFLLE9BQU8sT0FBTztBQUN6QyxZQUFNLFNBQVMsT0FBTyxRQUFRO0FBQzlCLGFBQ0MsV0FBVyxVQUNYLENBQUMsUUFBUSxjQUFjLEVBQUUsU0FBUyxNQUFNLEtBQ3hDLENBQUMsUUFBUSxZQUFZLFdBQVcsRUFBRSxLQUFLLE9BQUssT0FBTyxTQUFTLENBQUMsQ0FBQztBQUFBLElBRWhFO0FBQ0EsV0FBTztBQUFBLEVBQ1I7QUFBQTtBQUFBO0FBSUQ7IiwKICAibmFtZXMiOiBbIlNVUFBPUlRFRF9FWFRFTlNJT05TIiwgImltcG9ydF9vYnNpZGlhbiIsICJmb3JtYXQiLCAiZm9sZGVyIiwgInRlbXBsYXRlIiwgImNyZWF0ZURhaWx5Tm90ZSIsICJnZXREYWlseU5vdGUiLCAiZ2V0QWxsRGFpbHlOb3RlcyIsICJjcmVhdGVXZWVrbHlOb3RlIiwgImdldFdlZWtseU5vdGUiLCAiZ2V0QWxsV2Vla2x5Tm90ZXMiLCAiY3JlYXRlTW9udGhseU5vdGUiLCAiZ2V0TW9udGhseU5vdGUiLCAiZ2V0QWxsTW9udGhseU5vdGVzIiwgImNyZWF0ZVllYXJseU5vdGUiLCAiZ2V0WWVhcmx5Tm90ZSIsICJnZXRBbGxZZWFybHlOb3RlcyIsICJpbXBvcnRfb2JzaWRpYW4iLCAiSG9tZUJhc2VUeXBlIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAiaW1wb3J0X29ic2lkaWFuIiwgIk9WaWV3IiwgIl9hIiwgInNob3VsZEZvY3VzIiwgImltcG9ydF9vYnNpZGlhbiIsICJpbXBvcnRfb2JzaWRpYW4iLCAibWFpbldvcmtzcGFjZSIsICJnZXRGaWxlQnlQYXRoIiwgImltcG9ydF9vYnNpZGlhbiIsICJwZXJpb2RpY05vdGVzIiwgInZlcnNpb24iLCAiaXNMZWdhY3kiXQp9Cg==
